"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[217],{6058:(e,t,s)=>{s.d(t,{n:()=>o});var r=s(2019),n=s(3727);const i="ClosableMessage_customMessage__I89Df",a="ClosableMessage_closeIcon__M7QGN";var c=s(579);const o=e=>{let{type:t,content:s}=e;const o="closable-message";r.Ay[t]({key:o,content:(0,c.jsxs)("div",{children:[s,(0,c.jsx)(n.A,{onClick:()=>r.Ay.destroy(o),className:a})]}),className:i})}},9868:(e,t,s)=>{s.d(t,{w:()=>d});var r=s(4e3),n=s(5578),i=(s(5043),s(4117));const a="CustomInput_inputWrapper__wz8SN",c="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:h,onChange:m,value:p}=e;const{t:g}=(0,i.Bd)();return(0,l.jsx)("div",{className:a,children:(0,l.jsx)(r.A.Item,{label:(0,l.jsx)("span",{className:c,children:g(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(n.A,{type:d,placeholder:x,className:`${o} ${h}`,allowClear:!0,onChange:e=>{const{value:t}=e.target;m&&m(t)},value:p,autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>c});var r=s(8732),n=s(2918),i=s(5043),a=s(579);const c=e=>{let{open:t,onCancel:s,footer:c=null,children:o,className:l}=e;return(0,i.useEffect)((()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[t]),(0,a.jsx)(r.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,a.jsx)(n.A,{open:t,onCancel:s,footer:c,style:{marginTop:"40px"},className:l,children:o})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(1984),n=s(4117),i=s(5459);const a={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var c=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,n.Bd)(),{ref:d,controls:x}=(0,i.F)();return(0,c.jsx)(r.P.h2,{ref:d,className:`${a.descriptionTitle} ${a[s]} ${o}`,initial:"hidden",animate:x,variants:i.l,children:l(t)})}},888:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(5043);const n="NumericInput_input__1SATw";var i=s(579);const a=(e,t)=>{let{value:s,onChange:r,onBlur:a}=e;return(0,i.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1)),/^\d*\.?\d*$/.test(t)&&r(t)},onBlur:a,className:n,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"})},c=(0,r.forwardRef)(a)},9752:(e,t,s)=>{s.d(t,{f:()=>i});s(5043);var r=s(579);const n={maxWidth:"1200px",margin:"0 auto"},i=e=>{let{children:t}=e;return(0,r.jsx)("div",{style:n,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>a});s(5043);var r=s(7021);const n="ResetButton_reset__efwrw";var i=s(579);const a=e=>{let{onClick:t,children:s,icon:a}=e;return(0,i.jsx)(r.Ay,{className:n,onClick:t,icon:a,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>a});var r=s(7021);s(5043);const n="SettingButton_btn__TNlVz";var i=s(579);const a=e=>{let{onClick:t,icon:s,children:a,className:c}=e;return(0,i.jsx)(r.Ay,{onClick:t,icon:s,className:`${n} ${c}`,children:a})}},9589:(e,t,s)=>{s.d(t,{t:()=>c});s(5043);var r=s(1984),n=s(5459);const i="SubTitle_subTitle__6A8PN";var a=s(579);const c=e=>{let{children:t,className:s}=e;const{ref:c,controls:o}=(0,n.F)();return(0,a.jsx)(r.P.p,{ref:c,className:`${i} ${s}`,initial:"hidden",animate:o,variants:n.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>a,l:()=>c});var r=s(9927),n=s(5246),i=s(5043);const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const a=(0,r.s)(),[c,o]=(0,n.Wx)({threshold:e,triggerOnce:t});return(0,i.useEffect)((()=>{o?a.start("visible"):a.start("hidden")}),[a,o]),{ref:c,controls:a,animationVariants:s}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},1217:(e,t,s)=>{s.r(t),s.d(t,{default:()=>He});var r=s(5043),n=s(3216),i=s(1499),a=s(9752),c=s(4117),o=s(6032),l=s(8895),d=s(9589),x=s(7261),u=s(9472),h=s(579);const m=()=>{const{t:e}=(0,c.Bd)();return(0,h.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,h.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})};var p=s(6058),g=s(1023);const v="Exercises_title__ThgWQ",_="Exercises_description__cykz7",y="Exercises_cards__+xw7k";var j=s(1882),f=s(3390),w=s(7407),E=s(8204);const S="CardOptions_options__F-aCP",C="CardOptions_star__tS7rd",N="CardOptions_active__E3ut+",k="CardOptions_editExercise__JcxiY",A="CardOptions_editBtn__WYKcX",D="CardOptions_saveRecord__QY7zv",I=e=>{let{item:t,category:s,setData:n,setCurrentEditingId:i,setNewName:a,editMode:d,setEditMode:x}=e;const{t:u}=(0,c.Bd)(),[m,g]=(0,r.useState)(!1);return(0,h.jsxs)("div",{className:S,children:[(0,h.jsx)(E.D,{icon:(0,h.jsx)(j.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const r=(0,l.xI)().currentUser;if(r){const i=r.uid,a=(0,o.H9)((0,o.aU)(),"exercises",i),c=await(0,o.x7)(a);if(c.exists()){const r=c.data(),i=r.exercises.filter((e=>e.isFavorite)).length;if(!t&&i>=3)return void(0,p.n)({type:"warning",content:u("maxFavoritesReached")});let l=r.exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,o.mZ)(a,{exercises:l});const d=u(`categories.${s}`),x=l.filter((e=>u(`categories.${e.category}`)===d));n(x)}if(!t)return void(0,p.n)({type:"success",content:u("addedToFavorite")});(0,p.n)({type:"success",content:u("removedFromFavorite")}),g(!m)}}catch(r){(0,p.n)({type:"error",content:u("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:`${C} ${t.isFavorite?N:""}`,children:(0,h.jsx)("span",{children:u("favorite")})}),d?(0,h.jsx)("div",{className:A,children:(0,h.jsx)(E.D,{icon:(0,h.jsx)(f.A,{}),className:D,children:(0,h.jsx)("span",{children:u("save")})})}):(0,h.jsx)(E.D,{icon:(0,h.jsx)(w.A,{}),onClick:e=>{var s,r;e.stopPropagation(),s=t.id,r=t.name,i(s),a(r),x(!0)},className:k,children:(0,h.jsx)("span",{children:u("editName")})})]})};var b=s(3727),B=s(2481),R=s(1966),T=s(5556),F=s(9525),H=s(647);const M="DeleteIcon_deleteIconContainer__IWqYi",U="DeleteIcon_exerciseNumber__Q9Zs7",W="DeleteIcon_deleteIcon__ntbKM",$="DeleteIcon_confirm__0yMiT",O="DeleteIcon_deleteSave__joWfR",L=e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:n,isModalOpen:i,handleCancel:a,item:d,setConfirm:x,setSelectedExercise:u}=e;const{t:m}=(0,c.Bd)();return(0,h.jsxs)(T.j,{open:i,onCancel:e=>{a(e),s(!1)},footer:!1,children:[(0,h.jsx)("p",{className:$,children:m("confirmDeletingExercise")}),(0,h.jsx)("div",{className:O,children:(0,h.jsx)(F.U,{children:m("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const i=(0,l.xI)().currentUser;if(i){const a=i.uid,c=(0,o.H9)((0,o.aU)(),"exercises",a),l=(0,o.H9)((0,o.aU)(),"sets",e),d=await(0,o.x7)(c);if(await(0,o.kd)(l),d.exists()){const t=d.data();let s=[];if(t&&t.exercises){s=t.exercises.filter((t=>t.id!==e)),await(0,o.mZ)(c,{exercises:s});const i=s.filter((e=>m(e.category)===m(r)));n(i),localStorage.setItem("exercisesData",JSON.stringify(i))}}x(!1),s(!1),t(!1),u(null),(0,H.e)(),(0,p.n)({type:"success",content:m("exerciseDeleted")})}}catch(i){(0,p.n)({type:"error",content:m("errorDeletingExercise")})}})(d.id)},icon:(0,h.jsx)(R.A,{})})})]})},P=e=>{let{setLoading:t,setIsModalOpen:s,category:n,setData:i,isModalOpen:a,handleCancel:o,item:l,index:d,setSelectedExercise:x}=e;const{t:u}=(0,c.Bd)(),[m,p]=(0,r.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:M,children:[(0,h.jsxs)("div",{className:U,children:[d+1,"."]}),(0,h.jsx)(B.A,{title:u("deleteExercise"),children:(0,h.jsx)(b.A,{className:W,onClick:e=>{e.stopPropagation(),p(!0),s(!0)}})})]}),m&&(0,h.jsx)(L,{setLoading:t,category:n,setData:i,isModalOpen:a,setIsModalOpen:s,handleCancel:o,item:l,setConfirm:p,setSelectedExercise:x})]})},J="EditInput_editInput__CnmRa",Y=e=>{let{newName:t,editMode:s,currentEditingId:n,setCurrentEditingId:i,category:a,setData:d,setEditMode:x,setNewName:u}=e;const m=(0,l.xI)().currentUser,{t:g}=(0,c.Bd)(),v=(0,r.useRef)(null);(0,r.useEffect)((()=>{s&&v.current&&v.current.focus()}),[s]);const _=async(e,t)=>{try{if(m){const s=m.uid,r=(0,o.H9)((0,o.aU)(),"exercises",s),n=await(0,o.x7)(r);if(n.exists()){const s=n.data(),i=s.exercises.find((t=>t.id===e));if(i&&i.name===t)return void(0,p.n)({type:"warning",content:g("nameNotChanged")});if(t.trim().length<3)return void(0,p.n)({type:"error",content:g("nameMin3Symbols")});if(s.exercises.some((s=>s.id!==e&&s.name===t)))return void(0,p.n)({type:"error",content:g("nameAlreadyExists")});let c=s.exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,o.mZ)(r,{exercises:c});const l=c.filter((e=>g(`categories.${e.category}`)===g(`categories.${a}`))).map((e=>({id:e.id,name:g(e.name),category:e.category,bestResult:`${g("lastSet")}: ${e.bestResult}`,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(l)),d(l),(0,p.n)({type:"success",content:g("nameUpdated")})}}}catch(s){(0,p.n)({type:"error",content:g("nameChangeFailed")})}};return(0,h.jsx)("input",{value:t,className:J,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n&&(_(n,t),x(!1),i(null))},onBlur:()=>{n&&(_(n,t),x(!1),i(null))},ref:v})},q="ExerciseCard_cardItem__2AKct",V="ExerciseCard_active__7n1-4",Z="ExerciseCard_exerciseContainer__nXbmq",z="ExerciseCard_exerciseName__MCYS-",K=e=>{let{item:t,onSelectExercise:s,category:n,setData:i,setLoading:a,activeCardId:c,setActiveCardId:o,index:l,exercisesRef:d,setSelectedExercise:x}=e;const[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[v,_]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1);return(0,h.jsxs)("div",{className:`${q} ${c===t.id?V:""}`,onClick:()=>(e=>{o(e.id),s(e)})(t),ref:d,children:[(0,h.jsx)(P,{setLoading:a,setIsModalOpen:m,category:n,setData:i,isModalOpen:u,handleCancel:e=>{e.stopPropagation(),m(!1)},item:t,index:l,setSelectedExercise:x}),v===t.id&&y?(0,h.jsx)(Y,{newName:p,editMode:y,currentEditingId:v,setCurrentEditingId:_,category:n,setData:i,setEditMode:j,setNewName:g}):(0,h.jsx)("div",{className:Z,children:(0,h.jsx)("span",{className:z,children:t.name})}),(0,h.jsx)(I,{item:t,category:n,setData:i,setCurrentEditingId:_,setNewName:g,editMode:y,setEditMode:j})]})},Q=e=>{let{category:t,updateTrigger:s,onSelectExercise:n,exercisesRef:i,activeCardId:a,setActiveCardId:u,setSelectedExercise:j,data:f,setData:w}=e;const E=(0,l.xI)().currentUser,{t:S}=(0,c.Bd)(),[C,N]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(w(e),N(!1))}),[t]),(0,r.useEffect)((()=>{(async()=>{N(!0);try{if(E){const e=(0,o.H9)((0,o.aU)(),"exercises",E.uid),s=await(0,o.x7)(e);if(s.exists()){const e=s.data(),r=S(t),n=e.exercises.filter((e=>S(e.category)===r));localStorage.setItem("exercisesData",JSON.stringify(n)),w(n)}}N(!1)}catch(e){(0,p.n)({type:"error",content:S("errorFetchingExercises")})}})()}),[t,S,s,g.A.language]),(0,h.jsx)(h.Fragment,{children:C?(0,h.jsx)(x.a,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.t,{children:S("exercises"),className:v}),(0,h.jsx)("div",{className:_,children:S("chooseExercise")}),(0,h.jsx)("div",{className:y,children:f.length?f.map(((e,s)=>(0,h.jsx)(K,{item:e,onSelectExercise:n,category:t,setData:w,setLoading:N,activeCardId:a,setActiveCardId:u,index:s,exercisesRef:i,setSelectedExercise:j},e.id))):(0,h.jsx)(m,{})})]})})};var G=s(8354),X=s(8732),ee=s(5743),te=s(1238),se=s(888);const re=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),ne="ExerciseTable_tableTitle__nWHV1",ie="ExerciseTable_subtitle__dWB0y",ae="ExerciseTable_dateAndDelete__Rghoq",ce="ExerciseTable_table__gqYvK",oe="ExerciseTable_editableDiv__lnIPx",le="ExerciseTable_repsAndDelete__sJi7S";var de=s(5337),xe=s(682),ue=s(9905),he=s(3963);const me="TableFooter_tableFooter__Vdj4o",pe="TableFooter_saveBtn__CLumP",ge=e=>{let{historyButton:t,showHistory:s,setShowHistory:r,workouts:n,workoutDates:i}=e;return(0,h.jsxs)(h.Fragment,{children:[t&&(0,h.jsx)(he.S,{onClick:()=>{r((e=>!e)),re()},children:s?"HIDE HISTORY":"SHOW HISTORY"}),s&&n.length>0&&(0,h.jsx)("div",{children:i.slice().reverse().map(((e,t)=>(0,h.jsx)("div",{children:`${e}: ${n[t].map((e=>`Set: ${e.set}, Weight: ${e.weight}, Reps: ${e.reps}`)).join(", ")}`},t)))})]})},ve=e=>{let{selectedExercise:t,data:s,setData:n,setEditWeight:i,saveExerciseData:a,onWorkoutDateChange:l,setCurrentWorkout:d,addRowBtn:x,setAddRowBtn:u,saveBtn:m,setSaveBtn:p,setDeleteBtn:g,historyButton:v,setHistoryButton:_,showHistory:y,setShowHistory:j}=e;const{t:w}=(0,c.Bd)(),[S,C]=(0,r.useState)([]),[N,k]=(0,r.useState)([]),[A,D]=(0,r.useState)(-1),[I,B]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(B(!0),D(-1),u(!1),p(!1),g(!1),d(!1),n([]),t){const r=(0,o.rJ)((0,o.aU)(),"sets"),i=(0,o.H9)(r,t.id);try{const t=await(0,o.x7)(i);if(t.exists()){var e;const s=(null===(e=t.data())||void 0===e?void 0:e.workouts)||[];if(Array.isArray(s)&&s.length>0){C(s.map((e=>e.approaches||[]))),k(s.map((e=>e.date)));const e=s.length-1;D(e),B(!1),l(s[e].date)}else n([]),k([]),D(-1),B(!0)}}catch(s){console.error("Error loading workouts:",s)}}})()}),[t]);const R=A===S.length-1;return(0,h.jsxs)(h.Fragment,{children:[x&&(0,h.jsx)(E.D,{onClick:()=>{if(!t)return;const e=[...s],r=e.length>0?e[e.length-1].set+1:1,a={key:r.toString(),weight:"",set:r,reps:"",icon:(0,h.jsx)(b.A,{})};e.push(a),n(e),i(a.key)},icon:(0,h.jsx)(de.A,{}),children:w("addRow")}),m&&(0,h.jsx)("div",{className:pe,children:(0,h.jsx)(he.S,{onClick:a,icon:(0,h.jsx)(f.A,{}),children:w("saveTraining")})}),(0,h.jsxs)("div",{className:me,children:[!I&&A>0?(0,h.jsx)(he.S,{onClick:()=>{if(A>0){const e=A-1;D(e),n(S[e]||[]),l(N[e])}},icon:(0,h.jsx)(xe.A,{}),children:w("previous")}):(0,h.jsx)("div",{}),!I&&!R&&(0,h.jsx)(he.S,{onClick:()=>{if(A<S.length-1){const e=A+1;D(e),n(S[e]||[]),l(N[e])}},icon:(0,h.jsx)(ue.A,{}),children:w("next")}),(R||I)&&!m&&(0,h.jsxs)(he.S,{onClick:()=>{n([]),u(!0),p(!0),B(!0),d(!0),g(!1),_(!0)},children:[w("newEntry"),(0,h.jsx)(ue.A,{})]})]}),(0,h.jsx)(ge,{historyButton:v,showHistory:y,setShowHistory:j,workouts:S,workoutDates:N})]})};var _e=s(7326);const ye="BestResult_collapse__pQyb-",je="BestResult_title__jsqEH",fe="BestResult_wrapper__1-LYV",we="BestResult_editBtn__8ELAU",Ee="BestResult_saveRecord__oirpc",Se="BestResult_updateRecord__tUmlI",Ce=e=>{let{bestResult:t,selectedExercise:s,setBestResult:n}=e;const{t:i}=(0,c.Bd)(),a=(0,l.xI)().currentUser,[d,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[g,v]=(0,r.useState)((null===t||void 0===t?void 0:t.reps)||"0"),[_,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{m((null===t||void 0===t?void 0:t.weight)||"0"),v((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const j=async()=>{_||(await(async e=>{if(a&&s&&!_){y(!0);const r=(0,o.H9)((0,o.aU)(),"exercises",a.uid);try{const t=await(0,o.x7)(r);if(t.exists()){const a=t.data(),c=a.exercises.find((e=>e.id===s.id));if(c.bestResult.weight===e.weight&&c.bestResult.reps===e.reps)return(0,p.n)({type:"info",content:i("noChangesDetected")}),void y(!1);if(0===Number(e.reps))return v(c.bestResult.reps),(0,p.n)({type:"error",content:i("repsNot0")}),void y(!1);const l=a.exercises.map((t=>t.id===s.id?{...t,bestResult:e}:t));await(0,o.mZ)(r,{exercises:l}),n(e),(0,p.n)({type:"success",content:i("recordUpdated")})}else(0,p.n)({type:"error",content:i("noExercisesFound")})}catch(t){(0,p.n)({type:"error",content:i("errorSavingBestResult")})}finally{y(!1)}}})({weight:u,reps:g}),x(!1))},S=[{key:"1",label:(0,h.jsx)("div",{className:je,children:i("bestExerciseResult")}),children:(0,h.jsx)(h.Fragment,{children:d?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:fe,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)(se.A,{value:u,onChange:m}),(0,h.jsx)("span",{children:i("kg")})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(se.A,{value:g,onChange:v,onBlur:j}),(0,h.jsx)("span",{children:i("bestResultReps")})]})]}),(0,h.jsx)("div",{className:we,children:(0,h.jsx)(E.D,{icon:(0,h.jsx)(f.A,{}),onClick:j,className:Ee,children:(0,h.jsx)("span",{children:i("saveRecord")})})})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:fe,children:[(0,h.jsxs)("div",{children:[u," ",i("kg")]}),(0,h.jsxs)("div",{children:[g," ",i("bestResultReps")]})]}),(0,h.jsx)("div",{className:we,children:(0,h.jsx)(E.D,{icon:(0,h.jsx)(w.A,{}),onClick:()=>x(!0),className:Se,children:(0,h.jsx)("span",{children:i("updateRecord")})})})]})}),extra:(0,h.jsx)("img",{src:"/GymTracker/assets/Icons/AdditionalIcons/trophy.png"})}];return(0,h.jsx)("div",{className:ye,children:(0,h.jsx)(_e.A,{size:"large",items:S,bordered:!1})})};var Ne=s(2019);const ke="DeleteWorkout_deleteWorkout__T7qoY",Ae="DeleteWorkout_confirm__yTni8",De="DeleteWorkout_deleteBtn__u1SVc",Ie=e=>{let{workoutDate:t,selectedExercise:s,setData:n,setWorkoutDate:i,setSelectedExercise:a,setActiveCardId:d}=e;const{t:x}=(0,c.Bd)(),u=(0,l.xI)().currentUser,[,m]=Ne.Ay.useMessage(),[p,g]=(0,r.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[m,(0,h.jsx)("div",{className:ke,children:(0,h.jsx)(F.U,{icon:(0,h.jsx)(R.A,{}),onClick:()=>{t&&s?g(!0):Ne.Ay.error({key:"limit-error",content:x("noDataToDelete")})},children:x("deleteWorkout")})}),(0,h.jsxs)(T.j,{open:p,onCancel:e=>{g(!1)},footer:!1,children:[(0,h.jsx)("p",{className:Ae,children:x("confirmDeletingWorkout")}),(0,h.jsx)("div",{className:De,children:(0,h.jsx)(F.U,{children:x("delete"),onClick:e=>{e.stopPropagation(),(async()=>{if(!t||!s||!u)return;const e=(0,o.rJ)((0,o.aU)(),"sets"),r=(0,o.H9)(e,s.id);try{const e=await(0,o.x7)(r);if(e.exists()){const s=(e.data().workouts||[]).filter((e=>new Date(e.date).toLocaleString()!==t));await(0,o.mZ)(r,{workouts:s}),n([]),i(null),a(null),d(null),(0,H.e)(),g(!1),Ne.Ay.success({key:"limit-success",content:x("workoutDeleted")})}}catch(c){Ne.Ay.error({key:"limit-error",content:x("errorDeletingWorkout")})}})()},icon:(0,h.jsx)(R.A,{})})})]})]})},be=e=>{let{selectedExercise:t,setSelectedExercise:s,setActiveCardId:n}=e;const i=(0,l.xI)().currentUser,{t:a}=(0,c.Bd)(),[x,u]=(0,r.useState)([]),[g,v]=(0,r.useState)(null),[_,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[w,E]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[I,B]=(0,r.useState)(!0),[R,T]=(0,r.useState)(!1),[F,H]=(0,r.useState)(!1),M=(0,r.useRef)(null),U=(0,r.useRef)(null);(0,r.useEffect)((()=>{t?W():(u([]),v(null))}),[t]),(0,r.useEffect)((()=>{j&&U.current&&U.current.focus(),_&&M.current&&M.current.focus()}),[j,_]);const W=async()=>{if(i&&t){const s=(0,o.rJ)((0,o.aU)(),"sets"),r=(0,o.H9)(s,t.id),n=(0,o.H9)((0,o.aU)(),"exercises",i.uid);try{const[e,s]=await Promise.all([(0,o.x7)(r),(0,o.x7)(n)]);if(T(!1),H(!1),e.exists()){const r=e.data(),n=(null===r||void 0===r?void 0:r.workouts)||[];if(n.length>0){const e=n[n.length-1],t=new Date(e.date).toLocaleString();E(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps,icon:(0,h.jsx)(b.A,{})})));u(s),re(),B(!0)}else u([]),E(null),B(!1);if(s.exists()){const e=s.data().exercises.find((e=>e.id===t.id));v(e?e.bestResult:null)}}else u([]),E(null),v(null),re(),B(!1)}catch(e){console.error("Error loading exercise data:",e)}}},$=[{title:`${a("set")}`,dataIndex:"set",width:"20%",render:e=>(0,h.jsxs)("span",{children:[e,"."]})},{title:`${a("weight")}`,dataIndex:"weight",width:"30%",render:(e,t)=>S?_===t.key?(0,h.jsx)(se.A,{ref:M,value:t.weight,onChange:e=>((e,t)=>{const s=x.map((s=>s.key===e?{...s,weight:t}:s));u(s)})(t.key,e),onBlur:()=>y(null)}):(0,h.jsx)("div",{onClick:()=>y(t.key),className:oe,children:t.weight||a("clickToEdit")}):(0,h.jsx)("div",{className:oe,children:t.weight})},{title:`${a("reps")}`,dataIndex:"reps",width:"25%",render:(e,t)=>S?j===t.key?(0,h.jsx)(se.A,{ref:U,value:t.reps,onChange:e=>((e,t)=>{const s=x.map((s=>s.key===e?{...s,reps:t}:s));u(s)})(t.key,e),onBlur:()=>f(null)}):(0,h.jsx)("div",{className:le,children:(0,h.jsx)("div",{onClick:()=>f(t.key),className:oe,children:t.reps||a("clickToEdit")})}):(0,h.jsx)("div",{className:oe,children:t.reps})}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(G.A,{style:{backgroundColor:"gray"}}),(0,h.jsx)("div",{className:ne,children:(0,h.jsx)(d.t,{children:(null===t||void 0===t?void 0:t.name)||a("noExerciseSelected"),className:ie})}),(0,h.jsx)(X.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",borderColor:"#535353",cellPaddingBlock:12}}},children:t?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ce,{bestResult:g,selectedExercise:t,setBestResult:v}),S?(0,h.jsxs)("div",{className:ae,children:[a("workoutDate"),": ",(new Date).toLocaleDateString()]}):(0,h.jsxs)("div",{className:ae,children:[a("workoutDate"),": ",w||". . ."]}),(0,h.jsx)(ee.A,{rowKey:e=>e.key,columns:$,dataSource:x,pagination:!1,className:ce,locale:{emptyText:(0,h.jsx)(m,{})}}),(0,h.jsx)(ve,{selectedExercise:t,data:x,setData:u,setEditWeight:y,saveExerciseData:async()=>{if(i&&t){const s=x.filter((e=>Number(e.reps)>0&&Number(e.weight)>0));if(0===s.length)return void(0,p.n)({type:"error",content:a("noDataToSave")});const r=(0,o.rJ)((0,o.aU)(),"sets"),n=(0,o.H9)((0,o.aU)(),"exercises",i.uid);try{const e=(0,o.wP)((0,o.aU)()),i=(0,o.H9)(r,t.id),c=await(0,o.x7)(i),l=c.exists()?c.data():{workouts:[]},d={id:(0,te.A)(),date:(new Date).toISOString(),approaches:s.map(((e,t)=>({id:(0,te.A)(),set:t+1,reps:e.reps,weight:e.weight})))};l.workouts.push(d),e.set(i,l);const x=await(0,o.x7)(n);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(n,{exercises:s})}await e.commit(),C(!1),k(!1),D(!1),T(!1),H(!1),(0,p.n)({type:"success",content:a("exerciseDataSaved")})}catch(e){(0,p.n)({type:"error",content:a("errorSavingExerciseData")})}}},onWorkoutDateChange:e=>{const t=new Date(e),s=t.toLocaleString();isNaN(t.getTime())?console.error("Invalid date:",e):(E(s),C(!1))},setCurrentWorkout:C,addRowBtn:N,setAddRowBtn:k,saveBtn:A,setSaveBtn:D,setDeleteBtn:B,historyButton:R,setHistoryButton:T,showHistory:F,setShowHistory:H}),I&&(0,h.jsx)(Ie,{workoutDate:w,selectedExercise:t,setData:u,setWorkoutDate:E,setSelectedExercise:s,setActiveCardId:n})]}):(0,h.jsx)(ee.A,{columns:$,className:ce,locale:{emptyText:(0,h.jsx)(m,{})}})})]})};var Be=s(9868);const Re="AddExercise_addExercise__7FNxa",Te="AddExercise_button__mkO2c",Fe=e=>{let{onAddExercise:t,category:s}=e;const n=(0,l.xI)().currentUser,{t:i}=(0,c.Bd)(),[a,x]=(0,r.useState)("");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.t,{children:i("addAnExercise")}),(0,h.jsxs)("div",{className:Re,children:[(0,h.jsx)(Be.w,{value:a,onChange:e=>x(e),text:i("exerciseName"),placeholder:i("typeExercise")}),(0,h.jsx)(he.S,{className:Te,icon:(0,h.jsx)(de.A,{}),onClick:async()=>{if(a)try{if(n){const e=n.uid,r={id:(0,te.A)(),name:a,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},c=(0,o.H9)((0,o.aU)(),"exercises",e),l=await(0,o.x7)(c);if(l.exists()){const e=l.data().exercises||[];if(e.some((e=>e.name.toLowerCase()===a.toLowerCase())))return(0,p.n)({type:"error",content:i("nameAlreadyExists")}),void x("");await(0,o.mZ)(c,{exercises:[...e,r]})}else await(0,o.mZ)(c,{exercises:[r]});x(""),t(),(0,p.n)({type:"success",content:i("exerciseAdded")})}}catch(e){(0,p.n)({type:"error",content:i("errorAddingExercise")})}else(0,p.n)({type:"error",content:i("typeExercise")})},children:i("addExerciseBtn")})]})]})},He=()=>{const e=(0,n.zy)().state,[t,s]=(0,r.useState)([]),[c,o]=(0,r.useState)(0),[l,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(null),m=(0,r.useRef)(null);(0,r.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,h.jsx)(a.f,{children:(0,h.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,h.jsx)(i.B,{text:e.title,textAlign:"center"}),(0,h.jsx)(Fe,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>{o((e=>e+1)),m.current&&m.current.scrollIntoView({behavior:"smooth"})}}),(0,h.jsx)(Q,{category:null===e||void 0===e?void 0:e.title,updateTrigger:c,onSelectExercise:e=>{t.find((t=>t.id===e.id))?d(e):(d(null),s([]))},exercisesRef:m,activeCardId:x,setActiveCardId:u,setSelectedExercise:d,data:t,setData:s}),(0,h.jsx)(be,{selectedExercise:l,setSelectedExercise:d,setActiveCardId:u})]})})}},647:(e,t,s)=>{s.d(t,{e:()=>r});const r=()=>setTimeout((()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}),100)}}]);
//# sourceMappingURL=217.5f91d9df.chunk.js.map