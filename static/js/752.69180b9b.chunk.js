"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[752],{6058:(e,t,s)=>{s.d(t,{n:()=>o});var n=s(2019),r=s(3727);const a="ClosableMessage_customMessage__I89Df",i="ClosableMessage_closeIcon__M7QGN";var c=s(579);const o=e=>{let{type:t,content:s}=e;const o="closable-message";n.Ay[t]({key:o,content:(0,c.jsxs)(c.Fragment,{children:[s,(0,c.jsx)(r.A,{onClick:()=>n.Ay.destroy(o),className:i})]}),className:a})}},8161:(e,t,s)=>{s.d(t,{B:()=>u});s(5043);var n=s(3727),r=s(1966),a=s(4117),i=s(5556),c=s(9525),o=s(3963);const l="ConfirmDeleteModal_title__kgkq+",d="ConfirmDeleteModal_buttons__T8jan";var x=s(579);const u=e=>{let{text:t,onClick:s,isModalOpen:u,handleCancel:h}=e;const{t:m}=(0,a.Bd)();return(0,x.jsxs)(i.j,{open:u,onCancel:h,footer:!1,isModalOpen:u,children:[(0,x.jsx)("p",{className:l,children:t}),(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)(o.S,{icon:(0,x.jsx)(n.A,{}),onClick:h,children:m("close")}),(0,x.jsx)(c.U,{children:m("delete"),onClick:s,icon:(0,x.jsx)(r.A,{})})]})]})}},9868:(e,t,s)=>{s.d(t,{w:()=>u});var n=s(4e3),r=s(5578),a=(s(5043),s(4117)),i=s(1984),c=s(5459);const o="CustomInput_inputWrapper__wz8SN",l="CustomInput_inputLabel__b-QWx",d="CustomInput_inputField__baNtE";var x=s(579);const u=e=>{let{name:t,text:s,placeholder:u,isRequired:h=!0,className:m,onChange:p,value:g}=e;const{ref:v,controls:_}=(0,c.F)(),{t:j}=(0,a.Bd)();return(0,x.jsx)(i.P.div,{ref:v,initial:"hidden",animate:_,variants:c.l,className:o,children:(0,x.jsx)(n.A.Item,{label:(0,x.jsx)("span",{className:l,children:j(s)}),name:t,rules:[{required:h}],children:(0,x.jsx)(r.A,{placeholder:u,className:`${d} ${m}`,allowClear:!0,onChange:e=>{let t=e.target.value;"number"!==typeof g||isNaN(Number(e.target.value))||(t=Number(e.target.value)),p&&p(t)},value:null===g||void 0===g?void 0:g.toString(),autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>c});var n=s(8732),r=s(8829),a=s(5043),i=s(579);const c=e=>{let{open:t,onCancel:s,footer:c=null,children:o,className:l}=e;return(0,a.useEffect)((()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[t]),(0,i.jsx)(n.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,i.jsx)(r.A,{open:t,onCancel:s,footer:c,className:l,centered:!0,children:o})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var n=s(1984),r=s(4117),a=s(5459);const i={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var c=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,r.Bd)(),{ref:d,controls:x}=(0,a.F)();return(0,c.jsx)(n.P.h2,{ref:d,className:`${i.descriptionTitle} ${i[s]} ${o}`,initial:"hidden",animate:x,variants:a.l,children:l(t)})}},5369:(e,t,s)=>{s.d(t,{V:()=>x});s(5043);var n=s(4117),r=s(1984),a=s(5459);const i="Hexagon_wrapper__orCOo",c="Hexagon_hexagon__Lz5zU",o="Hexagon_imageContainer__CcV75",l="Hexagon_imageText__dxduD";var d=s(579);const x=e=>{let{text:t,className:s,onClick:x}=e;const{t:u}=(0,n.Bd)(),{ref:h,controls:m}=(0,a.F)();return(0,d.jsx)(r.P.div,{ref:h,initial:"hidden",animate:m,variants:a.l,className:i,children:(0,d.jsxs)("div",{className:o,onClick:x,children:[(0,d.jsx)("img",{src:"./assets/Icons/Hexagon/Hexagon.svg",alt:"Hexagon",className:c}),(0,d.jsx)("span",{className:`${l} ${s}`,children:u(t)})]})})}},888:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(5043);const r="NumericInput_input__1SATw";var a=s(579);const i=(e,t)=>{let{value:s,onChange:n,onBlur:i,className:c,placeholder:o}=e;return(0,a.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1));const s=t.match(/^\d*\.?\d{0,2}/);s&&n(s[0])},onBlur:i,className:`${r} ${c}`,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",placeholder:o})},c=(0,n.forwardRef)(i)},9752:(e,t,s)=>{s.d(t,{f:()=>a});s(5043);var n=s(579);const r={maxWidth:"1200px",margin:"0 auto"},a=e=>{let{children:t}=e;return(0,n.jsx)("div",{style:r,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>i});s(5043);var n=s(7021);const r="ResetButton_reset__efwrw";var a=s(579);const i=e=>{let{onClick:t,children:s,icon:i}=e;return(0,a.jsx)(n.Ay,{className:r,onClick:t,icon:i,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>i});var n=s(7021);s(5043);const r="SettingButton_btn__TNlVz";var a=s(579);const i=e=>{let{onClick:t,icon:s,children:i,className:c}=e;return(0,a.jsx)(n.Ay,{onClick:t,icon:s,className:`${r} ${c}`,children:i})}},9589:(e,t,s)=>{s.d(t,{t:()=>c});s(5043);var n=s(1984),r=s(5459);const a="SubTitle_subTitle__6A8PN";var i=s(579);const c=e=>{let{children:t,className:s}=e;const{ref:c,controls:o}=(0,r.F)();return(0,i.jsx)(n.P.p,{ref:c,className:`${a} ${s}`,initial:"hidden",animate:o,variants:r.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>i,l:()=>c});var n=s(9927),r=s(5246),a=s(5043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1?arguments[1]:void 0;const s=(0,n.s)(),[i,c]=(0,r.Wx)({threshold:e,triggerOnce:!0});return(0,a.useEffect)((()=>{c&&s.start("visible")}),[s,c]),{ref:i,controls:s,animationVariants:t}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},7752:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Me});var n=s(5043),r=s(3216),a=s(1499),i=s(9752),c=s(647),o=s(4117),l=s(6032),d=s(8895),x=s(1984),u=s(9472),h=s(8354),m=s(9589),p=s(3505),g=s(6058),v=s(5459),_=s(1882),j=s(3390),y=s(7407),f=s(8204);const w="CardOptions_options__F-aCP",C="CardOptions_star__tS7rd",E="CardOptions_active__E3ut+",N="CardOptions_editExercise__JcxiY";var k=s(579);const D=n.memo((e=>{let{item:t,category:s,setData:r,setCurrentEditingId:a,setNewName:i,editMode:c,setEditMode:x}=e;const{t:u}=(0,o.Bd)(),[h,m]=(0,n.useState)(!1);return(0,k.jsxs)("div",{className:w,children:[(0,k.jsx)(f.D,{icon:(0,k.jsx)(_.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const n=(0,d.xI)().currentUser;if(n){const a=(0,l.H9)((0,l.aU)(),"exercises",n.uid),i=await(0,l.x7)(a);if(i.exists()){const n=i.data(),c=n.exercises.filter((e=>e.isFavorite)).length;if(!t&&c>=3)return void(0,g.n)({type:"warning",content:u("maxFavoritesReached")});let o=n.exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,l.mZ)(a,{exercises:o});const d=u(s),x=o.filter((e=>u(e.category)===d));r(x),t?(0,g.n)({type:"success",content:u("removedFromFavorite")}):(0,g.n)({type:"success",content:u("addedToFavorite")}),m(!h)}}}catch(n){(0,g.n)({type:"error",content:u("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:`${C} ${t.isFavorite?E:""}`,children:(0,k.jsx)("span",{children:u("favorite")})}),c?(0,k.jsx)("div",{children:(0,k.jsx)(f.D,{icon:(0,k.jsx)(j.A,{}),children:(0,k.jsx)("span",{children:u("save")})})}):(0,k.jsx)(f.D,{icon:(0,k.jsx)(y.A,{}),onClick:e=>{var s,n;e.stopPropagation(),s=t.id,n=t.name,a(s),i(n),x(!0)},className:N,children:(0,k.jsx)("span",{children:u("editName")})})]})}));var S=s(3727),A=s(2481),b=s(8161);const I=n.memo((e=>{let{setLoading:t,setIsModalOpen:s,category:n,setData:r,isModalOpen:a,handleCancel:i,item:x,setConfirm:u,setSelectedExercise:h}=e;const{t:m}=(0,o.Bd)(),p=(0,d.xI)().currentUser;return(0,k.jsx)(b.B,{text:m("confirmDeletingExercise"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{if(p){const a=(0,l.H9)((0,l.aU)(),"exercises",p.uid),i=(0,l.H9)((0,l.aU)(),"sets",e),o=await(0,l.x7)(a);if(await(0,l.kd)(i),o.exists()){const t=o.data();let s=[];if(t&&t.exercises){s=t.exercises.filter((t=>t.id!==e)),await(0,l.mZ)(a,{exercises:s});const i=s.filter((e=>m(e.category)===m(n)));r(i)}}u(!1),s(!1),t(!1),h(null),(0,c.e)(),(0,g.n)({type:"success",content:m("exerciseDeleted")})}}catch(a){(0,g.n)({type:"error",content:m("errorDeletingExercise")})}})(x.id)},isModalOpen:a,handleCancel:i})})),R="DeleteIcon_deleteIconContainer__IWqYi",B="DeleteIcon_numberWrapper__YRY9G",T="DeleteIcon_deleteIcon__ntbKM",F=n.memo((e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:a,isModalOpen:i,handleCancel:c,item:l,index:d,setSelectedExercise:x}=e;const{t:u}=(0,o.Bd)(),[h,m]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:R,children:[(0,k.jsx)("div",{className:B,children:d+1}),(0,k.jsx)(A.A,{title:u("deleteExercise"),children:(0,k.jsx)(S.A,{className:T,onClick:e=>{e.stopPropagation(),m(!0),s(!0)}})})]}),h&&(0,k.jsx)(I,{setLoading:t,category:r,setData:a,isModalOpen:i,setIsModalOpen:s,handleCancel:c,item:l,setConfirm:m,setSelectedExercise:x})]})})),H="EditInput_editInput__CnmRa",M=n.memo((e=>{let{newName:t,editMode:s,currentEditingId:r,setCurrentEditingId:a,category:i,setData:c,setEditMode:x,setNewName:u}=e;const h=(0,d.xI)().currentUser,{t:m}=(0,o.Bd)(),p=(0,n.useRef)(null);(0,n.useEffect)((()=>{s&&p.current&&p.current.focus()}),[s]);const v=async(e,t)=>{try{if(h){const s=(0,l.H9)((0,l.aU)(),"exercises",h.uid),n=await(0,l.x7)(s);if(n.exists()){const r=n.data(),a=r.exercises.find((t=>t.id===e));if(a&&a.name===t)return void(0,g.n)({type:"warning",content:m("nameNotChanged")});if(t.trim().length<3)return void(0,g.n)({type:"error",content:m("nameMin3Symbols")});if(r.exercises.some((s=>s.id!==e&&s.name===t)))return void(0,g.n)({type:"error",content:m("nameAlreadyExists")});let i=r.exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,l.mZ)(s,{exercises:i}),_(i),(0,g.n)({type:"success",content:m("nameUpdated")})}}}catch(s){(0,g.n)({type:"error",content:m("nameChangeFailed")})}},_=async e=>{const t=(0,l.H9)((0,l.aU)(),"exercises",h.uid),s=await(0,l.x7)(t);if(s.exists()){const e=s.data().exercises.filter((e=>m(e.category)===m(i))).map((e=>({id:e.id,name:m(e.name),category:e.category,bestResult:e.bestResult,isFavorite:e.isFavorite})));c(e)}};return(0,k.jsx)("input",{value:t,className:H,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&r&&(v(r,t),x(!1),a(null))},onBlur:()=>{r&&(v(r,t),x(!1),a(null))},ref:p})})),W="ExerciseCard_cardItem__2AKct",U="ExerciseCard_active__7n1-4",L="ExerciseCard_exerciseContainer__nXbmq",P="ExerciseCard_exerciseName__MCYS-",O=n.memo((e=>{let{item:t,onSelectExercise:s,category:r,setData:a,setLoading:i,activeCardId:c,setActiveCardId:o,index:l,exercisesRef:d,setSelectedExercise:x}=e;const[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[g,v]=(0,n.useState)(null),[_,j]=(0,n.useState)(!1);return(0,k.jsxs)("div",{className:`${W} ${c===t.id?U:""}`,onClick:()=>(e=>{o(e.id),s(e)})(t),ref:d,children:[(0,k.jsx)(F,{setLoading:i,setIsModalOpen:h,category:r,setData:a,isModalOpen:u,handleCancel:e=>{e.stopPropagation(),h(!1)},item:t,index:l,setSelectedExercise:x}),g===t.id&&_?(0,k.jsx)(M,{newName:m,editMode:_,currentEditingId:g,setCurrentEditingId:v,category:r,setData:a,setEditMode:j,setNewName:p}):(0,k.jsx)("div",{className:L,children:(0,k.jsx)("span",{className:P,children:t.name})}),(0,k.jsx)(D,{item:t,category:r,setData:a,setCurrentEditingId:v,setNewName:p,editMode:_,setEditMode:j})]})})),$="Exercises_title__ThgWQ",Y="Exercises_description__cykz7",V="Exercises_cards__+xw7k",J=n.memo((e=>{let{category:t,updateTrigger:s,onSelectExercise:r,exercisesRef:a,activeCardId:i,setActiveCardId:c,setSelectedExercise:_,data:j,setData:y}=e;const f=(0,d.xI)().currentUser,{ref:w,controls:C}=(0,v.F)(),{t:E}=(0,o.Bd)(),[N,D]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{(async()=>{D(!0);try{if(f){const e=await(0,l.x7)((0,l.H9)((0,l.aU)(),"exercises",f.uid));if(e.exists()){const s=e.data().exercises.filter((e=>E(e.category)===E(t)));y(s)}}}catch(e){(0,g.n)({type:"error",content:E("errorFetchingExercises")})}finally{D(!1)}})()}),[t,E,s,f,y]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(m.t,{children:E("exercises"),className:$}),(0,k.jsx)(x.P.div,{ref:w,initial:"hidden",animate:C,variants:v.l,className:Y,children:E("chooseExercise")}),N?(0,k.jsx)(p.a,{}):(0,k.jsx)("div",{className:V,children:j.length?j.map(((e,s)=>(0,k.jsx)(O,{item:e,onSelectExercise:r,category:t,setData:y,setLoading:D,activeCardId:i,setActiveCardId:c,index:s,exercisesRef:a,setSelectedExercise:_},e.id))):(0,k.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,k.jsx)("span",{style:{color:"#ffffff"},children:E("noFavoriteExercises")})})}),(0,k.jsx)(h.A,{style:{backgroundColor:"gray"}})]})}));var z=s(1238);const Q=()=>{const{t:e}=(0,o.Bd)();return(0,k.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,k.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})},q=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),150),Z="ExerciseTable_subtitle__dWB0y",K="ExerciseTable_dateWorkout__OEn0m",G="ExerciseTable_emptyBox__Q58Yp";var X=s(5337),ee=s(682),te=s(9905),se=s(3963);const ne="TableFooter_tableFooter__Vdj4o",re="TableFooter_saveBtn__CLumP";var ae=s(7326);const ie="TrainingHistory_container__1IuQh",ce="TrainingHistory_numberWrapper__z8p-2",oe="TrainingHistory_collapse__X+YQG",le="TrainingHistory_historyWorkout__wDKRi",de="TrainingHistory_trainingHistory__Dv31W",xe=n.memo((e=>{let{showHistory:t,workouts:s,workoutDates:n}=e;const{t:r}=(0,o.Bd)(),a=n.map(((e,t)=>({date:e,workout:s[t]}))).sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())),i=a.map(((e,t)=>{return{key:t.toString(),label:(0,k.jsxs)("p",{onClick:q,children:[(0,k.jsx)("span",{className:ce,children:t+1}),r("workoutFor")," ",(0,k.jsxs)("span",{children:[" ",(s=e.date,new Date(s).toLocaleDateString())," "]})]}),children:(0,k.jsx)("div",{className:le,children:(0,k.jsxs)("table",{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:r("set")}),(0,k.jsx)("th",{children:r("weight")}),(0,k.jsx)("th",{children:r("reps")})]})}),(0,k.jsx)("tbody",{children:e.workout.map(((e,t)=>(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{children:[e.set,"."]}),(0,k.jsx)("td",{children:e.weight}),(0,k.jsx)("td",{children:e.reps})]},t)))})]})}),extra:(0,k.jsx)("img",{src:"./assets/Icons/AdditionalIcons/history.png",alt:"History"})};var s}));return(0,k.jsx)("div",{className:ie,children:t&&s.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ae.A,{bordered:!1,expandIcon:e=>{let{isActive:t}=e;return(0,k.jsx)(te.A,{rotate:t?90:0})},items:i,className:oe}),(0,k.jsx)("div",{className:de,children:r("limitTrainingHistory")})]})})})),ue=n.memo((e=>{let{selectedExercise:t,data:s,setData:r,setEditWeight:a,saveExerciseData:i,onWorkoutDateChange:c,setCurrentWorkout:d,addRowBtn:x,setAddRowBtn:u,saveBtn:h,setSaveBtn:m,setDeleteBtn:p,showHistory:g,setShowHistory:v}=e;const{t:_}=(0,o.Bd)(),[y,w]=(0,n.useState)([]),[C,E]=(0,n.useState)([]),[N,D]=(0,n.useState)(-1),[A,b]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{if(b(!0),D(-1),u(!1),m(!1),p(!1),d(!1),r([]),t){const n=(0,l.rJ)((0,l.aU)(),"sets");try{const s=await(0,l.x7)((0,l.H9)(n,t.id));if(s.exists()){var e;const t=(null===(e=s.data())||void 0===e?void 0:e.workouts)||[];if(Array.isArray(t)&&t.length>0){w(t.map((e=>e.approaches||[]))),E(t.map((e=>e.date)));const e=t.length-1;D(e),b(!1),c(t[e].date)}else r([]),E([]),D(-1),b(!0)}}catch(s){console.error(s)}}})()}),[t,c,u,d,r,p,m]);const I=N===y.length-1;return(0,k.jsxs)(k.Fragment,{children:[x&&(0,k.jsx)(f.D,{onClick:()=>{if(!t)return;const e=[...s],n=e.length>0?e[e.length-1].set+1:1,i={key:n.toString(),weight:"",set:n,reps:"",icon:(0,k.jsx)(S.A,{})};e.push(i),r(e),a(i.key)},icon:(0,k.jsx)(X.A,{}),children:_("addRow")}),h&&(0,k.jsx)("div",{className:re,children:(0,k.jsx)(se.S,{onClick:i,icon:(0,k.jsx)(j.A,{}),children:_("saveTraining")})}),(0,k.jsxs)("div",{className:ne,children:[!A&&N>0?(0,k.jsx)(se.S,{onClick:()=>{if(N>0){const e=N-1;D(e),r(y[e]||[]),c(C[e])}},icon:(0,k.jsx)(ee.A,{}),children:_("previous")}):(0,k.jsx)("div",{}),!A&&!I&&(0,k.jsx)(se.S,{onClick:()=>{if(N<y.length-1){const e=N+1;D(e),r(y[e]||[]),c(C[e])}},icon:(0,k.jsx)(te.A,{}),children:_("next")}),(I||A)&&!h&&(0,k.jsxs)(se.S,{onClick:async()=>{await(async()=>{if(!t)return;const e=(0,l.H9)((0,l.rJ)((0,l.aU)(),"sets"),t.id);try{const t=await(0,l.x7)(e);if(t.exists()){var s;const n=(null===(s=t.data())||void 0===s?void 0:s.workouts)||[];if(n.length>=5){const t=n.slice(1),s=(0,l.wP)((0,l.aU)());s.update(e,{workouts:t}),await s.commit(),r(t)}}}catch(n){console.error(n)}})(),r([]),u(!0),m(!0),b(!0),d(!0),p(!1),v(!0)},children:[_("newEntry"),(0,k.jsx)(te.A,{})]})]}),(0,k.jsx)(xe,{showHistory:g,workouts:y,workoutDates:C})]})}));var he=s(888),me=s(5369);const pe="BestResult_collapse__pQyb-",ge="BestResult_title__jsqEH",ve="BestResult_wrapper__1-LYV",_e="BestResult_hexagonTitle__x6aFK",je="BestResult_hexagonContainer__9mpLp",ye="BestResult_container__dYweL",fe="BestResult_saveRecord__oirpc",we="BestResult_editWrapper__yvlTS",Ce=n.memo((e=>{let{bestResult:t,selectedExercise:s,setBestResult:r}=e;const{t:a}=(0,o.Bd)(),i=(0,d.xI)().currentUser,[c,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[m,p]=(0,n.useState)((null===t||void 0===t?void 0:t.reps)||"0"),[v,_]=(0,n.useState)(!1);(0,n.useEffect)((()=>{h((null===t||void 0===t?void 0:t.weight)||"0"),p((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const y=async()=>{Number(m)>100?(0,g.n)({type:"error",content:a("maxReps100")}):Number(u)>1e3?(0,g.n)({type:"error",content:a("maxWeight1000")}):(await(async e=>{if(i&&s&&!v){_(!0);const n=(0,l.H9)((0,l.aU)(),"exercises",i.uid);try{const t=await(0,l.x7)(n);if(t.exists()){const i=t.data(),c=i.exercises.find((e=>e.id===s.id));if(c.bestResult.weight===e.weight&&c.bestResult.reps===e.reps)return(0,g.n)({type:"info",content:a("noChangesDetected")}),void _(!1);if(0===Number(e.reps))return p(c.bestResult.reps),(0,g.n)({type:"error",content:a("repsNot0")}),void _(!1);const o=i.exercises.map((t=>t.id===s.id?{...t,bestResult:e}:t));await(0,l.mZ)(n,{exercises:o}),r(e),(0,g.n)({type:"success",content:a("recordUpdated")})}else(0,g.n)({type:"error",content:a("noExercisesFound")})}catch(t){(0,g.n)({type:"error",content:a("errorSavingBestResult")})}finally{_(!1)}}})({weight:u,reps:m}),x(!1))},w=()=>x(!0),C=[{key:"1",label:(0,k.jsx)("div",{className:ge,children:a("bestExerciseResult")}),children:(0,k.jsx)(k.Fragment,{children:c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:we,children:[(0,k.jsxs)("div",{className:ye,children:[(0,k.jsx)("span",{children:a("userWeight")}),(0,k.jsx)(he.A,{value:u,onChange:h}),(0,k.jsx)("span",{children:a("kg")})]}),(0,k.jsxs)("div",{className:ye,children:[(0,k.jsx)("span",{children:a("reps")}),(0,k.jsx)(he.A,{value:m,onChange:p,onBlur:y})]})]}),(0,k.jsx)(f.D,{icon:(0,k.jsx)(j.A,{}),onClick:y,className:fe,children:(0,k.jsx)("span",{children:a("saveRecord")})})]}):(0,k.jsxs)("div",{className:ve,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:_e,children:a("weight")}),(0,k.jsx)("div",{className:je,children:(0,k.jsx)(me.V,{text:u,onClick:w})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:_e,children:a("reps")}),(0,k.jsx)("div",{className:je,children:(0,k.jsx)(me.V,{text:m,onClick:w})})]})]})}),extra:(0,k.jsx)("img",{src:"./assets/Icons/AdditionalIcons/trophy.png",alt:"Trophy"})}];return(0,k.jsx)("div",{className:pe,children:(0,k.jsx)(ae.A,{items:C,bordered:!1})})}));var Ee=s(1966),Ne=s(9525);const ke=n.memo((e=>{let{workoutDate:t,selectedExercise:s,setData:r,setWorkoutDate:a,setSelectedExercise:i,setActiveCardId:x}=e;const{t:u}=(0,o.Bd)(),h=(0,d.xI)().currentUser,[m,p]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:{margin:"50px"},children:(0,k.jsx)(Ne.U,{icon:(0,k.jsx)(Ee.A,{}),onClick:()=>{t&&s?p(!0):(0,g.n)({type:"error",content:u("noDataToDelete")})},children:u("deleteWorkout")})}),(0,k.jsx)(b.B,{isModalOpen:m,text:u("confirmDeletingWorkout"),onClick:e=>{e.stopPropagation(),(async()=>{if(!t||!s||!h)return;const e=(0,l.rJ)((0,l.aU)(),"sets"),n=(0,l.H9)(e,s.id);try{const e=await(0,l.x7)(n);if(e.exists()){const s=(e.data().workouts||[]).filter((e=>new Date(e.date).toLocaleDateString()!==t));await(0,l.mZ)(n,{workouts:s}),r([]),a(null),i(null),x(null),(0,c.e)(),p(!1),(0,g.n)({type:"success",content:u("workoutDeleted")})}}catch(o){(0,g.n)({type:"error",content:u("errorDeletingWorkout")})}})()},handleCancel:()=>p(!1)})]})}));var De=s(8732),Se=s(8861);const Ae="DataTable_table__RQYJh",be="DataTable_editableDiv__loDoY",Ie="DataTable_inputContainer__grzqU",Re=n.memo((e=>{let{data:t,setData:s,currentWorkout:n,editWeight:r,weightInputRef:a,setEditWeight:i,editReps:c,repsInputRef:l,setEditReps:d}=e;const{t:x}=(0,o.Bd)(),u=[{title:`${x("set")}`,dataIndex:"set",width:"20%",render:e=>(0,k.jsxs)("span",{children:[e,"."]})},{title:`${x("weight")}`,dataIndex:"weight",width:"30%",render:(e,c)=>n?r===c.key?(0,k.jsx)("div",{className:Ie,children:(0,k.jsx)(he.A,{ref:a,value:c.weight,onChange:e=>((e,n)=>{if(Number(n)>1e3)return void(0,g.n)({type:"error",content:x("maxWeight1000")});const r=t.map((t=>t.key===e?{...t,weight:n}:t));s(r)})(c.key,e),onBlur:()=>i(null)})}):(0,k.jsx)("div",{onClick:()=>i(c.key),className:be,children:c.weight||x("clickToEdit")}):(0,k.jsx)("div",{className:be,children:c.weight})},{title:`${x("reps")}`,dataIndex:"reps",width:"25%",render:(e,r)=>n?c===r.key?(0,k.jsx)("div",{className:Ie,children:(0,k.jsx)(he.A,{ref:l,value:r.reps,onChange:e=>((e,n)=>{if(Number(n)>100)return void(0,g.n)({type:"error",content:x("maxReps100")});const r=t.map((t=>t.key===e?{...t,reps:n}:t));s(r)})(r.key,e),onBlur:()=>d(null)})}):(0,k.jsx)("div",{onClick:()=>d(r.key),className:be,children:r.reps||x("clickToEdit")}):(0,k.jsx)("div",{className:be,children:r.reps})}];return(0,k.jsx)(De.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",colorBgContainer:"#282828",borderColor:"#535353"}}},children:(0,k.jsx)(Se.A,{rowKey:e=>e.key,columns:u,dataSource:t,pagination:!1,className:Ae,locale:{emptyText:(0,k.jsx)(Q,{})}})})})),Be=n.memo((e=>{let{selectedExercise:t,setSelectedExercise:s,setActiveCardId:r}=e;const a=(0,d.xI)().currentUser,{t:i}=(0,o.Bd)(),[c,x]=(0,n.useState)([]),[u,h]=(0,n.useState)(null),[p,v]=(0,n.useState)(null),[_,j]=(0,n.useState)(null),[y,f]=(0,n.useState)(null),[w,C]=(0,n.useState)(!1),[E,N]=(0,n.useState)(!1),[D,S]=(0,n.useState)(!1),[A,b]=(0,n.useState)(!0),[I,R]=(0,n.useState)(!1),B=(0,n.useRef)(null),T=(0,n.useRef)(null);(0,n.useEffect)((()=>{_&&T.current&&T.current.focus(),p&&B.current&&B.current.focus()}),[_,p]);const F=(0,n.useCallback)((async()=>{if(a&&t){const n=(0,l.rJ)((0,l.aU)(),"sets"),r=(0,l.H9)(n,t.id),i=(0,l.H9)((0,l.aU)(),"exercises",a.uid);try{const[s,n]=await Promise.all([(0,l.x7)(r),(0,l.x7)(i)]);if(R(!1),s.exists()){var e;const r=(null===(e=s.data())||void 0===e?void 0:e.workouts)||[];if(r.length>0){const e=r[r.length-1],t=new Date(e.date).toLocaleDateString();f(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps})));x(s),q(),b(!0)}else x([]),f(null),b(!1);if(n.exists()){const e=n.data().exercises.find((e=>e.id===t.id));h(e?e.bestResult:null)}}else x([]),f(null),h(null),q(),b(!1)}catch(s){console.error(s)}}}),[t,a]);(0,n.useEffect)((()=>{t?F():(x([]),h(null))}),[t,F]);const H=(0,n.useCallback)((e=>{const t=new Date(e),s=t.toLocaleDateString();isNaN(t.getTime())||(f(s),C(!1))}),[f,C]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(m.t,{children:(null===t||void 0===t?void 0:t.name)||i("noExerciseSelected"),className:Z}),t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ce,{bestResult:u,selectedExercise:t,setBestResult:h}),w?(0,k.jsxs)("div",{className:K,children:[i("workoutDate"),":",(0,k.jsx)("span",{children:(new Date).toLocaleDateString()})]}):(0,k.jsxs)("div",{className:K,children:[i("workoutDate"),":",(0,k.jsx)("span",{children:y||". . ."})]}),(0,k.jsx)(Re,{data:c,setData:x,currentWorkout:w,editWeight:p,weightInputRef:B,setEditWeight:v,editReps:_,repsInputRef:T,setEditReps:j}),(0,k.jsx)(ue,{selectedExercise:t,data:c,setData:x,setEditWeight:v,saveExerciseData:async()=>{if(a&&t){const s=c.filter((e=>Number(e.reps)>0));if(0===s.length)return void(0,g.n)({type:"error",content:i("noDataToSave")});const n=(0,l.rJ)((0,l.aU)(),"sets"),r=(0,l.H9)((0,l.aU)(),"exercises",a.uid);try{const e=(0,l.wP)((0,l.aU)()),a=(0,l.H9)(n,t.id),c=await(0,l.x7)(a),o=c.exists()?c.data():{workouts:[]},d={id:(0,z.A)(),date:(new Date).toISOString(),approaches:s.map(((e,t)=>({id:(0,z.A)(),set:t+1,reps:e.reps,weight:e.weight})))};o.workouts.push(d),e.set(a,o);const x=await(0,l.x7)(r);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(r,{exercises:s})}await e.commit(),C(!1),N(!1),S(!1),R(!1),(0,g.n)({type:"success",content:i("exerciseDataSaved")})}catch(e){(0,g.n)({type:"error",content:i("errorSavingExerciseData")})}}},onWorkoutDateChange:H,setCurrentWorkout:C,addRowBtn:E,setAddRowBtn:N,saveBtn:D,setSaveBtn:S,setDeleteBtn:b,showHistory:I,setShowHistory:R}),A&&(0,k.jsx)(ke,{workoutDate:y,selectedExercise:t,setData:x,setWorkoutDate:f,setSelectedExercise:s,setActiveCardId:r})]}):(0,k.jsx)("div",{className:G,children:(0,k.jsx)(Q,{})})]})}));var Te=s(9868);const Fe="AddExercise_addExercise__7FNxa",He=n.memo((e=>{let{onAddExercise:t,category:s,setData:r}=e;const a=(0,d.xI)().currentUser,{t:i}=(0,o.Bd)(),[c,x]=(0,n.useState)("");return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(m.t,{children:i("addAnExercise")}),(0,k.jsxs)("div",{className:Fe,children:[(0,k.jsx)(Te.w,{value:c,onChange:e=>x(e),text:i("exerciseName"),placeholder:i("typeExercise")}),(0,k.jsx)(se.S,{icon:(0,k.jsx)(X.A,{}),onClick:async()=>{if(c)try{if(a){const e=a.uid,n={id:(0,z.A)(),name:c,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},o=(0,l.H9)((0,l.aU)(),"exercises",e),d=await(0,l.x7)(o);if(d.exists()){const e=d.data().exercises||[],t=e.filter((e=>e.category===s));if(c.length<=2)return void(0,g.n)({type:"error",content:i("nameMin3Symbols")});if(t.length>=10)return void(0,g.n)({type:"error",content:i("maxExercisesReached")});if(e.some((e=>e.name.toLowerCase()===c.toLowerCase())))return(0,g.n)({type:"error",content:i("nameAlreadyExists")}),void x("");await(0,l.mZ)(o,{exercises:[...e,n]});const a=[...e,n].filter((e=>i(e.category)===i(s)));r(a)}else await(0,l.mZ)(o,{exercises:[n]}),r([n]);x(""),t(),(0,g.n)({type:"success",content:i("exerciseAdded")})}}catch(e){(0,g.n)({type:"error",content:i("errorAddingExercise")})}else(0,g.n)({type:"error",content:i("typeExercise")})},children:i("addExerciseBtn")})]})]})})),Me=n.memo((()=>{const e=(0,r.zy)().state,[t,s]=(0,n.useState)([]),[o,l]=(0,n.useState)(0),[d,x]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),m=(0,n.useRef)(null);(0,n.useEffect)((()=>{(0,c.e)()}),[]);return(0,k.jsxs)(i.f,{children:[(0,k.jsx)(a.B,{text:e.title,textAlign:"center"}),(0,k.jsx)(He,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>{l((e=>e+1)),m.current&&m.current.scrollIntoView({behavior:"smooth"})},setData:s}),(0,k.jsx)(J,{category:null===e||void 0===e?void 0:e.title,updateTrigger:o,onSelectExercise:e=>{t.find((t=>t.id===e.id))?x(e):(x(null),s([]))},exercisesRef:m,activeCardId:u,setActiveCardId:h,setSelectedExercise:x,data:t,setData:s}),(0,k.jsx)(Be,{selectedExercise:d,setSelectedExercise:x,setActiveCardId:h})]})}))}}]);
//# sourceMappingURL=752.69180b9b.chunk.js.map