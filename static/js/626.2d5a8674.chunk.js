"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[626],{6058:(e,t,s)=>{s.d(t,{n:()=>o});var r=s(2019),n=s(3727);const i="ClosableMessage_customMessage__I89Df",a="ClosableMessage_closeIcon__M7QGN";var c=s(579);const o=e=>{let{type:t,content:s,className:o}=e;const l="closable-message";r.Ay[t]({key:l,content:(0,c.jsxs)("div",{children:[s,(0,c.jsx)(n.A,{onClick:()=>r.Ay.destroy(l),className:a})]}),className:`${i} ${o}`})}},9868:(e,t,s)=>{s.d(t,{w:()=>d});var r=s(4e3),n=s(5578),i=(s(5043),s(4117));const a="CustomInput_inputWrapper__wz8SN",c="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:h,onChange:m,value:g}=e;const{t:p}=(0,i.Bd)();return(0,l.jsx)("div",{className:a,children:(0,l.jsx)(r.A.Item,{label:(0,l.jsx)("span",{className:c,children:p(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(n.A,{type:d,placeholder:x,className:`${o} ${h}`,allowClear:!0,onChange:e=>{const{value:t}=e.target;m&&m(t)},value:g,autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>c});var r=s(8732),n=s(2918),i=s(5043),a=s(579);const c=e=>{let{open:t,onCancel:s,footer:c=null,children:o,className:l}=e;return(0,i.useEffect)((()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[t]),(0,a.jsx)(r.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,a.jsx)(n.A,{open:t,onCancel:s,footer:c,style:{marginTop:"45px"},className:l,children:o})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(1984),n=s(4117),i=s(5459);const a={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var c=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,n.Bd)(),{ref:d,controls:x}=(0,i.F)();return(0,c.jsx)(r.P.h2,{ref:d,className:`${a.descriptionTitle} ${a[s]} ${o}`,initial:"hidden",animate:x,variants:i.l,children:l(t)})}},9752:(e,t,s)=>{s.d(t,{f:()=>i});s(5043);var r=s(579);const n={maxWidth:"1200px",margin:"0 auto"},i=e=>{let{children:t}=e;return(0,r.jsx)("div",{style:n,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>a});s(5043);var r=s(7021);const n="ResetButton_reset__efwrw";var i=s(579);const a=e=>{let{onClick:t,children:s,icon:a}=e;return(0,i.jsx)(r.Ay,{className:n,onClick:t,icon:a,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>a});var r=s(7021);s(5043);const n="SettingButton_btn__TNlVz";var i=s(579);const a=e=>{let{onClick:t,icon:s,children:a,className:c}=e;return(0,i.jsx)(r.Ay,{onClick:t,icon:s,className:`${n} ${c}`,children:a})}},9589:(e,t,s)=>{s.d(t,{t:()=>c});s(5043);var r=s(1984),n=s(5459);const i="SubTitle_subTitle__6A8PN";var a=s(579);const c=e=>{let{children:t,className:s}=e;const{ref:c,controls:o}=(0,n.F)();return(0,a.jsx)(r.P.p,{ref:c,className:`${i} ${s}`,initial:"hidden",animate:o,variants:n.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>a,l:()=>c});var r=s(9927),n=s(5246),i=s(5043);const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const a=(0,r.s)(),[c,o]=(0,n.Wx)({threshold:e,triggerOnce:t});return(0,i.useEffect)((()=>{o?a.start("visible"):a.start("hidden")}),[a,o]),{ref:c,controls:a,animationVariants:s}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},3626:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Me});var r=s(5043),n=s(3216),i=s(1499),a=s(9752),c=s(2019),o=s(8354),l=s(8732),d=s(5743),x=s(3727),u=s(4117),h=s(8895),m=s(6032),g=s(1238),p=s(9589),v=s(9472),_=s(579);const y=()=>{const{t:e}=(0,u.Bd)();return(0,_.jsx)(v.A,{image:v.A.PRESENTED_IMAGE_SIMPLE,description:(0,_.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})},j="NumericInput_input__1SATw",f=(e,t)=>{let{value:s,onChange:r,onBlur:n}=e;return(0,_.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1)),/^\d*\.?\d*$/.test(t)&&r(t)},onBlur:n,className:j,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"})},w=(0,r.forwardRef)(f),E=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),C="ExerciseTable_tableTitle__nWHV1",N="ExerciseTable_subtitle__dWB0y",S="ExerciseTable_dateAndDelete__Rghoq",k="ExerciseTable_table__gqYvK",A="ExerciseTable_editableDiv__lnIPx",D="ExerciseTable_repsAndDelete__sJi7S";var I=s(5337),b=s(3390),B=s(682),R=s(9905),T=s(3963),F=s(8204);const M="TableFooter_tableFooter__Vdj4o",U="TableFooter_saveBtn__CLumP",$=e=>{let{selectedExercise:t,data:s,setData:n,setEditWeight:i,saveExerciseData:a,onWorkoutDateChange:c,setCurrentWorkout:o,addRowBtn:l,setAddRowBtn:d,saveBtn:h,setSaveBtn:g,setDeleteBtn:p}=e;const{t:v}=(0,u.Bd)(),[y,j]=(0,r.useState)([]),[f,w]=(0,r.useState)([]),[E,C]=(0,r.useState)(-1),[N,S]=(0,r.useState)(!1);(0,r.useEffect)((()=>{S(!1),(async()=>{if(t){const s=(0,m.rJ)((0,m.aU)(),"sets"),r=(0,m.H9)(s,t.id);try{const e=await(0,m.x7)(r);if(e.exists()){const t=e.data(),s=(null===t||void 0===t?void 0:t.workouts)||[];if(Array.isArray(s)&&s.every((e=>Array.isArray(e.approaches)))){j(s.map((e=>e.approaches||[]))),w(s.map((e=>e.date)));const e=s.length-1;C(e),c(s[e].date)}else console.error("Workouts data format is incorrect.")}}catch(e){console.error("Error loading workouts:",e)}}})()}),[t]);const k=E===y.length-1;return(0,_.jsxs)(_.Fragment,{children:[l&&(0,_.jsx)(F.D,{onClick:()=>{if(!t)return;const e=[...s],r=e.length>0?e[e.length-1].set+1:1,a={key:r.toString(),weight:"",set:r,reps:"",icon:(0,_.jsx)(x.A,{})};e.push(a),n(e),i(a.key)},icon:(0,_.jsx)(I.A,{}),children:v("addRow")}),h&&(0,_.jsx)("div",{className:U,children:(0,_.jsx)(T.S,{onClick:a,icon:(0,_.jsx)(b.A,{}),children:v("saveTraining")})}),(0,_.jsxs)("div",{className:M,children:[!N&&E>0?(0,_.jsx)(T.S,{onClick:()=>{if(E>0){const e=E-1;C(e),n(y[e]||[]),c(f[e])}},icon:(0,_.jsx)(B.A,{}),children:v("previous")}):(0,_.jsx)("div",{}),!N&&!k&&(0,_.jsx)(T.S,{onClick:()=>{if(E<y.length-1){const e=E+1;C(e),n(y[e]||[]),c(f[e])}},icon:(0,_.jsx)(R.A,{}),children:v("next")}),!N&&k&&(0,_.jsxs)(T.S,{onClick:()=>{n([]),d(!0),g(!0),S(!0),o(!0),p(!1)},children:[v("newEntry"),(0,_.jsx)(R.A,{})]})]})]})};var W=s(7407),O=s(7326),H=s(6058);const P="BestResult_collapse__pQyb-",L="BestResult_title__jsqEH",J="BestResult_wrapper__1-LYV",q="BestResult_editBtn__8ELAU",V="BestResult_saveRecord__oirpc",Y="BestResult_updateRecord__tUmlI",Z=e=>{let{bestResult:t,selectedExercise:s,setBestResult:n}=e;const{t:i}=(0,u.Bd)(),a=(0,h.xI)().currentUser,[c,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[x,g]=(0,r.useState)((null===t||void 0===t?void 0:t.reps)||"0"),[p,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{d((null===t||void 0===t?void 0:t.weight)||"0"),g((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const y=async()=>{p||(await(async e=>{if(a&&s&&!p){v(!0);const r=(0,m.H9)((0,m.aU)(),"exercises",a.uid);try{const t=await(0,m.x7)(r);if(t.exists()){const a=t.data(),c=a.exercises.find((e=>e.id===s.id));if(c.bestResult.weight===e.weight&&c.bestResult.reps===e.reps)return(0,H.n)({type:"info",content:i("noChangesDetected")}),void v(!1);const o=a.exercises.map((t=>t.id===s.id?{...t,bestResult:e}:t));await(0,m.mZ)(r,{exercises:o}),n(e),(0,H.n)({type:"success",content:i("recordUpdated")})}else(0,H.n)({type:"error",content:i("noExercisesFound")})}catch(t){(0,H.n)({type:"error",content:i("errorSavingBestResult")})}finally{v(!1)}}})({weight:l,reps:x}),o(!1))},j=[{key:"1",label:(0,_.jsx)("div",{className:L,children:i("bestExerciseResult")}),children:(0,_.jsx)(_.Fragment,{children:c?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:J,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(w,{value:l,onChange:d}),(0,_.jsx)("span",{children:i("kg")})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)(w,{value:x,onChange:g,onBlur:y}),(0,_.jsx)("span",{children:i("bestResultReps")})]})]}),(0,_.jsx)("div",{className:q,children:(0,_.jsx)(F.D,{icon:(0,_.jsx)(b.A,{}),onClick:y,className:V,children:(0,_.jsx)("span",{children:i("saveRecord")})})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:J,children:[(0,_.jsxs)("div",{children:[l," ",i("kg")]}),(0,_.jsxs)("div",{children:[x," ",i("bestResultReps")]})]}),(0,_.jsx)("div",{className:q,children:(0,_.jsx)(F.D,{icon:(0,_.jsx)(W.A,{}),onClick:()=>o(!0),className:Y,children:(0,_.jsx)("span",{children:i("updateRecord")})})})]})}),extra:(0,_.jsx)("img",{src:"/GymTracker/assets/Icons/AdditionalIcons/trophy.png"})}];return(0,_.jsx)("div",{className:P,children:(0,_.jsx)(O.A,{size:"large",items:j,bordered:!1})})};var z=s(1966),K=s(9525),Q=s(5556),G=s(647);const X="DeleteWorkout_deleteWorkout__T7qoY",ee="DeleteWorkout_confirm__yTni8",te="DeleteWorkout_deleteBtn__u1SVc",se=e=>{let{workoutDate:t,selectedExercise:s,setData:n,setWorkoutDate:i,setSelectedExercise:a,setActiveCardId:o}=e;const{t:l}=(0,u.Bd)(),d=(0,h.xI)().currentUser,[,x]=c.Ay.useMessage(),[g,p]=(0,r.useState)(!1);return(0,_.jsxs)(_.Fragment,{children:[x,(0,_.jsx)("div",{className:X,children:(0,_.jsx)(K.U,{icon:(0,_.jsx)(z.A,{}),onClick:()=>{t&&s?p(!0):c.Ay.error({key:"limit-error",content:l("noDataToDelete")})},children:l("deleteWorkout")})}),(0,_.jsxs)(Q.j,{open:g,onCancel:e=>{p(!1)},footer:!1,children:[(0,_.jsx)("p",{className:ee,children:l("confirmDeletingWorkout")}),(0,_.jsx)("div",{className:te,children:(0,_.jsx)(K.U,{children:l("delete"),onClick:e=>{e.stopPropagation(),(async()=>{if(!t||!s||!d)return;const e=(0,m.rJ)((0,m.aU)(),"sets"),r=(0,m.H9)(e,s.id);try{const e=await(0,m.x7)(r);if(e.exists()){const s=(e.data().workouts||[]).filter((e=>new Date(e.date).toLocaleString()!==t));await(0,m.mZ)(r,{workouts:s}),n([]),i(null),a(null),o(null),(0,G.e)(),p(!1),c.Ay.success({key:"limit-success",content:l("workoutDeleted")})}}catch(x){c.Ay.error({key:"limit-error",content:l("errorDeletingWorkout")})}})()},icon:(0,_.jsx)(z.A,{})})})]})]})},re=e=>{let{selectedExercise:t,setSelectedExercise:s,setActiveCardId:n}=e;const{t:i}=(0,u.Bd)(),[,a]=c.Ay.useMessage(),[v,j]=(0,r.useState)([]),[f,I]=(0,r.useState)(null),[b,B]=(0,r.useState)(null),[R,T]=(0,r.useState)(null),[F,M]=(0,r.useState)(null),[U,W]=(0,r.useState)(!1),[O,H]=(0,r.useState)(!1),[P,L]=(0,r.useState)(!1),[J,q]=(0,r.useState)(!0),V=(0,r.useRef)(null),Y=(0,r.useRef)(null),z=(0,h.xI)().currentUser;(0,r.useEffect)((()=>{t?K():j([])}),[t]),(0,r.useEffect)((()=>{R&&Y.current&&Y.current.focus(),b&&V.current&&V.current.focus()}),[R,b]);const K=async()=>{if(z&&t){const s=(0,m.rJ)((0,m.aU)(),"sets"),r=(0,m.H9)(s,t.id),n=(0,m.H9)((0,m.aU)(),"exercises",z.uid);try{const[e,s]=await Promise.all([(0,m.x7)(r),(0,m.x7)(n)]);if(e.exists()){const r=e.data(),n=(null===r||void 0===r?void 0:r.workouts)||[];if(n.length>0){const e=n[n.length-1],t=new Date(e.date).toLocaleString();M(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps,icon:(0,_.jsx)(x.A,{})})));j(s),E()}else j([]),M(null),E();if(q(n.length>0),s.exists()){const e=s.data().exercises.find((e=>e.id===t.id));e&&I(e.bestResult)}H(!0),L(!0)}else j([]),M(null),E(),q(!1);H(!1),L(!1)}catch(e){console.log(e)}}},Q=[{title:`${i("set")}`,dataIndex:"set",width:"20%",render:e=>(0,_.jsxs)("span",{children:[e,"."]})},{title:`${i("weight")}`,dataIndex:"weight",width:"30%",render:(e,t)=>U?b===t.key?(0,_.jsx)(w,{ref:V,value:t.weight,onChange:e=>((e,t)=>{const s=v.map((s=>s.key===e?{...s,weight:t}:s));j(s)})(t.key,e),onBlur:()=>B(null)}):(0,_.jsx)("div",{onClick:()=>B(t.key),className:A,children:t.weight||i("clickToEdit")}):(0,_.jsx)("div",{className:A,children:t.weight})},{title:`${i("reps")}`,dataIndex:"reps",width:"25%",render:(e,t)=>U?R===t.key?(0,_.jsx)(w,{ref:Y,value:t.reps,onChange:e=>((e,t)=>{const s=v.map((s=>s.key===e?{...s,reps:t}:s));j(s)})(t.key,e),onBlur:()=>T(null)}):(0,_.jsx)("div",{className:D,children:(0,_.jsx)("div",{onClick:()=>T(t.key),className:A,children:t.reps||i("clickToEdit")})}):(0,_.jsx)("div",{className:A,children:t.reps})}];return(0,_.jsxs)(_.Fragment,{children:[a,(0,_.jsx)(o.A,{style:{backgroundColor:"gray"}}),(0,_.jsx)("div",{className:C,children:(0,_.jsx)(p.t,{children:(null===t||void 0===t?void 0:t.name)||i("noExerciseSelected"),className:N})}),(0,_.jsx)(l.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",borderColor:"#535353",cellPaddingBlock:12}}},children:t?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Z,{bestResult:f,selectedExercise:t,setBestResult:I}),U?(0,_.jsxs)("div",{className:S,children:[i("workoutDate"),": ",(new Date).toLocaleDateString()]}):(0,_.jsxs)("div",{className:S,children:[i("workoutDate"),": ",F||". . ."]}),(0,_.jsx)(d.A,{rowKey:e=>e.key,columns:Q,dataSource:v,pagination:!1,className:k,locale:{emptyText:(0,_.jsx)(y,{})}}),(0,_.jsx)($,{selectedExercise:t,data:v,setData:j,setEditWeight:B,saveExerciseData:async()=>{if(z&&t){const s=v.filter((e=>Number(e.reps)>0&&Number(e.weight)>0));if(0===s.length)return void c.Ay.error({key:"limit-error",content:i("noDataToSave")});const r=(0,m.rJ)((0,m.aU)(),"sets"),n=(0,m.H9)((0,m.aU)(),"exercises",z.uid);try{const e=(0,m.wP)((0,m.aU)()),a=(0,m.H9)(r,t.id),o=await(0,m.x7)(a),l=o.exists()?o.data():{workouts:[]},d={id:(0,g.A)(),date:(new Date).toISOString(),approaches:s.map(((e,t)=>({id:(0,g.A)(),set:t+1,reps:e.reps,weight:e.weight})))};l.workouts.push(d),e.set(a,l);const x=await(0,m.x7)(n);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(n,{exercises:s})}await e.commit(),W(!1),H(!1),L(!1),c.Ay.success({key:"limit-success",content:i("exerciseDataSaved")})}catch(e){c.Ay.error({key:"limit-error",content:i("errorSavingExerciseData")})}}},onWorkoutDateChange:e=>{const t=new Date(e),s=t.toLocaleString();isNaN(t.getTime())?console.error("Invalid date:",e):(M(s),W(!1))},setCurrentWorkout:W,addRowBtn:O,setAddRowBtn:H,saveBtn:P,setSaveBtn:L,setDeleteBtn:q}),J&&(0,_.jsx)(se,{workoutDate:F,selectedExercise:t,setData:j,setWorkoutDate:M,setSelectedExercise:s,setActiveCardId:n})]}):(0,_.jsx)(d.A,{columns:Q,className:k,locale:{emptyText:(0,_.jsx)(y,{})}})})]})};var ne=s(9868);const ie="AddExercise_addExercise__7FNxa",ae="AddExercise_button__mkO2c",ce=e=>{let{onAddExercise:t,category:s}=e;const{t:n}=(0,u.Bd)(),[i,a]=(0,r.useState)("");return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.t,{children:n("addAnExercise")}),(0,_.jsxs)("div",{className:ie,children:[(0,_.jsx)(ne.w,{value:i,onChange:e=>a(e),text:n("exerciseName"),placeholder:n("typeExercise")}),(0,_.jsx)(T.S,{className:ae,icon:(0,_.jsx)(I.A,{}),onClick:async()=>{if(i)try{const e=(0,h.xI)().currentUser;if(e){const r=e.uid,c={id:(0,g.A)(),name:i,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},o=(0,m.H9)((0,m.aU)(),"exercises",r),l=await(0,m.x7)(o);l.exists()?await(0,m.mZ)(o,{exercises:[...l.data().exercises,c]}):await(0,m.mZ)(o,{exercises:[c]}),a(""),t(),(0,H.n)({type:"success",content:n("exerciseAdded")})}}catch(e){(0,H.n)({type:"error",content:n("errorAddingExercise")})}else(0,H.n)({type:"error",content:n("typeExercise")})},children:n("addExerciseBtn")})]})]})};var oe=s(7261);const le="Exercises_title__ThgWQ",de="Exercises_description__cykz7",xe="Exercises_cards__+xw7k";var ue=s(1882);const he="CardOptions_options__F-aCP",me="CardOptions_star__tS7rd",ge="CardOptions_active__E3ut+",pe="CardOptions_editExercise__JcxiY",ve="CardOptions_editBtn__WYKcX",_e="CardOptions_saveRecord__QY7zv",ye=e=>{let{item:t,category:s,setData:n,setCurrentEditingId:i,setNewName:a,editMode:c,setEditMode:o}=e;const{t:l}=(0,u.Bd)(),[d,x]=(0,r.useState)(!1);return(0,_.jsxs)("div",{className:he,children:[(0,_.jsx)(F.D,{icon:(0,_.jsx)(ue.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const r=(0,h.xI)().currentUser;if(r){const i=r.uid,a=(0,m.H9)((0,m.aU)(),"exercises",i),c=await(0,m.x7)(a);if(c.exists()){const r=c.data(),i=r.exercises.filter((e=>e.isFavorite)).length;if(!t&&i>=3)return void(0,H.n)({type:"warning",content:l("maxFavoritesReached")});let o=r.exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,m.mZ)(a,{exercises:o});const d=l(`categories.${s}`),x=o.filter((e=>l(`categories.${e.category}`)===d));n(x)}if(!t)return void(0,H.n)({type:"success",content:l("addedToFavorite")});(0,H.n)({type:"success",content:l("removedFromFavorite")}),x(!d)}}catch(r){(0,H.n)({type:"error",content:l("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:`${me} ${t.isFavorite?ge:""}`,children:(0,_.jsx)("span",{children:l("favorite")})}),c?(0,_.jsx)("div",{className:ve,children:(0,_.jsx)(F.D,{icon:(0,_.jsx)(b.A,{}),className:_e,children:(0,_.jsx)("span",{children:l("save")})})}):(0,_.jsx)(F.D,{icon:(0,_.jsx)(W.A,{}),onClick:e=>{var s,r;e.stopPropagation(),s=t.id,r=t.name,i(s),a(r),o(!0)},className:pe,children:(0,_.jsx)("span",{children:l("editName")})})]})};var je=s(2481);const fe="DeleteIcon_deleteIconContainer__IWqYi",we="DeleteIcon_exerciseNumber__Q9Zs7",Ee="DeleteIcon_deleteIcon__ntbKM",Ce="DeleteIcon_confirm__0yMiT",Ne="DeleteIcon_deleteSave__joWfR",Se=e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:n,isModalOpen:i,handleCancel:a,item:c,setConfirm:o,setSelectedExercise:l}=e;const{t:d}=(0,u.Bd)();return(0,_.jsxs)(Q.j,{open:i,onCancel:e=>{a(e),s(!1)},footer:!1,children:[(0,_.jsx)("p",{className:Ce,children:d("confirmDeletingExercise")}),(0,_.jsx)("div",{className:Ne,children:(0,_.jsx)(K.U,{children:d("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const i=(0,h.xI)().currentUser;if(i){const a=i.uid,c=(0,m.H9)((0,m.aU)(),"exercises",a),x=(0,m.H9)((0,m.aU)(),"sets",e),u=await(0,m.x7)(c);if(await(0,m.kd)(x),u.exists()){const t=u.data();let s=[];if(t&&t.exercises){s=t.exercises.filter((t=>t.id!==e)),await(0,m.mZ)(c,{exercises:s});const i=s.filter((e=>d(`categories.${e.category}`)===d(`categories.${r}`)));n(i),localStorage.setItem("exercisesData",JSON.stringify(i))}}o(!1),s(!1),t(!1),l(null),(0,G.e)(),(0,H.n)({type:"success",content:d("exerciseDeleted")})}}catch(i){(0,H.n)({type:"error",content:d("errorDeletingExercise")})}})(c.id)},icon:(0,_.jsx)(z.A,{})})})]})},ke=e=>{let{setLoading:t,setIsModalOpen:s,category:n,setData:i,isModalOpen:a,handleCancel:c,item:o,index:l,setSelectedExercise:d}=e;const{t:h}=(0,u.Bd)(),[m,g]=(0,r.useState)(!1);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:fe,children:[(0,_.jsxs)("div",{className:we,children:[l+1,"."]}),(0,_.jsx)(je.A,{title:h("deleteExercise"),children:(0,_.jsx)(x.A,{className:Ee,onClick:e=>{e.stopPropagation(),g(!0),s(!0)}})})]}),m&&(0,_.jsx)(Se,{setLoading:t,category:n,setData:i,isModalOpen:a,setIsModalOpen:s,handleCancel:c,item:o,setConfirm:g,setSelectedExercise:d})]})},Ae="EditInput_editInput__CnmRa",De=e=>{let{newName:t,editMode:s,currentEditingId:n,setCurrentEditingId:i,category:a,setData:c,setEditMode:o,setNewName:l}=e;const d=(0,h.xI)().currentUser,{t:x}=(0,u.Bd)(),g=(0,r.useRef)(null);(0,r.useEffect)((()=>{s&&g.current&&g.current.focus()}),[s]);const p=async(e,t)=>{try{if(d){const s=d.uid,r=(0,m.H9)((0,m.aU)(),"exercises",s),n=await(0,m.x7)(r);if(n.exists()){const s=n.data(),i=s.exercises.find((t=>t.id===e));if(i&&i.name===t)return void(0,H.n)({type:"warning",content:x("nameNotChanged")});if(t.trim().length<3)return void(0,H.n)({type:"error",content:x("nameMin3Symbols")});if(s.exercises.some((s=>s.id!==e&&s.name===t)))return void(0,H.n)({type:"error",content:x("nameAlreadyExists")});let o=s.exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,m.mZ)(r,{exercises:o});const l=o.filter((e=>x(`categories.${e.category}`)===x(`categories.${a}`))).map((e=>({id:e.id,name:x(e.name),category:e.category,bestResult:`${x("lastSet")}: ${e.bestResult}`,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(l)),c(l),(0,H.n)({type:"success",content:x("nameUpdated")})}}}catch(s){(0,H.n)({type:"error",content:x("nameChangeFailed")})}};return(0,_.jsx)("input",{value:t,className:Ae,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n&&(p(n,t),o(!1),i(null))},onBlur:()=>{n&&(p(n,t),o(!1),i(null))},ref:g})},Ie="ExerciseCard_cardItem__2AKct",be="ExerciseCard_active__7n1-4",Be="ExerciseCard_exerciseContainer__nXbmq",Re="ExerciseCard_exerciseName__MCYS-",Te=e=>{let{item:t,onSelectExercise:s,category:n,setData:i,setLoading:a,activeCardId:c,setActiveCardId:o,index:l,exercisesRef:d,setSelectedExercise:x}=e;const[u,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[p,v]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1);return(0,_.jsxs)("div",{className:`${Ie} ${c===t.id?be:""}`,onClick:()=>(e=>{o(e.id),s(e)})(t),ref:d,children:[(0,_.jsx)(ke,{setLoading:a,setIsModalOpen:h,category:n,setData:i,isModalOpen:u,handleCancel:e=>{e.stopPropagation(),h(!1)},item:t,index:l,setSelectedExercise:x}),p===t.id&&y?(0,_.jsx)(De,{newName:m,editMode:y,currentEditingId:p,setCurrentEditingId:v,category:n,setData:i,setEditMode:j,setNewName:g}):(0,_.jsx)("div",{className:Be,children:(0,_.jsx)("span",{className:Re,children:t.name})}),(0,_.jsx)(ye,{item:t,category:n,setData:i,setCurrentEditingId:v,setNewName:g,editMode:y,setEditMode:j})]})},Fe=e=>{let{category:t,updateTrigger:s,onSelectExercise:n,exercisesRef:i,activeCardId:a,setActiveCardId:c,setSelectedExercise:o}=e;const{t:l}=(0,u.Bd)(),[d,x]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(x(e),v(!1))}),[t]),(0,r.useEffect)((()=>{(async()=>{v(!0);try{const e=(0,h.xI)().currentUser;if(e){const s=(0,m.H9)((0,m.aU)(),"exercises",e.uid),r=await(0,m.x7)(s);if(r.exists()){const e=r.data().exercises.filter((e=>l(`categories.${e.category}`)===l(`categories.${t}`))).map((e=>({id:e.id,name:l(e.name),category:e.category,bestResult:e.bestResult,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(e)),x(e)}}v(!1)}catch(e){(0,H.n)({type:"error",content:l("errorFetchingExercises")})}})()}),[t,l,s]),(0,_.jsx)(_.Fragment,{children:g?(0,_.jsx)(oe.a,{}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.t,{children:l("exercises"),className:le}),(0,_.jsx)("div",{className:de,children:l("chooseExercise")}),(0,_.jsx)("div",{className:xe,children:d.length?d.map(((e,s)=>(0,_.jsx)(Te,{item:e,onSelectExercise:n,category:t,setData:x,setLoading:v,activeCardId:a,setActiveCardId:c,index:s,exercisesRef:i,setSelectedExercise:o},e.id))):(0,_.jsx)(y,{})})]})})},Me=()=>{const e=(0,n.zy)().state,[t,s]=(0,r.useState)(0),[c,o]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),x=(0,r.useRef)(null);(0,r.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,_.jsx)(a.f,{children:(0,_.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,_.jsx)(i.B,{text:e.title,textAlign:"center"}),(0,_.jsx)(ce,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>{s((e=>e+1)),x.current&&x.current.scrollIntoView({behavior:"smooth"})}}),(0,_.jsx)(Fe,{category:null===e||void 0===e?void 0:e.title,updateTrigger:t,onSelectExercise:e=>o(e),exercisesRef:x,activeCardId:l,setActiveCardId:d,setSelectedExercise:o}),(0,_.jsx)(re,{selectedExercise:c,setSelectedExercise:o,setActiveCardId:d})]})})}},647:(e,t,s)=>{s.d(t,{e:()=>r});const r=()=>setTimeout((()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}),100)}}]);
//# sourceMappingURL=626.2d5a8674.chunk.js.map