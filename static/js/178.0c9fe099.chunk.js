"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[178],{6058:(e,t,s)=>{s.d(t,{n:()=>o});var r=s(2019),n=s(3727);const a="ClosableMessage_customMessage__I89Df",i="ClosableMessage_closeIcon__M7QGN";var c=s(579);const o=e=>{let{type:t,content:s}=e;const o="closable-message";r.Ay[t]({key:o,content:(0,c.jsxs)("div",{children:[s,(0,c.jsx)(n.A,{onClick:()=>r.Ay.destroy(o),className:i})]}),className:a})}},9868:(e,t,s)=>{s.d(t,{w:()=>u});var r=s(4e3),n=s(5578),a=(s(5043),s(4117)),i=s(1984),c=s(5459);const o="CustomInput_inputWrapper__wz8SN",l="CustomInput_inputLabel__b-QWx",d="CustomInput_inputField__baNtE";var x=s(579);const u=e=>{let{name:t,text:s,placeholder:u,isRequired:h=!0,className:m,onChange:g,value:p}=e;const{ref:v,controls:_}=(0,c.F)(),{t:j}=(0,a.Bd)();return(0,x.jsx)(i.P.div,{ref:v,initial:"hidden",animate:_,variants:c.l,className:o,children:(0,x.jsx)(r.A.Item,{label:(0,x.jsx)("span",{className:l,children:j(s)}),name:t,rules:[{required:h}],children:(0,x.jsx)(n.A,{placeholder:u,className:`${d} ${m}`,allowClear:!0,onChange:e=>{const{value:t}=e.target;g&&g(t)},value:p,autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>c});var r=s(8732),n=s(2918),a=s(5043),i=s(579);const c=e=>{let{open:t,onCancel:s,footer:c=null,children:o,className:l}=e;return(0,a.useEffect)((()=>(document.body.style.overflow=t?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[t]),(0,i.jsx)(r.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,i.jsx)(n.A,{open:t,onCancel:s,footer:c,className:l,centered:!0,children:o})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(1984),n=s(4117),a=s(5459);const i={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var c=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,n.Bd)(),{ref:d,controls:x}=(0,a.F)();return(0,c.jsx)(r.P.h2,{ref:d,className:`${i.descriptionTitle} ${i[s]} ${o}`,initial:"hidden",animate:x,variants:a.l,children:l(t)})}},5369:(e,t,s)=>{s.d(t,{V:()=>x});s(5043);var r=s(4117),n=s(1984),a=s(5459);const i="Hexagon_wrapper__orCOo",c="Hexagon_hexagon__Lz5zU",o="Hexagon_imageContainer__CcV75",l="Hexagon_imageText__dxduD";var d=s(579);const x=e=>{let{text:t,className:s,onClick:x}=e;const{t:u}=(0,r.Bd)(),{ref:h,controls:m}=(0,a.F)();return(0,d.jsx)(n.P.div,{ref:h,initial:"hidden",animate:m,variants:a.l,className:i,children:(0,d.jsxs)("div",{className:o,onClick:x,children:[(0,d.jsx)("img",{src:"./assets/Icons/Hexagon/Hexagon.svg",alt:"Hexagon",className:c}),(0,d.jsx)("span",{className:`${l} ${s}`,children:u(t)})]})})}},888:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(5043);const n="NumericInput_input__1SATw";var a=s(579);const i=(e,t)=>{let{value:s,onChange:r,onBlur:i}=e;return(0,a.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1)),/^\d*\.?\d*$/.test(t)&&r(t)},onBlur:i,className:n,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"})},c=(0,r.forwardRef)(i)},9752:(e,t,s)=>{s.d(t,{f:()=>a});s(5043);var r=s(579);const n={maxWidth:"1200px",margin:"0 auto"},a=e=>{let{children:t}=e;return(0,r.jsx)("div",{style:n,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>i});s(5043);var r=s(7021);const n="ResetButton_reset__efwrw";var a=s(579);const i=e=>{let{onClick:t,children:s,icon:i}=e;return(0,a.jsx)(r.Ay,{className:n,onClick:t,icon:i,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>i});var r=s(7021);s(5043);const n="SettingButton_btn__TNlVz";var a=s(579);const i=e=>{let{onClick:t,icon:s,children:i,className:c}=e;return(0,a.jsx)(r.Ay,{onClick:t,icon:s,className:`${n} ${c}`,children:i})}},9589:(e,t,s)=>{s.d(t,{t:()=>c});s(5043);var r=s(1984),n=s(5459);const a="SubTitle_subTitle__6A8PN";var i=s(579);const c=e=>{let{children:t,className:s}=e;const{ref:c,controls:o}=(0,n.F)();return(0,i.jsx)(r.P.p,{ref:c,className:`${a} ${s}`,initial:"hidden",animate:o,variants:n.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>i,l:()=>c});var r=s(9927),n=s(5246),a=s(5043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const i=(0,r.s)(),[c,o]=(0,n.Wx)({threshold:e,triggerOnce:t});return(0,a.useEffect)((()=>{o?i.start("visible"):i.start("hidden")}),[i,o]),{ref:c,controls:i,animationVariants:s}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},5178:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Oe});var r=s(5043),n=s(3216),a=s(1499),i=s(9752),c=s(647),o=s(4117),l=s(6032),d=s(8895),x=s(1984),u=s(9589),h=s(3505),m=s(9472),g=s(579);const p=()=>{const{t:e}=(0,o.Bd)();return(0,g.jsx)(m.A,{image:m.A.PRESENTED_IMAGE_SIMPLE,description:(0,g.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})};var v=s(6058),_=s(5459),j=s(1882),f=s(3390),y=s(7407),w=s(8204);const C="CardOptions_options__F-aCP",N="CardOptions_star__tS7rd",E="CardOptions_active__E3ut+",k="CardOptions_editExercise__JcxiY",S="CardOptions_editBtn__WYKcX",A="CardOptions_saveRecord__QY7zv",D=e=>{let{item:t,category:s,setData:n,setCurrentEditingId:a,setNewName:i,editMode:c,setEditMode:x}=e;const{t:u}=(0,o.Bd)(),[h,m]=(0,r.useState)(!1);return(0,g.jsxs)("div",{className:C,children:[(0,g.jsx)(w.D,{icon:(0,g.jsx)(j.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const r=(0,d.xI)().currentUser;if(r){const a=r.uid,i=(0,l.H9)((0,l.aU)(),"exercises",a),c=await(0,l.x7)(i);if(c.exists()){const r=c.data(),a=r.exercises.filter((e=>e.isFavorite)).length;if(!t&&a>=3)return void(0,v.n)({type:"warning",content:u("maxFavoritesReached")});let o=r.exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,l.mZ)(i,{exercises:o});const d=u(`categories.${s}`),x=o.filter((e=>u(`categories.${e.category}`)===d));n(x)}if(!t)return void(0,v.n)({type:"success",content:u("addedToFavorite")});(0,v.n)({type:"success",content:u("removedFromFavorite")}),m(!h)}}catch(r){(0,v.n)({type:"error",content:u("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:`${N} ${t.isFavorite?E:""}`,children:(0,g.jsx)("span",{children:u("favorite")})}),c?(0,g.jsx)("div",{className:S,children:(0,g.jsx)(w.D,{icon:(0,g.jsx)(f.A,{}),className:A,children:(0,g.jsx)("span",{children:u("save")})})}):(0,g.jsx)(w.D,{icon:(0,g.jsx)(y.A,{}),onClick:e=>{var s,r;e.stopPropagation(),s=t.id,r=t.name,a(s),i(r),x(!0)},className:k,children:(0,g.jsx)("span",{children:u("editName")})})]})};var I=s(3727),b=s(2481),B=s(1966),R=s(5556),T=s(9525);const F="DeleteIcon_deleteIconContainer__IWqYi",H="DeleteIcon_numberWrapper__YRY9G",M="DeleteIcon_deleteIcon__ntbKM",U="DeleteIcon_confirm__0yMiT",W="DeleteIcon_deleteSave__joWfR",P=e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:n,isModalOpen:a,handleCancel:i,item:x,setConfirm:u,setSelectedExercise:h}=e;const{t:m}=(0,o.Bd)();return(0,g.jsxs)(R.j,{open:a,onCancel:e=>{i(e),s(!1)},footer:!1,children:[(0,g.jsx)("p",{className:U,children:m("confirmDeletingExercise")}),(0,g.jsx)("div",{className:W,children:(0,g.jsx)(T.U,{children:m("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const a=(0,d.xI)().currentUser;if(a){const i=a.uid,o=(0,l.H9)((0,l.aU)(),"exercises",i),d=(0,l.H9)((0,l.aU)(),"sets",e),x=await(0,l.x7)(o);if(await(0,l.kd)(d),x.exists()){const t=x.data();let s=[];if(t&&t.exercises){s=t.exercises.filter((t=>t.id!==e)),await(0,l.mZ)(o,{exercises:s});const a=s.filter((e=>m(e.category)===m(r)));n(a),localStorage.setItem("exercisesData",JSON.stringify(a))}}u(!1),s(!1),t(!1),h(null),(0,c.e)(),(0,v.n)({type:"success",content:m("exerciseDeleted")})}}catch(a){(0,v.n)({type:"error",content:m("errorDeletingExercise")})}})(x.id)},icon:(0,g.jsx)(B.A,{})})})]})},$=e=>{let{setLoading:t,setIsModalOpen:s,category:n,setData:a,isModalOpen:i,handleCancel:c,item:l,index:d,setSelectedExercise:x}=e;const{t:u}=(0,o.Bd)(),[h,m]=(0,r.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:F,children:[(0,g.jsx)("div",{className:H,children:d+1}),(0,g.jsx)(b.A,{title:u("deleteExercise"),children:(0,g.jsx)(I.A,{className:M,onClick:e=>{e.stopPropagation(),m(!0),s(!0)}})})]}),h&&(0,g.jsx)(P,{setLoading:t,category:n,setData:a,isModalOpen:i,setIsModalOpen:s,handleCancel:c,item:l,setConfirm:m,setSelectedExercise:x})]})},O="EditInput_editInput__CnmRa",L=e=>{let{newName:t,editMode:s,currentEditingId:n,setCurrentEditingId:a,category:i,setData:c,setEditMode:x,setNewName:u}=e;const h=(0,d.xI)().currentUser,{t:m}=(0,o.Bd)(),p=(0,r.useRef)(null);(0,r.useEffect)((()=>{s&&p.current&&p.current.focus()}),[s]);const _=async(e,t)=>{try{if(h){const s=(0,l.H9)((0,l.aU)(),"exercises",h.uid),r=await(0,l.x7)(s);if(r.exists()){const n=r.data(),a=n.exercises.find((t=>t.id===e));if(a&&a.name===t)return void(0,v.n)({type:"warning",content:m("nameNotChanged")});if(t.trim().length<3)return void(0,v.n)({type:"error",content:m("nameMin3Symbols")});if(n.exercises.some((s=>s.id!==e&&s.name===t)))return void(0,v.n)({type:"error",content:m("nameAlreadyExists")});let o=n.exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,l.mZ)(s,{exercises:o});const d=o.filter((e=>m(`categories.${e.category}`)===m(`categories.${i}`))).map((e=>({id:e.id,name:m(e.name),category:e.category,bestResult:e.bestResult,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(d)),c(d),(0,v.n)({type:"success",content:m("nameUpdated")})}}}catch(s){(0,v.n)({type:"error",content:m("nameChangeFailed")})}};return(0,g.jsx)("input",{value:t,className:O,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n&&(_(n,t),x(!1),a(null))},onBlur:()=>{n&&(_(n,t),x(!1),a(null))},ref:p})},V="ExerciseCard_cardItem__2AKct",Y="ExerciseCard_active__7n1-4",J="ExerciseCard_exerciseContainer__nXbmq",z="ExerciseCard_exerciseName__MCYS-",q=e=>{let{item:t,onSelectExercise:s,category:n,setData:a,setLoading:i,activeCardId:c,setActiveCardId:o,index:l,exercisesRef:d,setSelectedExercise:x}=e;const[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[v,_]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1);return(0,g.jsxs)("div",{className:`${V} ${c===t.id?Y:""}`,onClick:()=>(e=>{o(e.id),s(e)})(t),ref:d,children:[(0,g.jsx)($,{setLoading:i,setIsModalOpen:h,category:n,setData:a,isModalOpen:u,handleCancel:e=>{e.stopPropagation(),h(!1)},item:t,index:l,setSelectedExercise:x}),v===t.id&&j?(0,g.jsx)(L,{newName:m,editMode:j,currentEditingId:v,setCurrentEditingId:_,category:n,setData:a,setEditMode:f,setNewName:p}):(0,g.jsx)("div",{className:J,children:(0,g.jsx)("span",{className:z,children:t.name})}),(0,g.jsx)(D,{item:t,category:n,setData:a,setCurrentEditingId:_,setNewName:p,editMode:j,setEditMode:f})]})},K="Exercises_title__ThgWQ",Q="Exercises_description__cykz7",Z="Exercises_cards__+xw7k",G=e=>{let{category:t,updateTrigger:s,onSelectExercise:n,exercisesRef:a,activeCardId:i,setActiveCardId:c,setSelectedExercise:m,data:j,setData:f}=e;const y=(0,d.xI)().currentUser,{ref:w,controls:C}=(0,_.F)(),{t:N}=(0,o.Bd)(),[E,k]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(f(e),k(!1))}),[t,f]),(0,r.useEffect)((()=>{(async()=>{k(!0);try{if(y){const e=await(0,l.x7)((0,l.H9)((0,l.aU)(),"exercises",y.uid));if(e.exists()){const s=e.data().exercises.filter((e=>N(e.category)===N(t)));localStorage.setItem("exercisesData",JSON.stringify(s)),f(s)}}k(!1)}catch(e){(0,v.n)({type:"error",content:N("errorFetchingExercises")})}})()}),[t,N,s,y,f]),(0,g.jsx)(g.Fragment,{children:E?(0,g.jsx)(h.a,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.t,{children:N("exercises"),className:K}),(0,g.jsx)(x.P.div,{ref:w,initial:"hidden",animate:C,variants:_.l,className:Q,children:N("chooseExercise")}),(0,g.jsx)(x.P.div,{ref:w,initial:"hidden",animate:C,variants:_.l,className:Z,children:j.length?j.map(((e,s)=>(0,g.jsx)(q,{item:e,onSelectExercise:n,category:t,setData:f,setLoading:k,activeCardId:i,setActiveCardId:c,index:s,exercisesRef:a,setSelectedExercise:m},e.id))):(0,g.jsx)(p,{})})]})})};var X=s(8354),ee=s(8732),te=s(9958),se=s(1238),re=s(888);const ne=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),150),ae="ExerciseTable_tableTitle__nWHV1",ie="ExerciseTable_subtitle__dWB0y",ce="ExerciseTable_dateAndDelete__Rghoq",oe="ExerciseTable_table__gqYvK",le="ExerciseTable_editableDiv__lnIPx",de="ExerciseTable_inputContainer__sehEz";var xe=s(5337),ue=s(682),he=s(9905),me=s(3963);const ge="TableFooter_tableFooter__Vdj4o",pe="TableFooter_saveBtn__CLumP";var ve=s(7326);const _e="TrainingHistory_container__1IuQh",je="TrainingHistory_collapse__X+YQG",fe="TrainingHistory_historyWorkout__wDKRi",ye=e=>{let{showHistory:t,workouts:s,workoutDates:r}=e;const{t:n}=(0,o.Bd)(),a=r.map(((e,t)=>({date:e,workout:s[t]}))).sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())),i=a.map(((e,t)=>{return{key:t.toString(),label:(0,g.jsxs)("p",{onClick:ne,children:[n("workoutFor")," ",(0,g.jsxs)("span",{children:[" ",(s=e.date,new Date(s).toLocaleDateString("ru-RU"))," "]})]}),children:(0,g.jsx)("div",{className:fe,children:(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:n("set")}),(0,g.jsx)("th",{children:n("weight")}),(0,g.jsx)("th",{children:n("reps")})]})}),(0,g.jsx)("tbody",{children:e.workout.map(((e,t)=>(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{children:[e.set,"."]}),(0,g.jsx)("td",{children:e.weight}),(0,g.jsx)("td",{children:e.reps})]},t)))})]})}),extra:(0,g.jsx)("img",{src:"./assets/Icons/AdditionalIcons/history.png",alt:"History"})};var s}));return(0,g.jsx)("div",{className:_e,children:t&&s.length>0&&(0,g.jsx)(ve.A,{bordered:!1,expandIcon:e=>{let{isActive:t}=e;return(0,g.jsx)(he.A,{rotate:t?90:0})},items:i,className:je})})},we=e=>{let{selectedExercise:t,data:s,setData:n,setEditWeight:a,saveExerciseData:i,onWorkoutDateChange:c,setCurrentWorkout:d,addRowBtn:x,setAddRowBtn:u,saveBtn:h,setSaveBtn:m,setDeleteBtn:p,showHistory:v,setShowHistory:_}=e;const{t:j}=(0,o.Bd)(),[y,C]=(0,r.useState)([]),[N,E]=(0,r.useState)([]),[k,S]=(0,r.useState)(-1),[A,D]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(D(!0),S(-1),u(!1),m(!1),p(!1),d(!1),n([]),t){const r=(0,l.rJ)((0,l.aU)(),"sets"),a=(0,l.H9)(r,t.id);try{const t=await(0,l.x7)(a);if(t.exists()){var e;const s=(null===(e=t.data())||void 0===e?void 0:e.workouts)||[];if(Array.isArray(s)&&s.length>0){C(s.map((e=>e.approaches||[]))),E(s.map((e=>e.date)));const e=s.length-1;S(e),D(!1),c(s[e].date)}else n([]),E([]),S(-1),D(!0)}}catch(s){console.error("Error loading workouts:",s)}}})()}),[t,c,u,d,n,p,m]);const b=k===y.length-1;return(0,g.jsxs)(g.Fragment,{children:[x&&(0,g.jsx)(w.D,{onClick:()=>{if(!t)return;const e=[...s],r=e.length>0?e[e.length-1].set+1:1,i={key:r.toString(),weight:"",set:r,reps:"",icon:(0,g.jsx)(I.A,{})};e.push(i),n(e),a(i.key)},icon:(0,g.jsx)(xe.A,{}),children:j("addRow")}),h&&(0,g.jsx)("div",{className:pe,children:(0,g.jsx)(me.S,{onClick:i,icon:(0,g.jsx)(f.A,{}),children:j("saveTraining")})}),(0,g.jsxs)("div",{className:ge,children:[!A&&k>0?(0,g.jsx)(me.S,{onClick:()=>{if(k>0){const e=k-1;S(e),n(y[e]||[]),c(N[e])}},icon:(0,g.jsx)(ue.A,{}),children:j("previous")}):(0,g.jsx)("div",{}),!A&&!b&&(0,g.jsx)(me.S,{onClick:()=>{if(k<y.length-1){const e=k+1;S(e),n(y[e]||[]),c(N[e])}},icon:(0,g.jsx)(he.A,{}),children:j("next")}),(b||A)&&!h&&(0,g.jsxs)(me.S,{onClick:()=>{n([]),u(!0),m(!0),D(!0),d(!0),p(!1),_(!0)},children:[j("newEntry"),(0,g.jsx)(he.A,{})]})]}),(0,g.jsx)(ye,{showHistory:v,workouts:y,workoutDates:N})]})};var Ce=s(5369);const Ne="BestResult_collapse__pQyb-",Ee="BestResult_title__jsqEH",ke="BestResult_wrapper__1-LYV",Se="BestResult_hexagonTitle__x6aFK",Ae="BestResult_hexagonContainer__9mpLp",De="BestResult_container__dYweL",Ie="BestResult_saveRecord__oirpc",be=e=>{let{bestResult:t,selectedExercise:s,setBestResult:n}=e;const{t:a}=(0,o.Bd)(),i=(0,d.xI)().currentUser,{ref:c,controls:u}=(0,_.F)(),[h,m]=(0,r.useState)(!1),[p,j]=(0,r.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[y,C]=(0,r.useState)((null===t||void 0===t?void 0:t.reps)||"0"),[N,E]=(0,r.useState)(!1);(0,r.useEffect)((()=>{j((null===t||void 0===t?void 0:t.weight)||"0"),C((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const k=async()=>{N||(await(async e=>{if(i&&s&&!N){E(!0);const r=(0,l.H9)((0,l.aU)(),"exercises",i.uid);try{const t=await(0,l.x7)(r);if(t.exists()){const i=t.data(),c=i.exercises.find((e=>e.id===s.id));if(c.bestResult.weight===e.weight&&c.bestResult.reps===e.reps)return(0,v.n)({type:"info",content:a("noChangesDetected")}),void E(!1);if(0===Number(e.reps))return C(c.bestResult.reps),(0,v.n)({type:"error",content:a("repsNot0")}),void E(!1);const o=i.exercises.map((t=>t.id===s.id?{...t,bestResult:e}:t));await(0,l.mZ)(r,{exercises:o}),n(e),(0,v.n)({type:"success",content:a("recordUpdated")})}else(0,v.n)({type:"error",content:a("noExercisesFound")})}catch(t){(0,v.n)({type:"error",content:a("errorSavingBestResult")})}finally{E(!1)}}})({weight:p,reps:y}),m(!1))},S=()=>m(!0),A=[{key:"1",label:(0,g.jsx)("div",{className:Ee,children:a("bestExerciseResult")}),children:(0,g.jsx)(g.Fragment,{children:h?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:ke,children:[(0,g.jsxs)("div",{className:De,children:[(0,g.jsx)(re.A,{value:p,onChange:j}),(0,g.jsx)("span",{children:a("kg")})]}),(0,g.jsxs)("div",{className:De,children:[(0,g.jsx)(re.A,{value:y,onChange:C,onBlur:k}),(0,g.jsx)("span",{children:a("bestResultReps")})]})]}),(0,g.jsx)(w.D,{icon:(0,g.jsx)(f.A,{}),onClick:k,className:Ie,children:(0,g.jsx)("span",{children:a("saveRecord")})})]}):(0,g.jsxs)("div",{className:ke,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(x.P.div,{ref:c,initial:"hidden",animate:u,variants:_.l,className:Se,children:a("weight")}),(0,g.jsx)("div",{className:Ae,children:(0,g.jsx)(Ce.V,{text:p,onClick:S})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(x.P.div,{ref:c,initial:"hidden",animate:u,variants:_.l,className:Se,children:a("reps")}),(0,g.jsx)("div",{className:Ae,children:(0,g.jsx)(Ce.V,{text:y,onClick:S})})]})]})}),extra:(0,g.jsx)("img",{src:"./assets/Icons/AdditionalIcons/trophy.png",alt:"Trophy"})}];return(0,g.jsx)("div",{className:Ne,children:(0,g.jsx)(ve.A,{items:A,bordered:!1})})};var Be=s(2019);const Re="DeleteWorkout_deleteWorkout__T7qoY",Te="DeleteWorkout_confirm__yTni8",Fe="DeleteWorkout_deleteBtn__u1SVc",He=e=>{let{workoutDate:t,selectedExercise:s,setData:n,setWorkoutDate:a,setSelectedExercise:i,setActiveCardId:x}=e;const{t:u}=(0,o.Bd)(),h=(0,d.xI)().currentUser,[,m]=Be.Ay.useMessage(),[p,v]=(0,r.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[m,(0,g.jsx)("div",{className:Re,children:(0,g.jsx)(T.U,{icon:(0,g.jsx)(B.A,{}),onClick:()=>{t&&s?v(!0):Be.Ay.error({key:"limit-error",content:u("noDataToDelete")})},children:u("deleteWorkout")})}),(0,g.jsxs)(R.j,{open:p,onCancel:e=>{v(!1)},footer:!1,children:[(0,g.jsx)("p",{className:Te,children:u("confirmDeletingWorkout")}),(0,g.jsx)("div",{className:Fe,children:(0,g.jsx)(T.U,{children:u("delete"),onClick:e=>{e.stopPropagation(),(async()=>{if(!t||!s||!h)return;const e=(0,l.rJ)((0,l.aU)(),"sets"),r=(0,l.H9)(e,s.id);try{const e=await(0,l.x7)(r);if(e.exists()){const s=(e.data().workouts||[]).filter((e=>new Date(e.date).toLocaleString()!==t));await(0,l.mZ)(r,{workouts:s}),n([]),a(null),i(null),x(null),(0,c.e)(),v(!1),Be.Ay.success({key:"limit-success",content:u("workoutDeleted")})}}catch(o){Be.Ay.error({key:"limit-error",content:u("errorDeletingWorkout")})}})()},icon:(0,g.jsx)(B.A,{})})})]})]})},Me=e=>{let{selectedExercise:t,setSelectedExercise:s,setActiveCardId:n}=e;const a=(0,d.xI)().currentUser,{t:i}=(0,o.Bd)(),[c,x]=(0,r.useState)([]),[h,m]=(0,r.useState)(null),[_,j]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),[N,E]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[b,B]=(0,r.useState)(!0),[R,T]=(0,r.useState)(!1),F=(0,r.useRef)(null),H=(0,r.useRef)(null);(0,r.useEffect)((()=>{f&&H.current&&H.current.focus(),_&&F.current&&F.current.focus()}),[f,_]);const M=(0,r.useCallback)((async()=>{if(a&&t){const s=(0,l.rJ)((0,l.aU)(),"sets"),r=(0,l.H9)(s,t.id),n=(0,l.H9)((0,l.aU)(),"exercises",a.uid);try{const[e,s]=await Promise.all([(0,l.x7)(r),(0,l.x7)(n)]);if(T(!1),e.exists()){const r=e.data(),n=(null===r||void 0===r?void 0:r.workouts)||[];if(n.length>0){const e=n[n.length-1],t=new Date(e.date).toLocaleString();C(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps,icon:(0,g.jsx)(I.A,{})})));x(s),ne(),B(!0)}else x([]),C(null),B(!1);if(s.exists()){const e=s.data().exercises.find((e=>e.id===t.id));m(e?e.bestResult:null)}}else x([]),C(null),m(null),ne(),B(!1)}catch(e){console.error("Error loading exercise data:",e)}}}),[t,a]);(0,r.useEffect)((()=>{t?M():(x([]),m(null))}),[t,M]);const U=[{title:`${i("set")}`,dataIndex:"set",width:"20%",render:e=>(0,g.jsxs)("span",{children:[e,"."]})},{title:`${i("weight")}`,dataIndex:"weight",width:"30%",render:(e,t)=>N?_===t.key?(0,g.jsx)("div",{className:de,children:(0,g.jsx)(re.A,{ref:F,value:t.weight,onChange:e=>((e,t)=>{const s=c.map((s=>s.key===e?{...s,weight:t}:s));x(s)})(t.key,e),onBlur:()=>j(null)})}):(0,g.jsx)("div",{onClick:()=>j(t.key),className:le,children:t.weight||i("clickToEdit")}):(0,g.jsx)("div",{className:le,children:t.weight})},{title:`${i("reps")}`,dataIndex:"reps",width:"25%",render:(e,t)=>N?f===t.key?(0,g.jsx)("div",{className:de,children:(0,g.jsx)(re.A,{ref:H,value:t.reps,onChange:e=>((e,t)=>{const s=c.map((s=>s.key===e?{...s,reps:t}:s));x(s)})(t.key,e),onBlur:()=>y(null)})}):(0,g.jsx)("div",{onClick:()=>y(t.key),className:le,children:t.reps||i("clickToEdit")}):(0,g.jsx)("div",{className:le,children:t.reps})}],W=(0,r.useCallback)((e=>{const t=new Date(e),s=t.toLocaleString();isNaN(t.getTime())?console.error("Invalid date:",e):(C(s),E(!1))}),[C,E]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(X.A,{style:{backgroundColor:"gray"}}),(0,g.jsx)("div",{className:ae,children:(0,g.jsx)(u.t,{children:(null===t||void 0===t?void 0:t.name)||i("noExerciseSelected"),className:ie})}),(0,g.jsx)(ee.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:17,colorBgContainer:"#282828",colorText:"#ffffff",borderColor:"#535353",cellPaddingBlock:11}}},children:t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(be,{bestResult:h,selectedExercise:t,setBestResult:m}),N?(0,g.jsxs)("div",{className:ce,children:[i("workoutDate"),": ",(new Date).toLocaleDateString()]}):(0,g.jsxs)("div",{className:ce,children:[i("workoutDate"),": ",w||". . ."]}),(0,g.jsx)(te.A,{rowKey:e=>e.key,columns:U,dataSource:c,pagination:!1,className:oe,locale:{emptyText:(0,g.jsx)(p,{})}}),(0,g.jsx)(we,{selectedExercise:t,data:c,setData:x,setEditWeight:j,saveExerciseData:async()=>{if(a&&t){const s=c.filter((e=>Number(e.reps)>0&&Number(e.weight)>0));if(0===s.length)return void(0,v.n)({type:"error",content:i("noDataToSave")});const r=(0,l.rJ)((0,l.aU)(),"sets"),n=(0,l.H9)((0,l.aU)(),"exercises",a.uid);try{const e=(0,l.wP)((0,l.aU)()),a=(0,l.H9)(r,t.id),c=await(0,l.x7)(a),o=c.exists()?c.data():{workouts:[]},d={id:(0,se.A)(),date:(new Date).toISOString(),approaches:s.map(((e,t)=>({id:(0,se.A)(),set:t+1,reps:e.reps,weight:e.weight})))};o.workouts.push(d),e.set(a,o);const x=await(0,l.x7)(n);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(n,{exercises:s})}await e.commit(),E(!1),S(!1),D(!1),T(!1),(0,v.n)({type:"success",content:i("exerciseDataSaved")})}catch(e){(0,v.n)({type:"error",content:i("errorSavingExerciseData")})}}},onWorkoutDateChange:W,setCurrentWorkout:E,addRowBtn:k,setAddRowBtn:S,saveBtn:A,setSaveBtn:D,setDeleteBtn:B,showHistory:R,setShowHistory:T}),b&&(0,g.jsx)(He,{workoutDate:w,selectedExercise:t,setData:x,setWorkoutDate:C,setSelectedExercise:s,setActiveCardId:n})]}):(0,g.jsx)(te.A,{columns:U,className:oe,locale:{emptyText:(0,g.jsx)(p,{})}})})]})};var Ue=s(9868);const We="AddExercise_addExercise__7FNxa",Pe="AddExercise_button__mkO2c",$e=e=>{let{onAddExercise:t,category:s}=e;const n=(0,d.xI)().currentUser,{t:a}=(0,o.Bd)(),[i,c]=(0,r.useState)("");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.t,{children:a("addAnExercise")}),(0,g.jsxs)("div",{className:We,children:[(0,g.jsx)(Ue.w,{value:i,onChange:e=>c(e),text:a("exerciseName"),placeholder:a("typeExercise")}),(0,g.jsx)(me.S,{className:Pe,icon:(0,g.jsx)(xe.A,{}),onClick:async()=>{if(i)try{if(n){const e=n.uid,r={id:(0,se.A)(),name:i,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},o=(0,l.H9)((0,l.aU)(),"exercises",e),d=await(0,l.x7)(o);if(d.exists()){const e=d.data().exercises||[];if(e.filter((e=>e.category===s)).length>=10)return void(0,v.n)({type:"error",content:a("maxExercisesReached")});if(e.some((e=>e.name.toLowerCase()===i.toLowerCase())))return(0,v.n)({type:"error",content:a("nameAlreadyExists")}),void c("");await(0,l.mZ)(o,{exercises:[...e,r]})}else await(0,l.mZ)(o,{exercises:[r]});c(""),t(),(0,v.n)({type:"success",content:a("exerciseAdded")})}}catch(e){(0,v.n)({type:"error",content:a("errorAddingExercise")})}else(0,v.n)({type:"error",content:a("typeExercise")})},children:a("addExerciseBtn")})]})]})},Oe=()=>{const e=(0,n.zy)().state,[t,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(0),[d,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),m=(0,r.useRef)(null);(0,r.useEffect)((()=>{(0,c.e)()}),[]);return(0,g.jsx)(i.f,{children:(0,g.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,g.jsx)(a.B,{text:e.title,textAlign:"center"}),(0,g.jsx)($e,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>{l((e=>e+1)),m.current&&m.current.scrollIntoView({behavior:"smooth"})}}),(0,g.jsx)(G,{category:null===e||void 0===e?void 0:e.title,updateTrigger:o,onSelectExercise:e=>{t.find((t=>t.id===e.id))?x(e):(x(null),s([]))},exercisesRef:m,activeCardId:u,setActiveCardId:h,setSelectedExercise:x,data:t,setData:s}),(0,g.jsx)(Me,{selectedExercise:d,setSelectedExercise:x,setActiveCardId:h})]})})}},647:(e,t,s)=>{s.d(t,{e:()=>r});const r=()=>setTimeout((()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}),100)}}]);
//# sourceMappingURL=178.0c9fe099.chunk.js.map