"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[265],{9868:(e,t,s)=>{s.d(t,{w:()=>d});var a=s(4e3),n=s(5578),r=(s(5043),s(4117));const i="CustomInput_inputWrapper__wz8SN",c="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:p,onChange:h,value:g}=e;const{t:m}=(0,r.Bd)();return(0,l.jsx)("div",{className:i,children:(0,l.jsx)(a.A.Item,{label:(0,l.jsx)("span",{className:c,children:m(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(n.A,{type:d,placeholder:x,className:"".concat(o," ").concat(p),allowClear:!0,onChange:e=>{const{value:t}=e.target;h&&h(t)},value:g,autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>i});var a=s(8732),n=s(2918),r=(s(5043),s(579));const i=e=>{let{open:t,onCancel:s,footer:i=null,children:c}=e;return(0,r.jsx)(a.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,r.jsx)(n.A,{open:t,onCancel:s,footer:i,style:{marginTop:"50px"},children:c})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var a=s(1984),n=s(4117),r=s(5459);const i={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var c=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,n.Bd)(),{ref:d,controls:x}=(0,r.F)();return(0,c.jsx)(a.P.h2,{ref:d,className:"".concat(i.descriptionTitle," ").concat(i[s]," ").concat(o),initial:"hidden",animate:x,variants:r.l,children:l(t)})}},9752:(e,t,s)=>{s.d(t,{f:()=>r});s(5043);var a=s(579);const n={maxWidth:"1200px",margin:"0 auto"},r=e=>{let{children:t}=e;return(0,a.jsx)("div",{style:n,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>i});s(5043);var a=s(7021);const n="ResetButton_reset__efwrw";var r=s(579);const i=e=>{let{onClick:t,children:s,icon:i}=e;return(0,r.jsx)(a.Ay,{className:n,onClick:t,icon:i,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>i});var a=s(7021);s(5043);const n="SettingButton_btn__TNlVz";var r=s(579);const i=e=>{let{onClick:t,icon:s,children:i,className:c}=e;return(0,r.jsx)(a.Ay,{onClick:t,icon:s,className:"".concat(n," ").concat(c),children:i})}},9589:(e,t,s)=>{s.d(t,{t:()=>c});s(5043);var a=s(1984),n=s(5459);const r="SubTitle_subTitle__6A8PN";var i=s(579);const c=e=>{let{children:t,className:s}=e;const{ref:c,controls:o}=(0,n.F)();return(0,i.jsx)(a.P.p,{ref:c,className:"".concat(r," ").concat(s),initial:"hidden",animate:o,variants:n.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>i,l:()=>c});var a=s(9927),n=s(5246),r=s(5043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const i=(0,a.s)(),[c,o]=(0,n.Wx)({threshold:e,triggerOnce:t});return(0,r.useEffect)((()=>{o?i.start("visible"):i.start("hidden")}),[i,o]),{ref:c,controls:i,animationVariants:s}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},8265:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var a=s(5043),n=s(3216),r=s(1499),i=s(9752),c=s(2019),o=s(8354),l=s(8732),d=s(5743),x=s(3727),u=s(1966),p=s(4117),h=s(8895),g=s(6032),m=s(1238),v=s(9589),_=s(9472),j=s(579);const y=()=>{const{t:e}=(0,p.Bd)();return(0,j.jsx)(_.A,{image:_.A.PRESENTED_IMAGE_SIMPLE,description:(0,j.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})},f="NumericInput_input__1SATw",w=(e,t)=>{let{value:s,onChange:a,onBlur:n}=e;return(0,j.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1)),/^\d*\.?\d*$/.test(t)&&a(t)},onBlur:n,className:f,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"})},E=(0,a.forwardRef)(w);var C=s(9525);const N="ExerciseTable_tableTitle__nWHV1",S="ExerciseTable_subtitle__dWB0y",k="ExerciseTable_dateAndDelete__Rghoq",A="ExerciseTable_table__gqYvK",D="ExerciseTable_editableDiv__lnIPx",I="ExerciseTable_repsAndDelete__sJi7S";var b=s(5337),B=s(3390),T=s(682),F=s(9905),R=s(3963),M=s(8204);const U="TableFooter_tableFooter__Vdj4o",W="TableFooter_saveBtn__CLumP",O=e=>{let{selectedExercise:t,data:s,setData:n,setEditWeight:r,saveExerciseData:i,onWorkoutDateChange:c,setCurrentWorkout:o,addRowBtn:l,setAddRowBtn:d,saveBtn:u,setSaveBtn:h,setDeleteBtn:m}=e;const{t:v}=(0,p.Bd)(),[_,y]=(0,a.useState)([]),[f,w]=(0,a.useState)([]),[E,C]=(0,a.useState)(-1),[N,S]=(0,a.useState)(!1);(0,a.useEffect)((()=>{S(!1),(async()=>{if(t){const s=(0,g.rJ)((0,g.aU)(),"sets"),a=(0,g.H9)(s,t.id);try{const e=await(0,g.x7)(a);if(e.exists()){const t=e.data(),s=(null===t||void 0===t?void 0:t.workouts)||[];if(Array.isArray(s)&&s.every((e=>Array.isArray(e.approaches)))){y(s.map((e=>e.approaches||[]))),w(s.map((e=>e.date)));const e=s.length-1;C(e),c(s[e].date)}else console.error("Workouts data format is incorrect.")}}catch(e){console.error("Error loading workouts:",e)}}})()}),[t]);const k=E===_.length-1;return(0,j.jsxs)(j.Fragment,{children:[l&&(0,j.jsx)(M.D,{onClick:()=>{if(!t)return;const e=[...s],a=e.length>0?e[e.length-1].set+1:1,i={key:a.toString(),weight:"",set:a,reps:"",icon:(0,j.jsx)(x.A,{})};e.push(i),n(e),r(i.key)},icon:(0,j.jsx)(b.A,{}),children:v("addRow")}),u&&(0,j.jsx)("div",{className:W,children:(0,j.jsx)(R.S,{onClick:i,icon:(0,j.jsx)(B.A,{}),children:v("saveTraining")})}),(0,j.jsxs)("div",{className:U,children:[!N&&E>0?(0,j.jsx)(R.S,{onClick:()=>{if(E>0){const e=E-1;C(e),n(_[e]||[]),c(f[e])}},icon:(0,j.jsx)(T.A,{}),children:v("previous")}):(0,j.jsx)("div",{}),!N&&!k&&(0,j.jsx)(R.S,{onClick:()=>{if(E<_.length-1){const e=E+1;C(e),n(_[e]||[]),c(f[e])}},icon:(0,j.jsx)(F.A,{}),children:v("next")}),!N&&k&&(0,j.jsxs)(R.S,{onClick:()=>{n([]),d(!0),h(!0),S(!0),o(!0),m(!1)},children:[v("newEntry"),(0,j.jsx)(F.A,{})]})]})]})};var H=s(7407),L=s(7326);const P={collapse:"BestResult_collapse__pQyb-",title:"BestResult_title__jsqEH",wrapper:"BestResult_wrapper__1-LYV",editBtn:"BestResult_editBtn__8ELAU"},J=e=>{let{bestResult:t,onSave:s}=e;const{t:n}=(0,p.Bd)(),[r,i]=c.Ay.useMessage(),[o,l]=(0,a.useState)(!1),[d,x]=(0,a.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[u,h]=(0,a.useState)((null===t||void 0===t?void 0:t.reps)||"0");(0,a.useEffect)((()=>{x((null===t||void 0===t?void 0:t.weight)||"0"),h((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const g=[{key:"1",label:(0,j.jsx)("div",{className:P.title,children:n("bestExerciseResult")}),children:(0,j.jsx)(j.Fragment,{children:o?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:P.wrapper,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(E,{value:d,onChange:x}),(0,j.jsx)("span",{children:n("kg")})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(E,{value:u,onChange:h}),(0,j.jsx)("span",{children:n("bestResultReps")})]})]}),(0,j.jsx)("div",{className:P.editBtn,children:(0,j.jsx)(M.D,{icon:(0,j.jsx)(B.A,{}),className:P.editExercise,onClick:()=>{s({weight:d,reps:u}),l(!1),r.open({type:"success",content:n("recordUpdated")})},children:(0,j.jsx)("span",{children:n("saveRecord")})})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:P.wrapper,children:[(0,j.jsxs)("div",{children:[d," ",n("kg")]}),(0,j.jsxs)("div",{children:[u," ",n("bestResultReps")]})]}),(0,j.jsx)("div",{className:P.editBtn,children:(0,j.jsx)(M.D,{icon:(0,j.jsx)(H.A,{}),className:P.editExercise,onClick:()=>l(!0),children:(0,j.jsx)("span",{children:n("updateRecord")})})})]})}),extra:(0,j.jsx)("img",{src:"/GymTracker/assets/Icons/AdditionalIcons/trophy.png"})}];return(0,j.jsxs)("div",{className:P.collapse,children:[i,(0,j.jsx)(L.A,{size:"large",items:g,bordered:!1})]})},Z=e=>{let{selectedExercise:t}=e;const{t:s}=(0,p.Bd)(),[n,r]=c.Ay.useMessage(),[i,_]=(0,a.useState)([]),[f,w]=(0,a.useState)(null),[b,B]=(0,a.useState)(null),[T,F]=(0,a.useState)(null),R=(0,a.useRef)(null),M=(0,a.useRef)(null),[U,W]=(0,a.useState)(null),H=(0,h.xI)().currentUser,[L,P]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(!1),[z,V]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(!0);(0,a.useEffect)((()=>{t?G():_([])}),[t]),(0,a.useEffect)((()=>{T&&M.current&&M.current.focus(),b&&R.current&&R.current.focus()}),[T,b]);const Q=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),G=async()=>{if(H&&t){const s=(0,g.rJ)((0,g.aU)(),"sets"),a=(0,g.H9)(s,t.id),n=(0,g.H9)((0,g.aU)(),"exercises",H.uid);try{const[e,s]=await Promise.all([(0,g.x7)(a),(0,g.x7)(n)]);if(e.exists()){const a=e.data(),n=(null===a||void 0===a?void 0:a.workouts)||[];if(n.length>0){const e=n[n.length-1],t=new Date(e.date).toLocaleString();W(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps,icon:(0,j.jsx)(x.A,{})})));_(s),Q()}else _([]),W(null),Q();if(s.exists()){const e=s.data().exercises.find((e=>e.id===t.id));e&&w(e.bestResult)}q(!0),V(!0),Y(!0)}else _([]),W(null),Q(),Y(!1);q(!1),V(!1)}catch(e){alert(e)}}},X=[{title:"".concat(s("set")),dataIndex:"set",width:"20%"},{title:"".concat(s("weight")),dataIndex:"weight",width:"30%",render:(e,t)=>b===t.key?(0,j.jsx)(E,{ref:R,value:t.weight,onChange:e=>((e,t)=>{const s=i.map((s=>s.key===e?{...s,weight:t}:s));_(s)})(t.key,e),onBlur:()=>B(null)}):(0,j.jsx)("div",{onClick:()=>B(t.key),className:D,children:t.weight||s("clickToEdit")})},{title:"".concat(s("reps")),dataIndex:"reps",width:"25%",render:(e,t,a)=>T===t.key?(0,j.jsx)(E,{ref:M,value:t.reps,onChange:e=>((e,t)=>{const s=i.map((s=>s.key===e?{...s,reps:t}:s));_(s)})(t.key,e),onBlur:()=>F(null)}):(0,j.jsx)("div",{className:I,children:(0,j.jsx)("div",{onClick:()=>F(t.key),className:D,children:t.reps||s("clickToEdit")})})}];return(0,j.jsxs)(j.Fragment,{children:[r,(0,j.jsx)(o.A,{style:{backgroundColor:"gray"}}),(0,j.jsx)("div",{className:N,children:(0,j.jsx)(v.t,{children:(null===t||void 0===t?void 0:t.name)||s("noExerciseSelected"),className:S})}),(0,j.jsx)(l.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",borderColor:"#535353"}}},children:t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(J,{bestResult:f,onSave:async e=>{if(H&&t){const r=(0,g.H9)((0,g.aU)(),"exercises",H.uid);try{const a=await(0,g.x7)(r);if(a.exists()){const s=a.data().exercises.map((s=>s.id===t.id?{...s,bestResult:e}:s));await(0,g.mZ)(r,{exercises:s}),w(e)}else n.open({type:"error",content:s("noExercisesFound")})}catch(a){n.open({type:"error",content:s("errorSavingBestResult")})}}}}),L?(0,j.jsxs)("div",{className:k,children:[s("workoutDate"),": ",(new Date).toLocaleDateString()]}):(0,j.jsxs)("div",{className:k,children:[s("workoutDate"),": ",U||". . ."]}),(0,j.jsx)(d.A,{rowKey:e=>e.key,columns:X,dataSource:i,pagination:!1,className:A,locale:{emptyText:(0,j.jsx)(y,{})}}),K&&(0,j.jsx)(C.U,{icon:(0,j.jsx)(u.A,{}),onClick:async()=>{if(!U||!t||!H)return;const e=(0,g.rJ)((0,g.aU)(),"sets"),a=(0,g.H9)(e,t.id);try{const e=await(0,g.x7)(a);if(e.exists()){const t=e.data().workouts||[],r=t.filter((e=>new Date(e.date).toLocaleString()!==U));if(r.length===t.length)return void n.open({type:"error",content:s("workoutNotFound")});await(0,g.mZ)(a,{workouts:r}),_([]),W(null),n.open({type:"success",content:s("workoutDeleted")})}else n.open({type:"error",content:s("errorDeletingWorkout")})}catch(r){n.open({type:"error",content:s("errorDeletingWorkout")})}},children:s("deleteWorkout")}),(0,j.jsx)(O,{selectedExercise:t,data:i,setData:_,setEditWeight:B,saveExerciseData:async()=>{if(H&&t){if(0===i.filter((e=>e.reps&&e.weight)).length)return void n.open({type:"error",content:s("noDataToSave")});const a=(0,g.rJ)((0,g.aU)(),"sets"),r=(0,g.H9)((0,g.aU)(),"exercises",H.uid);try{const e=(0,g.wP)((0,g.aU)()),c=(0,g.H9)(a,t.id),o=await(0,g.x7)(c),l=o.exists()?o.data():{workouts:[]},d={id:(0,m.A)(),date:(new Date).toISOString(),approaches:i.map(((e,t)=>({id:(0,m.A)(),set:t+1,reps:e.reps,weight:e.weight})))};l.workouts.push(d),e.set(c,l);const x=await(0,g.x7)(r);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(r,{exercises:s})}await e.commit(),q(!1),V(!1),n.open({type:"success",content:s("exerciseDataSaved")})}catch(e){n.open({type:"error",content:s("errorSavingExerciseData")})}}},onWorkoutDateChange:e=>{const t=new Date(e),s=t.toLocaleString();isNaN(t.getTime())?console.error("Invalid date:",e):W(s)},setCurrentWorkout:P,addRowBtn:Z,setAddRowBtn:q,saveBtn:z,setSaveBtn:V,setDeleteBtn:Y})]}):(0,j.jsx)(d.A,{columns:X,className:A,locale:{emptyText:(0,j.jsx)(y,{})}})})]})};var q=s(9868);const z="AddExercise_addExercise__7FNxa",V="AddExercise_button__mkO2c",K=e=>{let{onAddExercise:t,category:s}=e;const{t:n}=(0,p.Bd)(),[r,i]=c.Ay.useMessage(),[o,l]=(0,a.useState)("");return(0,j.jsxs)(j.Fragment,{children:[i,(0,j.jsx)(v.t,{children:n("addAnExercise")}),(0,j.jsxs)("div",{className:z,children:[(0,j.jsx)(q.w,{value:o,onChange:e=>l(e),text:n("exerciseName"),placeholder:n("typeExercise")}),(0,j.jsx)(R.S,{className:V,icon:(0,j.jsx)(b.A,{}),onClick:async()=>{if(o)try{const e=(0,h.xI)().currentUser;if(e){const a=e.uid,i={id:(0,m.A)(),name:o,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},c=(0,g.H9)((0,g.aU)(),"exercises",a),d=await(0,g.x7)(c);d.exists()?await(0,g.mZ)(c,{exercises:[...d.data().exercises,i]}):await(0,g.mZ)(c,{exercises:[i]}),r.open({type:"success",content:n("exerciseAdded")}),l(""),t()}}catch(e){r.open({type:"error",content:n("errorAddingExercise")})}else r.open({type:"error",content:n("typeExercise")})},children:n("addExerciseBtn")})]})]})};var Y=s(7261);const Q="Exercises_title__ThgWQ",G="Exercises_description__cykz7",X="Exercises_cards__+xw7k";var $=s(1882);const ee="CardOptions_options__F-aCP",te="CardOptions_star__tS7rd",se="CardOptions_active__E3ut+",ae="CardOptions_editExercise__JcxiY",ne=e=>{let{item:t,category:s,setData:n,setCurrentEditingId:r,setNewName:i,setEditMode:o}=e;const{t:l}=(0,p.Bd)(),[d,x]=c.Ay.useMessage(),[u,m]=(0,a.useState)(!1);return(0,j.jsxs)("div",{className:ee,children:[x,(0,j.jsx)(M.D,{icon:(0,j.jsx)($.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const a=(0,h.xI)().currentUser;if(a){const r=a.uid,i=(0,g.H9)((0,g.aU)(),"exercises",r),c=await(0,g.x7)(i);if(c.exists()){let a=c.data().exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,g.mZ)(i,{exercises:a});const r=l("categories.".concat(s)),o=a.filter((e=>l("categories.".concat(e.category))===r));n(o)}t?d.open({type:"success",content:l("removedFromFavorite")}):d.open({type:"success",content:l("addedToFavorite")}),m(!u)}}catch(a){d.open({type:"error",content:l("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:"".concat(te," ").concat(t.isFavorite?se:""),children:(0,j.jsx)("span",{children:l("favorite")})}),(0,j.jsx)(M.D,{icon:(0,j.jsx)(H.A,{}),onClick:e=>{var s,a;e.stopPropagation(),s=t.id,a=t.name,r(s),i(a),o(!0)},className:ae,children:(0,j.jsx)("span",{children:l("editName")})})]})};var re=s(2481),ie=s(5556);const ce="DeleteIcon_deleteIconContainer__IWqYi",oe="DeleteIcon_exerciseNumber__Q9Zs7",le="DeleteIcon_deleteIcon__ntbKM",de="DeleteIcon_confirm__0yMiT",xe="DeleteIcon_deleteSave__joWfR",ue=e=>{let{setLoading:t,setIsModalOpen:s,category:a,setData:n,isModalOpen:r,handleCancel:i,item:o,setConfirm:l}=e;const{t:d}=(0,p.Bd)(),[x,m]=c.Ay.useMessage();return(0,j.jsxs)(ie.j,{open:r,onCancel:e=>{i(e),s(!1)},footer:!1,children:[m,(0,j.jsx)("p",{className:de,children:d("confirmDeletingExercise")}),(0,j.jsx)("div",{className:xe,children:(0,j.jsx)(C.U,{children:d("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const r=(0,h.xI)().currentUser;if(r){const t=r.uid,s=(0,g.H9)((0,g.aU)(),"exercises",t),i=(0,g.H9)((0,g.aU)(),"sets",e),c=await(0,g.x7)(s);if(await(0,g.kd)(i),c.exists()){const t=c.data();let r=[];if(t&&t.exercises){r=t.exercises.filter((t=>t.id!==e)),await(0,g.mZ)(s,{exercises:r});const i=r.filter((e=>d("categories.".concat(e.category))===d("categories.".concat(a))));n(i),localStorage.setItem("exercisesData",JSON.stringify(i))}}x.open({type:"success",content:d("exerciseDeleted")})}l(!1),s(!1),t(!1)}catch(r){x.open({type:"error",content:d("errorDeletingExercise")})}})(o.id)},icon:(0,j.jsx)(u.A,{})})})]})},pe=e=>{let{setLoading:t,setIsModalOpen:s,category:n,setData:r,isModalOpen:i,handleCancel:c,item:o,index:l}=e;const{t:d}=(0,p.Bd)(),[u,h]=(0,a.useState)(!1);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:ce,children:[(0,j.jsxs)("div",{className:oe,children:[l+1,"."]}),(0,j.jsx)(re.A,{title:d("deleteExercise"),children:(0,j.jsx)(x.A,{className:le,onClick:e=>{e.stopPropagation(),h(!0),s(!0)}})})]}),u&&(0,j.jsx)(ue,{setLoading:t,category:n,setData:r,isModalOpen:i,setIsModalOpen:s,handleCancel:c,item:o,setConfirm:h})]})},he="EditInput_editInput__CnmRa",ge=e=>{let{newName:t,editMode:s,currentEditingId:n,setCurrentEditingId:r,category:i,setData:o,setEditMode:l,setNewName:d}=e;const{t:x}=(0,p.Bd)(),[u,m]=c.Ay.useMessage(),v=(0,a.useRef)(null);(0,a.useEffect)((()=>{s&&v.current&&v.current.focus()}),[s]);const _=async(e,t)=>{try{const s=(0,g.aU)(),a=(0,h.xI)().currentUser;if(a){const n=a.uid,r=(0,g.H9)(s,"exercises",n),c=await(0,g.x7)(r);if(c.exists()){let s=c.data().exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,g.mZ)(r,{exercises:s});const a=s.filter((e=>x("categories.".concat(e.category))===x("categories.".concat(i)))).map((e=>({id:e.id,name:x(e.name),category:e.category,bestResult:"".concat(x("lastSet"),": ").concat(e.bestResult),isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(a)),o(a)}}}catch(s){u.open({type:"error",content:x("nameChangeFailed")})}};return(0,j.jsxs)(j.Fragment,{children:[m,(0,j.jsx)("input",{value:t,className:he,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n&&(_(n,t),l(!1),r(null))},onBlur:()=>{n&&(_(n,t),l(!1),r(null))},ref:v})]})},me="ExerciseCard_cardItem__2AKct",ve="ExerciseCard_active__7n1-4",_e="ExerciseCard_exerciseContainer__nXbmq",je="ExerciseCard_exerciseName__MCYS-",ye=e=>{let{item:t,onSelectExercise:s,category:n,setData:r,setLoading:i,activeCardId:c,setActiveCardId:o,index:l}=e;const[d,x]=(0,a.useState)(!1),[u,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(null),[m,v]=(0,a.useState)(!1);return(0,j.jsxs)("div",{className:"".concat(me," ").concat(c===t.id?ve:""),onClick:()=>(e=>{o(e.id),s(e)})(t),children:[(0,j.jsx)(pe,{setLoading:i,setIsModalOpen:x,category:n,setData:r,isModalOpen:d,handleCancel:e=>{e.stopPropagation(),x(!1)},item:t,index:l}),h===t.id&&m?(0,j.jsx)(ge,{newName:u,editMode:m,currentEditingId:h,setCurrentEditingId:g,category:n,setData:r,setEditMode:v,setNewName:p}):(0,j.jsx)("div",{className:_e,children:(0,j.jsx)("span",{className:je,children:t.name})}),(0,j.jsx)(ne,{item:t,category:n,setData:r,setCurrentEditingId:g,setNewName:p,setEditMode:v})]})},fe=e=>{let{category:t,updateTrigger:s,onSelectExercise:n}=e;const{t:r}=(0,p.Bd)(),[i,o]=c.Ay.useMessage(),[l,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),[m,_]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(d(e),u(!1))}),[t]),(0,a.useEffect)((()=>{(async()=>{u(!0);try{const e=(0,h.xI)().currentUser;if(e){const s=(0,g.H9)((0,g.aU)(),"exercises",e.uid),a=await(0,g.x7)(s);if(a.exists()){const e=a.data().exercises.filter((e=>r("categories.".concat(e.category))===r("categories.".concat(t)))).map((e=>({id:e.id,name:r(e.name),category:e.category,bestResult:e.bestResult,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(e)),d(e)}}u(!1)}catch(e){i.open({type:"error",content:r("errorFetchingExercises")})}})()}),[t,r,s]),(0,j.jsxs)(j.Fragment,{children:[o,x?(0,j.jsx)(Y.a,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v.t,{children:r("exercises"),className:Q}),(0,j.jsx)("div",{className:G,children:r("chooseExercise")}),(0,j.jsx)("div",{className:X,children:l.length?l.map(((e,s)=>(0,j.jsx)(ye,{item:e,onSelectExercise:n,category:t,setData:d,setLoading:u,activeCardId:m,setActiveCardId:_,index:s},e.id))):(0,j.jsx)(y,{})})]})]})},we=()=>{const e=(0,n.zy)().state,[t,s]=(0,a.useState)(0),[c,o]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,j.jsx)(i.f,{children:(0,j.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,j.jsx)(r.B,{text:e.title,textAlign:"center"}),(0,j.jsx)(K,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>s((e=>e+1))}),(0,j.jsx)(fe,{category:null===e||void 0===e?void 0:e.title,updateTrigger:t,onSelectExercise:e=>o(e)}),(0,j.jsx)(Z,{selectedExercise:c})]})})}}}]);
//# sourceMappingURL=265.63c6bf23.chunk.js.map