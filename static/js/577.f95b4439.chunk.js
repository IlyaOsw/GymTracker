"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[577],{9868:(e,t,s)=>{s.d(t,{w:()=>d});var a=s(4e3),r=s(5578),n=(s(5043),s(4117));const c="CustomInput_inputWrapper__wz8SN",i="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:h,onChange:p,value:g}=e;const{t:m}=(0,n.Bd)();return(0,l.jsx)("div",{className:c,children:(0,l.jsx)(a.A.Item,{label:(0,l.jsx)("span",{className:i,children:m(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(r.A,{type:d,placeholder:x,className:"".concat(o," ").concat(h),allowClear:!0,onChange:e=>{const{value:t}=e.target;p&&p(t)},value:g,autoComplete:"off"})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>c});var a=s(8732),r=s(2918),n=(s(5043),s(579));const c=e=>{let{open:t,onCancel:s,footer:c=null,children:i}=e;return(0,n.jsx)(a.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,n.jsx)(r.A,{open:t,onCancel:s,footer:c,style:{marginTop:"50px"},children:i})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var a=s(1984),r=s(4117),n=s(5459);const c={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var i=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,r.Bd)(),{ref:d,controls:x}=(0,n.F)();return(0,i.jsx)(a.P.h2,{ref:d,className:"".concat(c.descriptionTitle," ").concat(c[s]," ").concat(o),initial:"hidden",animate:x,variants:n.l,children:l(t)})}},9752:(e,t,s)=>{s.d(t,{f:()=>n});s(5043);var a=s(579);const r={maxWidth:"1200px",margin:"0 auto"},n=e=>{let{children:t}=e;return(0,a.jsx)("div",{style:r,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>c});s(5043);var a=s(7021);const r="ResetButton_reset__efwrw";var n=s(579);const c=e=>{let{onClick:t,children:s,icon:c}=e;return(0,n.jsx)(a.Ay,{className:r,onClick:t,icon:c,children:s})}},8204:(e,t,s)=>{s.d(t,{D:()=>c});var a=s(7021);s(5043);const r="SettingButton_btn__TNlVz";var n=s(579);const c=e=>{let{onClick:t,icon:s,children:c,className:i}=e;return(0,n.jsx)(a.Ay,{onClick:t,icon:s,className:"".concat(r," ").concat(i),children:c})}},9589:(e,t,s)=>{s.d(t,{t:()=>i});s(5043);var a=s(1984),r=s(5459);const n="SubTitle_subTitle__6A8PN";var c=s(579);const i=e=>{let{children:t,className:s}=e;const{ref:i,controls:o}=(0,r.F)();return(0,c.jsx)(a.P.p,{ref:i,className:"".concat(n," ").concat(s),initial:"hidden",animate:o,variants:r.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>c,l:()=>i});var a=s(9927),r=s(5246),n=s(5043);const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const c=(0,a.s)(),[i,o]=(0,r.Wx)({threshold:e,triggerOnce:t});return(0,n.useEffect)((()=>{o?c.start("visible"):c.start("hidden")}),[c,o]),{ref:i,controls:c,animationVariants:s}},i={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},1577:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ie});var a=s(5043),r=s(3216),n=s(1499),c=s(9752),i=s(2019),o=s(8354),l=s(8732),d=s(5743),x=s(3727),u=s(4117),h=s(8895),p=s(6032),g=s(1238),m=s(9589),v=s(9472),_=s(579);const j=()=>{const{t:e}=(0,u.Bd)();return(0,_.jsx)(v.A,{image:v.A.PRESENTED_IMAGE_SIMPLE,description:(0,_.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})},y="NumericInput_input__1SATw",f=(e,t)=>{let{value:s,onChange:a,onBlur:r}=e;return(0,_.jsx)("input",{ref:t,value:s,onChange:e=>{let t=e.target.value;t=t.replace(",","."),t.length>1&&t.startsWith("0")&&!t.startsWith("0.")&&(t=t.substring(1)),/^\d*\.?\d*$/.test(t)&&a(t)},onBlur:r,className:y,type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"})},w=(0,a.forwardRef)(f),E=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),C="ExerciseTable_tableTitle__nWHV1",S="ExerciseTable_subtitle__dWB0y",k="ExerciseTable_dateAndDelete__Rghoq",N="ExerciseTable_table__gqYvK",A="ExerciseTable_editableDiv__lnIPx",D="ExerciseTable_repsAndDelete__sJi7S";var I=s(5337),b=s(3390),B=s(682),R=s(9905),T=s(3963),F=s(8204);const M="TableFooter_tableFooter__Vdj4o",U="TableFooter_saveBtn__CLumP",W=e=>{let{selectedExercise:t,data:s,setData:r,setEditWeight:n,saveExerciseData:c,onWorkoutDateChange:i,setCurrentWorkout:o,addRowBtn:l,setAddRowBtn:d,saveBtn:h,setSaveBtn:g,setDeleteBtn:m}=e;const{t:v}=(0,u.Bd)(),[j,y]=(0,a.useState)([]),[f,w]=(0,a.useState)([]),[E,C]=(0,a.useState)(-1),[S,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{k(!1),(async()=>{if(t){const s=(0,p.rJ)((0,p.aU)(),"sets"),a=(0,p.H9)(s,t.id);try{const e=await(0,p.x7)(a);if(e.exists()){const t=e.data(),s=(null===t||void 0===t?void 0:t.workouts)||[];if(Array.isArray(s)&&s.every((e=>Array.isArray(e.approaches)))){y(s.map((e=>e.approaches||[]))),w(s.map((e=>e.date)));const e=s.length-1;C(e),i(s[e].date)}else console.error("Workouts data format is incorrect.")}}catch(e){console.error("Error loading workouts:",e)}}})()}),[t]);const N=E===j.length-1;return(0,_.jsxs)(_.Fragment,{children:[l&&(0,_.jsx)(F.D,{onClick:()=>{if(!t)return;const e=[...s],a=e.length>0?e[e.length-1].set+1:1,c={key:a.toString(),weight:"",set:a,reps:"",icon:(0,_.jsx)(x.A,{})};e.push(c),r(e),n(c.key)},icon:(0,_.jsx)(I.A,{}),children:v("addRow")}),h&&(0,_.jsx)("div",{className:U,children:(0,_.jsx)(T.S,{onClick:c,icon:(0,_.jsx)(b.A,{}),children:v("saveTraining")})}),(0,_.jsxs)("div",{className:M,children:[!S&&E>0?(0,_.jsx)(T.S,{onClick:()=>{if(E>0){const e=E-1;C(e),r(j[e]||[]),i(f[e])}},icon:(0,_.jsx)(B.A,{}),children:v("previous")}):(0,_.jsx)("div",{}),!S&&!N&&(0,_.jsx)(T.S,{onClick:()=>{if(E<j.length-1){const e=E+1;C(e),r(j[e]||[]),i(f[e])}},icon:(0,_.jsx)(R.A,{}),children:v("next")}),!S&&N&&(0,_.jsxs)(T.S,{onClick:()=>{r([]),d(!0),g(!0),k(!0),o(!0),m(!1)},children:[v("newEntry"),(0,_.jsx)(R.A,{})]})]})]})};var O=s(7407),H=s(7326);const P="BestResult_collapse__pQyb-",L="BestResult_title__jsqEH",J="BestResult_wrapper__1-LYV",q="BestResult_editBtn__8ELAU",V=e=>{let{bestResult:t,selectedExercise:s,setBestResult:r}=e;const{t:n}=(0,u.Bd)(),c=(0,h.xI)().currentUser,[o,l]=i.Ay.useMessage(),[d,x]=(0,a.useState)(!1),[g,m]=(0,a.useState)((null===t||void 0===t?void 0:t.weight)||"0"),[v,j]=(0,a.useState)((null===t||void 0===t?void 0:t.reps)||"0");(0,a.useEffect)((()=>{m((null===t||void 0===t?void 0:t.weight)||"0"),j((null===t||void 0===t?void 0:t.reps)||"0")}),[t]);const y=()=>{(async e=>{if(c&&s){const a=(0,p.H9)((0,p.aU)(),"exercises",c.uid);try{const t=await(0,p.x7)(a);if(t.exists()){const n=t.data().exercises.map((t=>t.id===s.id?{...t,bestResult:e}:t));await(0,p.mZ)(a,{exercises:n}),r(e)}else o.open({type:"error",content:n("noExercisesFound")})}catch(t){o.open({type:"error",content:n("errorSavingBestResult")})}}})({weight:g,reps:v}),x(!1),o.open({type:"success",content:n("recordUpdated")})},f=[{key:"1",label:(0,_.jsx)("div",{className:L,children:n("bestExerciseResult")}),children:(0,_.jsx)(_.Fragment,{children:d?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:J,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(w,{value:g,onChange:m,onBlur:y}),(0,_.jsx)("span",{children:n("kg")})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)(w,{value:v,onChange:j,onBlur:y}),(0,_.jsx)("span",{children:n("bestResultReps")})]})]}),(0,_.jsx)("div",{className:q,children:(0,_.jsx)(F.D,{icon:(0,_.jsx)(b.A,{}),onClick:y,children:(0,_.jsx)("span",{children:n("saveRecord")})})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:J,children:[(0,_.jsxs)("div",{children:[g," ",n("kg")]}),(0,_.jsxs)("div",{children:[v," ",n("bestResultReps")]})]}),(0,_.jsx)("div",{className:q,children:(0,_.jsx)(F.D,{icon:(0,_.jsx)(O.A,{}),onClick:()=>x(!0),children:(0,_.jsx)("span",{children:n("updateRecord")})})})]})}),extra:(0,_.jsx)("img",{src:"/GymTracker/assets/Icons/AdditionalIcons/trophy.png"})}];return(0,_.jsxs)("div",{className:P,children:[l,(0,_.jsx)(H.A,{size:"large",items:f,bordered:!1})]})};var Z=s(1966),z=s(9525),Y=s(5556);const K="DeleteWorkout_deleteWorkout__T7qoY",Q="DeleteWorkout_confirm__yTni8",G="DeleteWorkout_deleteBtn__u1SVc",X=e=>{let{workoutDate:t,selectedExercise:s,setData:r,setWorkoutDate:n,setSelectedExercise:c,setActiveCardId:o}=e;const{t:l}=(0,u.Bd)(),d=(0,h.xI)().currentUser,[x,g]=i.Ay.useMessage(),[m,v]=(0,a.useState)(!1),j=async()=>{if(v(!0),!t||!s||!d)return;const e=(0,p.rJ)((0,p.aU)(),"sets"),a=(0,p.H9)(e,s.id);try{const e=await(0,p.x7)(a);if(e.exists()){const s=e.data(),i=(s.workouts||[]).filter((e=>new Date(e.date).toLocaleString()!==t));await(0,p.mZ)(a,{workouts:i}),r([]),n(null),v(!1),c(null),setTimeout((()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}),100),o(null),x.open({type:"success",content:l("workoutDeleted")})}}catch(i){x.open({type:"error",content:l("errorDeletingWorkout")})}};return(0,_.jsxs)(_.Fragment,{children:[g,(0,_.jsx)("div",{className:K,children:(0,_.jsx)(z.U,{icon:(0,_.jsx)(Z.A,{}),onClick:()=>{t&&s?v(!0):x.open({type:"error",content:l("noDataToDelete")})},children:l("deleteWorkout")})}),(0,_.jsxs)(Y.j,{open:m,onCancel:e=>{v(!1)},footer:!1,children:[(0,_.jsx)("p",{className:Q,children:l("confirmDeletingWorkout")}),(0,_.jsx)("div",{className:G,children:(0,_.jsx)(z.U,{children:l("delete"),onClick:e=>{e.stopPropagation(),j()},icon:(0,_.jsx)(Z.A,{})})})]})]})},$=e=>{let{selectedExercise:t,setSelectedExercise:s,setActiveCardId:r}=e;const{t:n}=(0,u.Bd)(),[c,v]=i.Ay.useMessage(),[y,f]=(0,a.useState)([]),[I,b]=(0,a.useState)(null),[B,R]=(0,a.useState)(null),[T,F]=(0,a.useState)(null),[M,U]=(0,a.useState)(null),[O,H]=(0,a.useState)(!1),[P,L]=(0,a.useState)(!1),[J,q]=(0,a.useState)(!1),[Z,z]=(0,a.useState)(!0),Y=(0,a.useRef)(null),K=(0,a.useRef)(null),Q=(0,h.xI)().currentUser;(0,a.useEffect)((()=>{t?G():f([])}),[t]),(0,a.useEffect)((()=>{T&&K.current&&K.current.focus(),B&&Y.current&&Y.current.focus()}),[T,B]);const G=async()=>{if(Q&&t){const s=(0,p.rJ)((0,p.aU)(),"sets"),a=(0,p.H9)(s,t.id),r=(0,p.H9)((0,p.aU)(),"exercises",Q.uid);try{const[e,s]=await Promise.all([(0,p.x7)(a),(0,p.x7)(r)]);if(e.exists()){const a=e.data(),r=(null===a||void 0===a?void 0:a.workouts)||[];if(r.length>0){const e=r[r.length-1],t=new Date(e.date).toLocaleString();U(t);const s=(e.approaches||[]).map((e=>({key:e.id,set:e.set,weight:e.weight,reps:e.reps,icon:(0,_.jsx)(x.A,{})})));f(s),E()}else f([]),U(null),E();if(s.exists()){const e=s.data().exercises.find((e=>e.id===t.id));e&&b(e.bestResult)}L(!0),q(!0),z(!0)}else f([]),U(null),E(),z(!1);L(!1),q(!1)}catch(e){alert(e)}}},$=[{title:"".concat(n("set")),dataIndex:"set",width:"20%"},{title:"".concat(n("weight")),dataIndex:"weight",width:"30%",render:(e,t)=>B===t.key?(0,_.jsx)(w,{ref:Y,value:t.weight,onChange:e=>((e,t)=>{const s=y.map((s=>s.key===e?{...s,weight:t}:s));f(s)})(t.key,e),onBlur:()=>R(null)}):(0,_.jsx)("div",{onClick:()=>R(t.key),className:A,children:t.weight||n("clickToEdit")})},{title:"".concat(n("reps")),dataIndex:"reps",width:"25%",render:(e,t,s)=>T===t.key?(0,_.jsx)(w,{ref:K,value:t.reps,onChange:e=>((e,t)=>{const s=y.map((s=>s.key===e?{...s,reps:t}:s));f(s)})(t.key,e),onBlur:()=>F(null)}):(0,_.jsx)("div",{className:D,children:(0,_.jsx)("div",{onClick:()=>F(t.key),className:A,children:t.reps||n("clickToEdit")})})}];return(0,_.jsxs)(_.Fragment,{children:[v,(0,_.jsx)(o.A,{style:{backgroundColor:"gray"}}),(0,_.jsx)("div",{className:C,children:(0,_.jsx)(m.t,{children:(null===t||void 0===t?void 0:t.name)||n("noExerciseSelected"),className:S})}),(0,_.jsx)(l.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",borderColor:"#535353",cellPaddingBlock:14}}},children:t?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(V,{bestResult:I,selectedExercise:t,setBestResult:b}),O?(0,_.jsxs)("div",{className:k,children:[n("workoutDate"),": ",(new Date).toLocaleDateString()]}):(0,_.jsxs)("div",{className:k,children:[n("workoutDate"),": ",M||". . ."]}),(0,_.jsx)(d.A,{rowKey:e=>e.key,columns:$,dataSource:y,pagination:!1,className:N,locale:{emptyText:(0,_.jsx)(j,{})}}),(0,_.jsx)(W,{selectedExercise:t,data:y,setData:f,setEditWeight:R,saveExerciseData:async()=>{if(Q&&t){const s=y.filter((e=>Number(e.reps)>0&&Number(e.weight)>0));if(0===s.length)return void c.open({type:"error",content:n("noDataToSave")});const a=(0,p.rJ)((0,p.aU)(),"sets"),r=(0,p.H9)((0,p.aU)(),"exercises",Q.uid);try{const e=(0,p.wP)((0,p.aU)()),i=(0,p.H9)(a,t.id),o=await(0,p.x7)(i),l=o.exists()?o.data():{workouts:[]},d={id:(0,g.A)(),date:(new Date).toISOString(),approaches:s.map(((e,t)=>({id:(0,g.A)(),set:t+1,reps:e.reps,weight:e.weight})))};l.workouts.push(d),e.set(i,l);const x=await(0,p.x7)(r);if(x.exists()){const s=x.data().exercises.map((e=>e.id===t.id?{...e}:e));e.update(r,{exercises:s})}await e.commit(),L(!1),q(!1),c.open({type:"success",content:n("exerciseDataSaved")})}catch(e){c.open({type:"error",content:n("errorSavingExerciseData")})}}},onWorkoutDateChange:e=>{const t=new Date(e),s=t.toLocaleString();isNaN(t.getTime())?console.error("Invalid date:",e):U(s)},setCurrentWorkout:H,addRowBtn:P,setAddRowBtn:L,saveBtn:J,setSaveBtn:q,setDeleteBtn:z}),Z&&(0,_.jsx)(X,{workoutDate:M,selectedExercise:t,setData:f,setWorkoutDate:U,setSelectedExercise:s,setActiveCardId:r})]}):(0,_.jsx)(d.A,{columns:$,className:N,locale:{emptyText:(0,_.jsx)(j,{})}})})]})};var ee=s(9868);const te="AddExercise_addExercise__7FNxa",se="AddExercise_button__mkO2c",ae=e=>{let{onAddExercise:t,category:s}=e;const{t:r}=(0,u.Bd)(),[n,c]=i.Ay.useMessage(),[o,l]=(0,a.useState)("");return(0,_.jsxs)(_.Fragment,{children:[c,(0,_.jsx)(m.t,{children:r("addAnExercise")}),(0,_.jsxs)("div",{className:te,children:[(0,_.jsx)(ee.w,{value:o,onChange:e=>l(e),text:r("exerciseName"),placeholder:r("typeExercise")}),(0,_.jsx)(T.S,{className:se,icon:(0,_.jsx)(I.A,{}),onClick:async()=>{if(o)try{const e=(0,h.xI)().currentUser;if(e){const a=e.uid,c={id:(0,g.A)(),name:o,category:s,bestResult:{weight:"0",reps:"0"},isFavorite:!1},i=(0,p.H9)((0,p.aU)(),"exercises",a),d=await(0,p.x7)(i);d.exists()?await(0,p.mZ)(i,{exercises:[...d.data().exercises,c]}):await(0,p.mZ)(i,{exercises:[c]}),n.open({type:"success",content:r("exerciseAdded")}),l(""),t()}}catch(e){n.open({type:"error",content:r("errorAddingExercise")})}else n.open({type:"error",content:r("typeExercise")})},children:r("addExerciseBtn")})]})]})};var re=s(7261);const ne="Exercises_title__ThgWQ",ce="Exercises_description__cykz7",ie="Exercises_cards__+xw7k";var oe=s(1882);const le="CardOptions_options__F-aCP",de="CardOptions_star__tS7rd",xe="CardOptions_active__E3ut+",ue="CardOptions_editExercise__JcxiY",he=e=>{let{item:t,category:s,setData:r,setCurrentEditingId:n,setNewName:c,setEditMode:o}=e;const{t:l}=(0,u.Bd)(),[d,x]=i.Ay.useMessage(),[g,m]=(0,a.useState)(!1);return(0,_.jsxs)("div",{className:le,children:[x,(0,_.jsx)(F.D,{icon:(0,_.jsx)(oe.A,{}),onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const a=(0,h.xI)().currentUser;if(a){const n=a.uid,c=(0,p.H9)((0,p.aU)(),"exercises",n),i=await(0,p.x7)(c);if(i.exists()){const a=i.data(),n=a.exercises.filter((e=>e.isFavorite)).length;if(!t&&n>=3)return void d.open({type:"error",content:l("maxFavoritesReached")});let o=a.exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,p.mZ)(c,{exercises:o});const x=l("categories.".concat(s)),u=o.filter((e=>l("categories.".concat(e.category))===x));r(u)}t?d.open({type:"success",content:l("removedFromFavorite")}):d.open({type:"success",content:l("addedToFavorite")}),m(!g)}}catch(a){d.open({type:"error",content:l("errorUpdatingFavorite")})}})(t.id,t.isFavorite)},className:"".concat(de," ").concat(t.isFavorite?xe:""),children:(0,_.jsx)("span",{children:l("favorite")})}),(0,_.jsx)(F.D,{icon:(0,_.jsx)(O.A,{}),onClick:e=>{var s,a;e.stopPropagation(),s=t.id,a=t.name,n(s),c(a),o(!0)},className:ue,children:(0,_.jsx)("span",{children:l("editName")})})]})};var pe=s(2481);const ge="DeleteIcon_deleteIconContainer__IWqYi",me="DeleteIcon_exerciseNumber__Q9Zs7",ve="DeleteIcon_deleteIcon__ntbKM",_e="DeleteIcon_confirm__0yMiT",je="DeleteIcon_deleteSave__joWfR",ye=e=>{let{setLoading:t,setIsModalOpen:s,category:a,setData:r,isModalOpen:n,handleCancel:c,item:o,setConfirm:l}=e;const{t:d}=(0,u.Bd)(),[x,g]=i.Ay.useMessage();return(0,_.jsxs)(Y.j,{open:n,onCancel:e=>{c(e),s(!1)},footer:!1,children:[g,(0,_.jsx)("p",{className:_e,children:d("confirmDeletingExercise")}),(0,_.jsx)("div",{className:je,children:(0,_.jsx)(z.U,{children:d("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const n=(0,h.xI)().currentUser;if(n){const t=n.uid,s=(0,p.H9)((0,p.aU)(),"exercises",t),c=(0,p.H9)((0,p.aU)(),"sets",e),i=await(0,p.x7)(s);if(await(0,p.kd)(c),i.exists()){const t=i.data();let n=[];if(t&&t.exercises){n=t.exercises.filter((t=>t.id!==e)),await(0,p.mZ)(s,{exercises:n});const c=n.filter((e=>d("categories.".concat(e.category))===d("categories.".concat(a))));r(c),localStorage.setItem("exercisesData",JSON.stringify(c))}}x.open({type:"success",content:d("exerciseDeleted")})}l(!1),s(!1),t(!1)}catch(n){x.open({type:"error",content:d("errorDeletingExercise")})}})(o.id)},icon:(0,_.jsx)(Z.A,{})})})]})},fe=e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:n,isModalOpen:c,handleCancel:i,item:o,index:l}=e;const{t:d}=(0,u.Bd)(),[h,p]=(0,a.useState)(!1);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:ge,children:[(0,_.jsxs)("div",{className:me,children:[l+1,"."]}),(0,_.jsx)(pe.A,{title:d("deleteExercise"),children:(0,_.jsx)(x.A,{className:ve,onClick:e=>{e.stopPropagation(),p(!0),s(!0)}})})]}),h&&(0,_.jsx)(ye,{setLoading:t,category:r,setData:n,isModalOpen:c,setIsModalOpen:s,handleCancel:i,item:o,setConfirm:p})]})},we="EditInput_editInput__CnmRa",Ee=e=>{let{newName:t,editMode:s,currentEditingId:r,setCurrentEditingId:n,category:c,setData:o,setEditMode:l,setNewName:d}=e;const{t:x}=(0,u.Bd)(),[g,m]=i.Ay.useMessage(),v=(0,a.useRef)(null);(0,a.useEffect)((()=>{s&&v.current&&v.current.focus()}),[s]);const j=async(e,t)=>{try{const s=(0,p.aU)(),a=(0,h.xI)().currentUser;if(a){const r=a.uid,n=(0,p.H9)(s,"exercises",r),i=await(0,p.x7)(n);if(i.exists()){let s=i.data().exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,p.mZ)(n,{exercises:s});const a=s.filter((e=>x("categories.".concat(e.category))===x("categories.".concat(c)))).map((e=>({id:e.id,name:x(e.name),category:e.category,bestResult:"".concat(x("lastSet"),": ").concat(e.bestResult),isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(a)),o(a)}}}catch(s){g.open({type:"error",content:x("nameChangeFailed")})}};return(0,_.jsxs)(_.Fragment,{children:[m,(0,_.jsx)("input",{value:t,className:we,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&r&&(j(r,t),l(!1),n(null))},onBlur:()=>{r&&(j(r,t),l(!1),n(null))},ref:v})]})},Ce="ExerciseCard_cardItem__2AKct",Se="ExerciseCard_active__7n1-4",ke="ExerciseCard_exerciseContainer__nXbmq",Ne="ExerciseCard_exerciseName__MCYS-",Ae=e=>{let{item:t,onSelectExercise:s,category:r,setData:n,setLoading:c,activeCardId:i,setActiveCardId:o,index:l,exercisesRef:d}=e;const[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[g,m]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1);return(0,_.jsxs)("div",{className:"".concat(Ce," ").concat(i===t.id?Se:""),onClick:()=>(e=>{o(e.id),s(e)})(t),ref:d,children:[(0,_.jsx)(fe,{setLoading:c,setIsModalOpen:u,category:r,setData:n,isModalOpen:x,handleCancel:e=>{e.stopPropagation(),u(!1)},item:t,index:l}),g===t.id&&v?(0,_.jsx)(Ee,{newName:h,editMode:v,currentEditingId:g,setCurrentEditingId:m,category:r,setData:n,setEditMode:j,setNewName:p}):(0,_.jsx)("div",{className:ke,children:(0,_.jsx)("span",{className:Ne,children:t.name})}),(0,_.jsx)(he,{item:t,category:r,setData:n,setCurrentEditingId:m,setNewName:p,setEditMode:j})]})},De=e=>{let{category:t,updateTrigger:s,onSelectExercise:r,exercisesRef:n,activeCardId:c,setActiveCardId:o}=e;const{t:l}=(0,u.Bd)(),[d,x]=i.Ay.useMessage(),[g,v]=(0,a.useState)([]),[y,f]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(v(e),f(!1))}),[t]),(0,a.useEffect)((()=>{(async()=>{f(!0);try{const e=(0,h.xI)().currentUser;if(e){const s=(0,p.H9)((0,p.aU)(),"exercises",e.uid),a=await(0,p.x7)(s);if(a.exists()){const e=a.data().exercises.filter((e=>l("categories.".concat(e.category))===l("categories.".concat(t)))).map((e=>({id:e.id,name:l(e.name),category:e.category,bestResult:e.bestResult,isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(e)),v(e)}}f(!1)}catch(e){d.open({type:"error",content:l("errorFetchingExercises")})}})()}),[t,l,s]),(0,_.jsxs)(_.Fragment,{children:[x,y?(0,_.jsx)(re.a,{}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.t,{children:l("exercises"),className:ne}),(0,_.jsx)("div",{className:ce,children:l("chooseExercise")}),(0,_.jsx)("div",{className:ie,children:g.length?g.map(((e,s)=>(0,_.jsx)(Ae,{item:e,onSelectExercise:r,category:t,setData:v,setLoading:f,activeCardId:c,setActiveCardId:o,index:s,exercisesRef:n},e.id))):(0,_.jsx)(j,{})})]})]})},Ie=()=>{const e=(0,r.zy)().state,[t,s]=(0,a.useState)(0),[i,o]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),x=(0,a.useRef)(null);(0,a.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,_.jsx)(c.f,{children:(0,_.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,_.jsx)(n.B,{text:e.title,textAlign:"center"}),(0,_.jsx)(ae,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>{s((e=>e+1)),x.current&&x.current.scrollIntoView({behavior:"smooth"})}}),(0,_.jsx)(De,{category:null===e||void 0===e?void 0:e.title,updateTrigger:t,onSelectExercise:e=>o(e),exercisesRef:x,activeCardId:l,setActiveCardId:d}),(0,_.jsx)($,{selectedExercise:i,setSelectedExercise:o,setActiveCardId:d})]})})}}}]);
//# sourceMappingURL=577.f95b4439.chunk.js.map