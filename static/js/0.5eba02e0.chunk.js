"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[0],{9868:(e,t,s)=>{s.d(t,{w:()=>d});var a=s(4e3),r=s(5578),c=(s(5043),s(4117));const i="CustomInput_inputWrapper__wz8SN",n="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:g,onChange:h,value:m}=e;const{t:f}=(0,c.Bd)();return(0,l.jsx)("div",{className:i,children:(0,l.jsx)(a.A.Item,{label:(0,l.jsx)("span",{className:n,children:f(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(r.A,{type:d,placeholder:x,className:"".concat(o," ").concat(g),allowClear:!0,onChange:e=>{const{value:t}=e.target;h&&h(t)},value:m})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>i});var a=s(8732),r=s(2918),c=(s(5043),s(579));const i=e=>{let{open:t,onCancel:s,footer:i=null,children:n}=e;return(0,c.jsx)(a.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,c.jsx)(r.A,{open:t,onCancel:s,footer:i,style:{marginTop:"50px"},children:n})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var a=s(1984),r=s(4117),c=s(5459);const i={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var n=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,r.Bd)(),{ref:d,controls:x}=(0,c.F)();return(0,n.jsx)(a.P.h2,{ref:d,className:"".concat(i.descriptionTitle," ").concat(i[s]," ").concat(o),initial:"hidden",animate:x,variants:c.l,children:l(t)})}},9752:(e,t,s)=>{s.d(t,{f:()=>c});s(5043);var a=s(579);const r={maxWidth:"1200px",margin:"0 auto"},c=e=>{let{children:t}=e;return(0,a.jsx)("div",{style:r,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>i});s(5043);var a=s(7021);const r="ResetButton_reset__efwrw";var c=s(579);const i=e=>{let{onClick:t,children:s,icon:i}=e;return(0,c.jsx)(a.Ay,{className:r,onClick:t,icon:i,children:s})}},9589:(e,t,s)=>{s.d(t,{t:()=>n});s(5043);var a=s(1984),r=s(5459);const c="SubTitle_subTitle__6A8PN";var i=s(579);const n=e=>{let{children:t,className:s}=e;const{ref:n,controls:o}=(0,r.F)();return(0,i.jsx)(a.P.p,{ref:n,className:"".concat(c," ").concat(s),initial:"hidden",animate:o,variants:r.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>i,l:()=>n});var a=s(9927),r=s(5246),c=s(5043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const i=(0,a.s)(),[n,o]=(0,r.Wx)({threshold:e,triggerOnce:t});return(0,c.useEffect)((()=>{o?i.start("visible"):i.start("hidden")}),[i,o]),{ref:n,controls:i,animationVariants:s}},n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},8e3:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ce});var a=s(5043),r=s(3216),c=s(1499),i=s(9752),n=s(2019),o=s(2481),l=s(8354),d=s(8732),x=s(5743),u=s(9472),g=s(3727),h=s(5337),m=s(682),f=s(3390),p=s(4117),y=s(8895),_=s(6032),v=s(3963),j=s(9589);const E={tableTitle:"ExerciseTable_tableTitle__nWHV1",date:"ExerciseTable_date__+kHp7",table:"ExerciseTable_table__gqYvK",editableDiv:"ExerciseTable_editableDiv__lnIPx",repsAndDelete:"ExerciseTable_repsAndDelete__sJi7S",tableFooter:"ExerciseTable_tableFooter__8lrF-"},A="NumericInput_input__GI+NF";var C=s(579);const S=(e,t)=>{let{value:s,onChange:a,onBlur:r}=e;return(0,C.jsx)("input",{ref:t,value:s,onChange:e=>{const t=e.target.value;/^\d*\.?\d?$/.test(t)&&a(t)},onBlur:r,className:A,type:"number"})},N=(0,a.forwardRef)(S),w=e=>{let{selectedExercise:t}=e;const{t:s}=(0,p.Bd)(),[r,c]=(0,a.useState)([]),[i,A]=(0,a.useState)(null),[S,w]=(0,a.useState)(null),I=(0,a.useRef)(null),D=(0,a.useRef)(null);(0,a.useEffect)((()=>{t?k():c([])}),[t]),(0,a.useEffect)((()=>{i&&I.current&&I.current.focus()}),[i]),(0,a.useEffect)((()=>{S&&D.current&&D.current.focus()}),[S]);const b=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),k=async()=>{if(!t)return;if((0,y.xI)().currentUser){const a=(0,_.aU)(),r=(0,_.rJ)(a,"sets"),i=(0,_.H9)(r,t.id);try{const e=await(0,_.x7)(i);if(e.exists()){const t=e.data(),s=(t.approaches||[]).map(((e,t)=>({key:t.toString(),set:t+1,weight:e.weight.toString(),reps:e.reps.toString(),icon:(0,C.jsx)(g.A,{})})));c(s),b()}else c([]),b()}catch(e){n.Ay.error(s("errorLoadingExerciseData"))}}},T=[{title:"".concat(s("set")),dataIndex:"set",width:"30%"},{title:"".concat(s("weight")),dataIndex:"weight",width:"30%",render:(e,t)=>i===t.key?(0,C.jsx)(N,{ref:I,value:t.weight,onChange:e=>((e,t)=>{const s=r.map((s=>s.key===e?{...s,weight:t}:s));c(s)})(t.key,e),onBlur:()=>A(null)}):(0,C.jsx)("div",{onClick:()=>A(t.key),className:E.editableDiv,children:t.weight||s("clickToEdit")})},{title:"".concat(s("reps")),dataIndex:"reps",width:"30%",render:(e,a)=>S===a.key?(0,C.jsx)(N,{ref:D,value:a.reps,onChange:e=>((e,t)=>{const s=r.map((s=>s.key===e?{...s,reps:t}:s));c(s)})(a.key,e),onBlur:()=>w(null)}):(0,C.jsxs)("div",{className:E.repsAndDelete,children:[(0,C.jsx)("div",{onClick:()=>w(a.key),className:E.editableDiv,children:a.reps||s("clickToEdit")}),(0,C.jsx)("div",{className:E.deledeContainer,children:(0,C.jsx)(o.A,{title:s("deleteRow"),children:(0,C.jsx)(g.A,{onClick:()=>(async e=>{if(t)try{const a=(0,_.aU)(),r=t.id,c=(0,_.H9)(a,"sets",r),i=await(0,_.x7)(c);if(!i.exists())throw new Error("".concat(r," does not exist"));const{approaches:o}=i.data(),l=o.findIndex((t=>t.key===e));o.splice(l,1),await(0,_.mZ)(c,{approaches:o}),n.Ay.success(s("exerciseDataDeletedSuccessfully"))}catch(a){n.Ay.error(s("failedToDeleteExerciseData"))}finally{k()}})(a.key)})})})]})}];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.A,{style:{backgroundColor:"gray"}}),(0,C.jsxs)("div",{className:E.tableTitle,children:[(0,C.jsx)(j.t,{children:t?t.name:s("noExerciseSelected")}),(0,C.jsxs)("div",{className:E.date,children:[s("date"),(new Date).toLocaleDateString()]})]}),t?(0,C.jsxs)(d.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",colorPrimary:"#ffffff",borderColor:"#535353",headerSplitColor:"#535353"}}},children:[(0,C.jsx)(x.A,{columns:T,dataSource:r,pagination:!1,className:E.table,locale:{emptyText:(0,C.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,C.jsx)("span",{style:{color:"#ffffff"},children:s("noData")})})}}),(0,C.jsx)(v.S,{onClick:()=>{if(!t)return;const e=[...r],s=e.length>0?e[e.length-1].set+1:1,a={key:s.toString(),weight:"",set:s,reps:"",icon:(0,C.jsx)(g.A,{})};e.push(a),c(e),A(a.key)},icon:(0,C.jsx)(h.A,{}),children:s("addRow")}),(0,C.jsxs)("div",{className:E.tableFooter,children:[(0,C.jsx)(v.S,{icon:(0,C.jsx)(m.A,{}),children:s("previous")}),(0,C.jsx)(v.S,{icon:(0,C.jsx)(f.A,{}),onClick:async()=>{if((0,y.xI)().currentUser){const a=(0,_.aU)(),c=(0,_.rJ)(a,"sets");try{const e=(0,_.wP)(a),i=(0,_.H9)(c,null===t||void 0===t?void 0:t.id),o=r.map(((e,t)=>({key:t.toString(),reps:e.reps,weight:e.weight})));e.set(i,{approaches:o}),await e.commit(),n.Ay.success(s("exerciseDataSaved"))}catch(e){n.Ay.error(s("errorSavingExerciseData"))}}},children:s("save")})]})]}):(0,C.jsx)(d.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",borderColor:"#535353",headerSplitColor:"#535353"}}},children:(0,C.jsx)(x.A,{columns:T,className:E.table,locale:{emptyText:(0,C.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,C.jsx)("span",{style:{color:"#ffffff"},children:s("noData")})})}})})]})};var I=s(1238),D=s(9868);const b="AddExercise_addExercise__7FNxa",k="AddExercise_button__mkO2c",T=e=>{let{onAddExercise:t,category:s}=e;const{t:r}=(0,p.Bd)(),[c,i]=(0,a.useState)("");return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.t,{children:r("addAnExercise")}),(0,C.jsxs)("div",{className:b,children:[(0,C.jsx)(D.w,{value:c,onChange:e=>i(e),text:r("exerciseName"),placeholder:r("typeExercise")}),(0,C.jsx)(v.S,{className:k,icon:(0,C.jsx)(h.A,{}),onClick:async()=>{if(c)try{const e=(0,_.aU)(),a=(0,y.xI)().currentUser;if(a){const o=a.uid,l={id:(0,I.A)(),name:c,category:s,bestResult:0,isFavorite:!1},d=(0,_.H9)(e,"exercises",o),x=await(0,_.x7)(d);x.exists()?await(0,_.mZ)(d,{exercises:[...x.data().exercises,l]}):await(0,_.mZ)(d,{exercises:[l]}),n.Ay.success(r("exerciseAdded")),i(""),t()}}catch(e){n.Ay.error(r("errorAddingExercise"))}else n.Ay.error(r("typeExercise"))},children:r("addExerciseBtn")})]})]})};var F=s(7261);const M=()=>{const{t:e}=(0,p.Bd)();return(0,C.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,C.jsx)("span",{style:{color:"#ffffff"},children:e("noData")})})},B="Exercises_title__ThgWQ",R="Exercises_description__cykz7",P="Exercises_cards__+xw7k";var U=s(1882),O=s(7407);const H={options:"CardOptions_options__F-aCP",star:"CardOptions_star__tS7rd",active:"CardOptions_active__E3ut+"},L=e=>{let{item:t,category:s,setData:r,setCurrentEditingId:c,setNewName:i,setEditMode:o}=e;const{t:l}=(0,p.Bd)(),[d,x]=(0,a.useState)(!1);return(0,C.jsxs)("div",{className:H.options,children:[(0,C.jsxs)(v.S,{onClick:e=>{e.stopPropagation(),(async(e,t)=>{try{const a=(0,_.aU)(),c=(0,y.xI)().currentUser;if(c){const i=c.uid,o=(0,_.H9)(a,"exercises",i),u=await(0,_.x7)(o);if(u.exists()){let a=u.data().exercises.map((s=>s.id===e?{...s,isFavorite:!t}:s));await(0,_.mZ)(o,{exercises:a});const c=l("categories.".concat(s)),i=a.filter((e=>l("categories.".concat(e.category))===c));r(i)}t?n.Ay.success(l("removedFromFavorite")):n.Ay.success(l("addedToFavorite")),x(!d)}}catch(a){n.Ay.error(l("errorUpdatingFavorite"))}})(t.id,t.isFavorite)},className:"".concat(H.star," ").concat(t.isFavorite?H.active:""),children:[(0,C.jsx)(U.A,{})," ",l("favorite")]}),(0,C.jsxs)(v.S,{onClick:e=>{var s,a;e.stopPropagation(),s=t.id,a=t.name,c(s),i(a),o(!0)},children:[(0,C.jsx)(O.A,{className:H.editIcon}),l("editName")]})]})};var J=s(1966),W=s(5556),Z=s(9525);const q="DeleteIcon_deleteIconContainer__IWqYi",z="DeleteIcon_deleteIcon__ntbKM",G="DeleteIcon_confirm__0yMiT",K="DeleteIcon_deleteSave__joWfR",V=e=>{let{setLoading:t,setIsModalOpen:s,category:a,setData:r,isModalOpen:c,handleCancel:i,item:o,setConfirm:l}=e;const{t:d}=(0,p.Bd)();return(0,C.jsxs)(W.j,{open:c,onCancel:e=>{i(e),s(!1)},footer:!1,children:[(0,C.jsx)("p",{className:G,children:d("confirmDeletingExercise")}),(0,C.jsx)("div",{className:K,children:(0,C.jsx)(Z.U,{children:d("delete"),onClick:e=>{e.stopPropagation(),(async e=>{t(!0);try{const t=(0,_.aU)(),c=(0,y.xI)().currentUser;if(c){const s=c.uid,i=(0,_.H9)(t,"exercises",s),o=(0,_.H9)(t,"sets",e),l=await(0,_.x7)(i);if(await(0,_.kd)(o),l.exists()){const t=l.data();let s=[];if(t&&t.exercises){s=t.exercises.filter((t=>t.id!==e)),await(0,_.mZ)(i,{exercises:s});const c=s.filter((e=>d("categories.".concat(e.category))===d("categories.".concat(a))));r(c),localStorage.setItem("exercisesData",JSON.stringify(c)),n.Ay.success(d("exerciseDeleted"))}}}l(!1),s(!1)}catch(c){n.Ay.error(d("errorDeletingExercise"))}finally{t(!1)}})(o.id)},icon:(0,C.jsx)(J.A,{})})})]})},Y=e=>{let{setLoading:t,setIsModalOpen:s,category:r,setData:c,isModalOpen:i,handleCancel:n,item:l}=e;const{t:d}=(0,p.Bd)(),[x,u]=(0,a.useState)(!1);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:q,children:(0,C.jsx)(o.A,{title:d("deleteExercise"),children:(0,C.jsx)(g.A,{className:z,onClick:e=>{e.stopPropagation(),u(!0),s(!0)}})})}),x&&(0,C.jsx)(V,{setLoading:t,category:r,setData:c,isModalOpen:i,setIsModalOpen:s,handleCancel:n,item:l,setConfirm:u})]})},Q="EditInput_editInput__CnmRa",X=e=>{let{newName:t,editMode:s,currentEditingId:r,setCurrentEditingId:c,category:i,setData:o,setEditMode:l,setNewName:d}=e;const{t:x}=(0,p.Bd)(),u=(0,a.useRef)(null);(0,a.useEffect)((()=>{s&&u.current&&u.current.focus()}),[s]);const g=async(e,t)=>{try{const s=(0,_.aU)(),a=(0,y.xI)().currentUser;if(a){const r=a.uid,c=(0,_.H9)(s,"exercises",r),n=await(0,_.x7)(c);if(n.exists()){let s=n.data().exercises.map((s=>s.id===e?{...s,name:t}:s));await(0,_.mZ)(c,{exercises:s});const a=s.filter((e=>x("categories.".concat(e.category))===x("categories.".concat(i)))).map((e=>({id:e.id,name:x(e.name),category:e.category,bestResult:"".concat(x("lastSet"),": ").concat(e.bestResult),isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(a)),o(a)}}}catch(s){n.Ay.error(x("nameChangeFailed"))}};return(0,C.jsx)("input",{value:t,className:Q,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&r&&(g(r,t),l(!1),c(null))},onBlur:()=>{r&&(g(r,t),l(!1),c(null))},ref:u})},$="ExerciseCard_cardItem__2AKct",ee="ExerciseCard_active__7n1-4",te="ExerciseCard_exerciseContainer__nXbmq",se="ExerciseCard_exerciseName__MCYS-",ae=e=>{let{item:t,onSelectExercise:s,category:r,setData:c,setLoading:i,activeCardId:n,setActiveCardId:o}=e;const[l,d]=(0,a.useState)(!1),[x,u]=(0,a.useState)(""),[g,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1);return(0,C.jsxs)("div",{className:"".concat($," ").concat(n===t.id?ee:""),onClick:()=>(e=>{o(e.id),s(e)})(t),children:[(0,C.jsx)(Y,{setLoading:i,setIsModalOpen:d,category:r,setData:c,isModalOpen:l,handleCancel:e=>{e.stopPropagation(),d(!1)},item:t}),g===t.id&&m?(0,C.jsx)(X,{newName:x,editMode:m,currentEditingId:g,setCurrentEditingId:h,category:r,setData:c,setEditMode:f,setNewName:u}):(0,C.jsx)("div",{className:te,children:(0,C.jsx)("span",{className:se,children:t.name})}),(0,C.jsx)(L,{item:t,category:r,setData:c,setCurrentEditingId:h,setNewName:u,setEditMode:f})]})},re=e=>{let{category:t,updateTrigger:s,onSelectExercise:r}=e;const{t:c}=(0,p.Bd)(),[i,o]=(0,a.useState)([]),[l,d]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(o(e),d(!1))}),[t]),(0,a.useEffect)((()=>{(async()=>{d(!0);try{const e=(0,_.aU)(),s=(0,y.xI)().currentUser;if(s){const a=s.uid,r=(0,_.H9)(e,"exercises",a),i=await(0,_.x7)(r);if(i.exists()){const e=i.data().exercises.filter((e=>c("categories.".concat(e.category))===c("categories.".concat(t)))).map((e=>({id:e.id,name:c(e.name),category:e.category,bestResult:"".concat(c("lastSet"),": ").concat(e.bestResult),isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(e)),o(e)}}d(!1)}catch(e){n.Ay.error(c("errorFetchingExercises"))}})()}),[t,c,s]),(0,C.jsx)(C.Fragment,{children:l?(0,C.jsx)(F.a,{}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.t,{children:c("exercises"),className:B}),(0,C.jsx)("div",{className:R,children:c("chooseExercise")}),(0,C.jsx)("div",{className:P,children:i.length?i.map((e=>(0,C.jsx)(ae,{item:e,onSelectExercise:r,category:t,setData:o,setLoading:d,activeCardId:x,setActiveCardId:u},e.id))):(0,C.jsx)(M,{})})]})})},ce=()=>{const e=(0,r.zy)().state,[t,s]=(0,a.useState)(0),[n,o]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,C.jsxs)(i.f,{children:[(0,C.jsx)(c.B,{text:e.title,textAlign:"center"}),(0,C.jsx)(T,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>s((e=>e+1))}),(0,C.jsx)(re,{category:null===e||void 0===e?void 0:e.title,updateTrigger:t,onSelectExercise:e=>o(e)}),(0,C.jsx)(w,{selectedExercise:n})]})}}}]);
//# sourceMappingURL=0.5eba02e0.chunk.js.map