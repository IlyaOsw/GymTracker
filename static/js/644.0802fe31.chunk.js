"use strict";(self.webpackChunkgymtracker=self.webpackChunkgymtracker||[]).push([[644],{9868:(e,t,s)=>{s.d(t,{w:()=>d});var r=s(4e3),c=s(5578),a=(s(5043),s(4117));const i="CustomInput_inputWrapper__wz8SN",n="CustomInput_inputLabel__b-QWx",o="CustomInput_inputField__baNtE";var l=s(579);const d=e=>{let{name:t,text:s,type:d,placeholder:x,isRequired:u=!0,className:h,onChange:f,value:g}=e;const{t:m}=(0,a.Bd)();return(0,l.jsx)("div",{className:i,children:(0,l.jsx)(r.A.Item,{label:(0,l.jsx)("span",{className:n,children:m(s)}),name:t,rules:[{required:u}],children:(0,l.jsx)(c.A,{type:d,placeholder:x,className:"".concat(o," ").concat(h),allowClear:!0,onChange:e=>{const{value:t}=e.target;f&&f(t)},value:g})})})}},5556:(e,t,s)=>{s.d(t,{j:()=>i});var r=s(8732),c=s(2918),a=(s(5043),s(579));const i=e=>{let{open:t,onCancel:s,footer:i=null,children:n}=e;return(0,a.jsx)(r.Ay,{theme:{components:{Modal:{contentBg:"#141414",colorIcon:"lightgray",colorIconHover:"gray"}}},children:(0,a.jsx)(c.A,{open:t,onCancel:s,footer:i,style:{marginTop:"50px"},children:n})})}},1499:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(1984),c=s(4117),a=s(5459);const i={descriptionTitle:"DescriptionTitle_descriptionTitle__E-lRw",start:"DescriptionTitle_start__FSu7h",center:"DescriptionTitle_center__eJvMJ",end:"DescriptionTitle_end__uV+MA"};var n=s(579);const o=e=>{let{text:t,textAlign:s="start",className:o}=e;const{t:l}=(0,c.Bd)(),{ref:d,controls:x}=(0,a.F)();return(0,n.jsx)(r.P.h2,{ref:d,className:"".concat(i.descriptionTitle," ").concat(i[s]," ").concat(o),initial:"hidden",animate:x,variants:a.l,children:l(t)})}},9752:(e,t,s)=>{s.d(t,{f:()=>a});s(5043);var r=s(579);const c={maxWidth:"1200px",margin:"0 auto"},a=e=>{let{children:t}=e;return(0,r.jsx)("div",{style:c,children:t})}},9525:(e,t,s)=>{s.d(t,{U:()=>i});s(5043);var r=s(7021);const c="ResetButton_reset__efwrw";var a=s(579);const i=e=>{let{onClick:t,children:s,icon:i}=e;return(0,a.jsx)(r.Ay,{className:c,onClick:t,icon:i,children:s})}},9589:(e,t,s)=>{s.d(t,{t:()=>n});s(5043);var r=s(1984),c=s(5459);const a="SubTitle_subTitle__6A8PN";var i=s(579);const n=e=>{let{children:t,className:s}=e;const{ref:n,controls:o}=(0,c.F)();return(0,i.jsx)(r.P.p,{ref:n,className:"".concat(a," ").concat(s),initial:"hidden",animate:o,variants:c.l,children:t})}},5459:(e,t,s)=>{s.d(t,{F:()=>i,l:()=>n});var r=s(9927),c=s(5246),a=s(5043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const i=(0,r.s)(),[n,o]=(0,c.Wx)({threshold:e,triggerOnce:t});return(0,a.useEffect)((()=>{o?i.start("visible"):i.start("hidden")}),[i,o]),{ref:n,controls:i,animationVariants:s}},n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}}}},7644:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Y});var r=s(5043),c=s(3216),a=s(1499),i=s(9752),n=s(6569),o=s(2481),l=s(8354),d=s(8732),x=s(5743),u=s(9472),h=s(3727),f=s(5337),g=s(682),m=s(3390),p=s(4117),_=s(8895),y=s(6032),v=s(3963),j=s(9589);const A={tableTitle:"ExerciseTable_tableTitle__nWHV1",date:"ExerciseTable_date__+kHp7",table:"ExerciseTable_table__gqYvK",editableDiv:"ExerciseTable_editableDiv__lnIPx",repsAndDelete:"ExerciseTable_repsAndDelete__sJi7S",tableFooter:"ExerciseTable_tableFooter__8lrF-"},E="NumericInput_input__GI+NF";var S=s(579);const w=(e,t)=>{let{value:s,onChange:r,onBlur:c}=e;return(0,S.jsx)("input",{ref:t,value:s,onChange:e=>{const t=e.target.value;/^\d*\.?\d?$/.test(t)&&r(t)},onBlur:c,className:E,type:"number"})},b=(0,r.forwardRef)(w),N=e=>{let{selectedExercise:t}=e;const{t:s}=(0,p.Bd)(),[c,a]=(0,r.useState)([]),[i,E]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),k=(0,r.useRef)(null),C=(0,r.useRef)(null);(0,r.useEffect)((()=>{t?D():a([])}),[t]),(0,r.useEffect)((()=>{i&&k.current&&k.current.focus()}),[i]),(0,r.useEffect)((()=>{w&&C.current&&C.current.focus()}),[w]);const T=()=>setTimeout((()=>{window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}),100),D=async()=>{if(!t)return;if((0,_.xI)().currentUser){const r=(0,y.aU)(),c=(0,y.rJ)(r,"sets"),i=(0,y.H9)(c,t.id);try{const e=await(0,y.x7)(i);if(e.exists()){const t=e.data(),s=(t.approaches||[]).map(((e,t)=>({key:t.toString(),set:t+1,weight:e.weight.toString(),reps:e.reps.toString(),icon:(0,S.jsx)(h.A,{})})));a(s),T()}else a([]),T()}catch(e){n.Ay.error(s("errorLoadingExerciseData"))}}},F=[{title:"".concat(s("set")),dataIndex:"set",width:"30%"},{title:"".concat(s("weight")),dataIndex:"weight",width:"30%",render:(e,t)=>i===t.key?(0,S.jsx)(b,{ref:k,value:t.weight,onChange:e=>((e,t)=>{const s=c.map((s=>s.key===e?{...s,weight:t}:s));a(s)})(t.key,e),onBlur:()=>E(null)}):(0,S.jsx)("div",{onClick:()=>E(t.key),className:A.editableDiv,children:t.weight||s("clickToEdit")})},{title:"".concat(s("reps")),dataIndex:"reps",width:"30%",render:(e,r)=>w===r.key?(0,S.jsx)(b,{ref:C,value:r.reps,onChange:e=>((e,t)=>{const s=c.map((s=>s.key===e?{...s,reps:t}:s));a(s)})(r.key,e),onBlur:()=>N(null)}):(0,S.jsxs)("div",{className:A.repsAndDelete,children:[(0,S.jsx)("div",{onClick:()=>N(r.key),className:A.editableDiv,children:r.reps||s("clickToEdit")}),(0,S.jsx)("div",{className:A.deledeContainer,children:(0,S.jsx)(o.A,{title:s("deleteRow"),children:(0,S.jsx)(h.A,{onClick:()=>(async e=>{if(t)try{const r=(0,y.aU)(),c=t.id,a=(0,y.H9)(r,"sets",c),i=await(0,y.x7)(a);if(!i.exists())throw new Error("".concat(c," does not exist"));const{approaches:o}=i.data(),l=o.findIndex((t=>t.key===e));o.splice(l,1),await(0,y.mZ)(a,{approaches:o}),n.Ay.success(s("exerciseDataDeletedSuccessfully"))}catch(r){n.Ay.error(s("failedToDeleteExerciseData"))}finally{D()}})(r.key)})})})]})}];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.A,{style:{backgroundColor:"gray"}}),(0,S.jsxs)("div",{className:A.tableTitle,children:[(0,S.jsx)(j.t,{children:t?t.name:s("noExerciseSelected")}),(0,S.jsxs)("div",{className:A.date,children:[s("date"),(new Date).toLocaleDateString()]})]}),t?(0,S.jsxs)(d.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",colorText:"#ffffff",colorPrimary:"#ffffff",rowHoverBg:"#464646",borderColor:"#535353",headerSplitColor:"#535353"}}},children:[(0,S.jsx)(x.A,{columns:F,dataSource:c,pagination:!1,className:A.table,locale:{emptyText:(0,S.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,S.jsx)("span",{style:{color:"#ffffff"},children:s("noData")})})}}),(0,S.jsx)(v.S,{onClick:()=>{if(!t)return;const e=[...c],s=e.length>0?e[e.length-1].set+1:1,r={key:s.toString(),weight:"",set:s,reps:"",icon:(0,S.jsx)(h.A,{})};e.push(r),a(e),E(r.key)},icon:(0,S.jsx)(f.A,{}),children:s("addRow")}),(0,S.jsxs)("div",{className:A.tableFooter,children:[(0,S.jsx)(v.S,{icon:(0,S.jsx)(g.A,{}),children:s("previous")}),(0,S.jsx)(v.S,{icon:(0,S.jsx)(m.A,{}),onClick:async()=>{if((0,_.xI)().currentUser){const r=(0,y.aU)(),a=(0,y.rJ)(r,"sets");try{const e=(0,y.wP)(r),i=(0,y.H9)(a,null===t||void 0===t?void 0:t.id),o=c.map(((e,t)=>({key:t.toString(),reps:e.reps,weight:e.weight})));e.set(i,{approaches:o}),await e.commit(),n.Ay.success(s("exerciseDataSaved"))}catch(e){n.Ay.error(s("errorSavingExerciseData"))}}},children:s("save")})]})]}):(0,S.jsx)(d.Ay,{theme:{components:{Table:{headerBg:"#1A1A1A",headerColor:"#ffffff",cellFontSize:18,colorBgContainer:"#282828",borderColor:"#535353",headerSplitColor:"#535353"}}},children:(0,S.jsx)(x.A,{columns:F,className:A.table,locale:{emptyText:(0,S.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,S.jsx)("span",{style:{color:"#ffffff"},children:s("noData")})})}})})]})};var k=s(1238),C=s(9868);const T="AddExercise_addExercise__7FNxa",D="AddExercise_button__mkO2c",F=e=>{let{onAddExercise:t,category:s}=e;const{t:c}=(0,p.Bd)(),[a,i]=(0,r.useState)("");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.t,{children:c("addAnExercise")}),(0,S.jsxs)("div",{className:T,children:[(0,S.jsx)(C.w,{value:a,onChange:e=>i(e),text:c("exerciseName"),placeholder:c("typeExercise")}),(0,S.jsx)(v.S,{className:D,icon:(0,S.jsx)(f.A,{}),onClick:async()=>{if(a)try{const e=(0,y.aU)(),r=(0,_.xI)().currentUser;if(r){const o=r.uid,l={id:(0,k.A)(),name:a,category:s,bestResult:0,isFavorite:!1},d=(0,y.H9)(e,"exercises",o),x=await(0,y.x7)(d);x.exists()?await(0,y.mZ)(d,{exercises:[...x.data().exercises,l]}):await(0,y.mZ)(d,{exercises:[l]}),n.Ay.success(c("exerciseAdded")),i(""),t()}}catch(e){n.Ay.error(c("errorAddingExercise"))}else n.Ay.error(c("typeExercise"))},children:c("addExerciseBtn")})]})]})};var I=s(349),B=s(3586),U=s(1966),H=s(1882),P=s(7261),R=s(5556),J=s(9525);const M="Exercises_title__ThgWQ",L="Exercises_cardTitle__tmJjS",z="Exercises_exercises__BEFnF",G="Exercises_deleteIconBlock__wVkhJ",O="Exercises_favoriteIcon__BEv1g",W="Exercises_deleteIcon__X1Kq5",Z="Exercises_confirm__DCCIL",q="Exercises_delete__ikuGj",V="Exercises_star__OY09M",K="Exercises_active__8jdlH",Q=e=>{let{category:t,updateTrigger:s,onSelectExercise:c}=e;const{t:a}=(0,p.Bd)(),[i,l]=(0,r.useState)([]),[x,f]=(0,r.useState)(!0),[g,m]=(0,r.useState)(!1),[v,A]=(0,r.useState)(!1),[E,w]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("exercisesData")||"[]");e.length>0&&(l(e),f(!1))}),[t]),(0,r.useEffect)((()=>{(async()=>{f(!0);try{const e=(0,y.aU)(),s=(0,_.xI)().currentUser;if(s){const r=s.uid,c=(0,y.H9)(e,"exercises",r),i=await(0,y.x7)(c);if(i.exists()){const e=i.data(),s=a("categories.".concat(t)),r=e.exercises.filter((e=>a("categories.".concat(e.category))===s)).map((e=>({id:e.id,name:a(e.name),category:e.category,bestResult:"".concat(a("lastSet"),": ").concat(e.bestResult),isFavorite:e.isFavorite})));localStorage.setItem("exercisesData",JSON.stringify(r)),l(r)}else l([])}}catch(e){I.Ay.error({message:a("errorFetchingExercises")})}finally{f(!1)}})()}),[t,a,s]);const b=()=>A(!1);return(0,S.jsx)(S.Fragment,{children:x?(0,S.jsx)(P.a,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.t,{children:a("exercises"),className:M}),(0,S.jsx)(d.Ay,{theme:{components:{Card:{headerFontSize:20,headerBg:"#1a1a1a",colorTextHeading:"#ffffff",fontSize:16,colorBorderSecondary:"#535353"}}},children:(0,S.jsx)(B.A,{title:(0,S.jsx)("span",{className:L,children:a("chooseExercise")}),className:z,bordered:!1,children:i.length>0?i.map((e=>(0,S.jsxs)(B.A.Grid,{onClick:()=>c(e),children:[(0,S.jsxs)("div",{className:G,children:[(0,S.jsx)(o.A,{title:a("deleteExercise"),children:(0,S.jsx)(h.A,{className:W,onClick:e=>{e.stopPropagation(),w(!0),A(!0)}})}),E&&(0,S.jsxs)(R.j,{open:v,onCancel:b,footer:!1,children:[(0,S.jsx)("p",{className:Z,children:a("confirmDeletingExercise")}),(0,S.jsx)("div",{className:q,children:(0,S.jsx)(J.U,{children:a("delete"),onClick:()=>(async e=>{f(!0);try{const s=(0,y.aU)(),r=(0,_.xI)().currentUser;if(r){const c=r.uid,i=(0,y.H9)(s,"exercises",c),o=(0,y.H9)(s,"sets",e),d=await(0,y.x7)(i);if(await(0,y.kd)(o),d.exists()){const s=d.data();let r=[];if(s&&s.exercises){r=s.exercises.filter((t=>t.id!==e)),await(0,y.mZ)(i,{exercises:r}),n.Ay.success(a("exerciseDeleted"));const c=a("categories.".concat(t)),o=r.filter((e=>a("categories.".concat(e.category))===c));l(o),localStorage.setItem("exercisesData",JSON.stringify(o))}}}w(!1)}catch(s){n.Ay.error(a("errorDeletingExercise"))}finally{f(!1)}})(e.id),icon:(0,S.jsx)(U.A,{})})})]})]}),e.name,(0,S.jsx)("div",{className:O,children:(0,S.jsx)(o.A,{title:a("addToFavorite"),children:(0,S.jsx)(H.A,{className:"".concat(V," ").concat(e.isFavorite?K:""),onClick:s=>{s.stopPropagation(),(async(e,s)=>{try{const r=(0,y.aU)(),c=(0,_.xI)().currentUser;if(c){const i=c.uid,o=(0,y.H9)(r,"exercises",i),d=await(0,y.x7)(o);if(d.exists()){let r=d.data().exercises.map((t=>t.id===e?{...t,isFavorite:!s}:t));await(0,y.mZ)(o,{exercises:r});const c=a("categories.".concat(t)),i=r.filter((e=>a("categories.".concat(e.category))===c));l(i)}s?n.Ay.success(a("addedToFavorite")):n.Ay.success(a("removedFromFavorite")),m(!g)}}catch(r){n.Ay.error(a("errorUpdatingFavorite"))}})(e.id,e.isFavorite)}})})})]},e.id))):(0,S.jsx)(u.A,{image:u.A.PRESENTED_IMAGE_SIMPLE,description:(0,S.jsx)("span",{style:{color:"#ffffff"},children:a("noData")})})})})]})})},Y=()=>{const e=(0,c.zy)().state,[t,s]=(0,r.useState)(0),[n,o]=(0,r.useState)(null);(0,r.useEffect)((()=>{window.scroll(0,0)}),[]);return(0,S.jsxs)(i.f,{children:[(0,S.jsx)(a.B,{text:null===e||void 0===e?void 0:e.title,textAlign:"center"}),(0,S.jsx)(F,{category:null===e||void 0===e?void 0:e.title,onAddExercise:()=>s((e=>e+1))}),(0,S.jsx)(Q,{category:null===e||void 0===e?void 0:e.title,updateTrigger:t,onSelectExercise:e=>o(e)}),(0,S.jsx)(N,{selectedExercise:n})]})}}}]);
//# sourceMappingURL=644.0802fe31.chunk.js.map